msgid ""
msgstr ""
"Language: ja_JP\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: jekyll-l10n\n"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "ArC migrates to Gizmo 2"
msgstr "ArCがGizmo 2に移行"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "ArC got rewritten from Gizmo 1 to Gizmo 2. What does that mean for you?"
msgstr "ArCはGizmo 1からGizmo 2に書き換えられました。どういう意味ですか？"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"ArC is Quarkus's implementation of CDI Lite.\n"
"Gizmo is a simplified bytecode generation library.\n"
"What do they have in common?"
msgstr "ArCは、QuarkusによるCDI Liteの実装です。Gizmoは簡易バイトコード生成ライブラリです。これらの共通点は？"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"ArC has been using Gizmo 1 since approximately forever, but now that Gizmo 2 is shaping up, some Quarkus components have started migrating to it.\n"
"I have started rewriting ArC to Gizmo 2 a few months ago, when we felt like Gizmo 2 starts looking reasonable and some real-world experience was needed."
msgstr "ArCは、ほぼずっとGizmo 1を使ってきましたが、Gizmo 2が完成しつつある今、いくつかのQuarkusコンポーネントはGizmo 2に移行し始めています。数ヶ月前、Gizmo 2が合理的に見えてきて、実際の経験が必要だと感じたので、ArCをGizmo 2に書き直しました。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "This rewrite took several months, mostly because Gizmo 2 is a complete rewrite and rearchitecture of Gizmo 1 and ArC is a heavy user, but also because during the ArC rewrite, I found some Gizmo 2 issues and there were several back and forths."
msgstr "Gizmo 2はGizmo 1の完全な書き換えと再構築であり、ArCはヘビーユーザーであるため、この書き換えには数ヶ月を要しました。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"To illustrate, I'll first go over the differences in Gizmo 1 and 2, and then detail how that affects ArC users.\n"
"Spoiler alert: there's no change that would affect Quarkus applications.\n"
"All changes are in the APIs that are only exposed to extensions (at build time)."
msgstr "説明のために、まず Gizmo 1 と 2 の違いを説明し、それが ArC ユーザーにどのように影響するかを詳しく説明します。ネタバレ注意：Quarkusアプリケーションに影響を与えるような変更はありません。全ての変更は（ビルド時に）エクステンションにのみ公開される API にあります。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "Gizmo 1 vs Gizmo 2"
msgstr "ギズモ1 vs ギズモ2"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"First off, Gizmo 1 is based on ASM and Gizmo 2 is based on the ClassFile API (not the one present in the JDK since link:https://openjdk.org/jeps/484[version 24], but the link:https://github.com/dmlloyd/jdk-classfile-backport[fork] maintained by David Lloyd, which supports Java 17).\n"
"The ClassFile API itself is very different to ASM, and since the ClassFile API structure guided the Gizmo 2 API structure, that is also very different."
msgstr "まず、Gizmo 1はASMをベースにしており、Gizmo 2はClassFile API（ link:https://openjdk.org/jeps/484[バージョン24] 以降のJDKに存在するものではなく、Java 17をサポートするDavid Lloyd氏によって維持されている link:https://github.com/dmlloyd/jdk-classfile-backport[フォーク] ）をベースにしています。ClassFile API自体はASMとは大きく異なり、ClassFile APIの構造がGizmo 2のAPIの構造を導いているので、これも大きく異なります。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "To quickly compare, this is how you generate a \"Hello, World!\" program with Gizmo 1:"
msgstr "手っ取り早く比較するために、Gizmo 1で「Hello, World!"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "And this is how you generate the same program with Gizmo 2:"
msgstr "そしてこれが、Gizmo 2で同じプログラムを生成する方法です："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"There are obvious surface-level differences in the API structure, but there are also deeper differences.\n"
"I'll mention one here just as an example: the way Gizmo represents and maintains values has changed significantly."
msgstr "APIの構造には明らかに表面的な違いがありますが、より深い違いもあります。Gizmoが値を表現し、保持する方法が大きく変わりました。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"Gizmo 1 has the venerable `ResultHandle` class, which is almost always a local variable (even though the API doesn't let you assign to it; you have to use `AssignableResultHandle` for that).\n"
"This means you don't really have to care about order in which you produce values or about using them multiple times -- everything just works.\n"
"There's obvious overhead though: for each use of the value, it needs to be loaded from the variable to the stack."
msgstr "Gizmo 1には、由緒ある `ResultHandle` クラスがあります。このクラスは、ほとんど常にローカル変数です（APIでは代入できませんが、その場合は `AssignableResultHandle` ）。このため、値を生成する順序や、値を複数回使用することにこだわる必要はありません。しかし、明らかなオーバーヘッドがあります。値を使用するたびに、変数からスタックにロードする必要があります。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "On the other hand, Gizmo 2 represents values as ``Expr``s, which are _not_ local variables:"
msgstr "一方、ギズモ2は `Expr` s として値を表し、これはローカル変数では _ありません_ ："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"An `Expr` is a value that is, at the time of its creation, on top of the stack, nothing more.\n"
"This means the order of producing values suddenly matters and they may not be reused!\n"
"To create a local variable (`LocalVar`) out of an expression, you have to explicitly call a method:"
msgstr "`Expr` は、その値が生成された時点でスタックの一番上にあり、それ以上のものではありません。つまり、値を生成する順番が突然重要になり、再利用することはできません！式からローカル変数 ( `LocalVar` ) を作成するには、明示的にメソッドを呼び出す必要があります："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"There are a lot more concepts not shown in these examples, which you can read about in the documentation.\n"
"The Gizmo 1 documentation is available at https://github.com/quarkusio/gizmo/blob/1.x/USAGE.adoc, while the Gizmo 2 documentation (not yet complete) is available at https://github.com/quarkusio/gizmo/blob/main/MANUAL.adoc."
msgstr "これらの例で紹介されていない概念もたくさんありますので、ドキュメントをお読みください。ギズモ1のドキュメントは https://github.com/quarkusio/gizmo/blob/1.x/USAGE.adoc 、ギズモ2のドキュメント（未完成）は link:https://github.com/quarkusio/gizmo/blob/main/MANUAL.adoc[https://github.com/quarkusio/gizmo/blob/main/MANUAL.adoc。]"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "ArC"
msgstr "アーク"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"Back to ArC.\n"
"Today, all bytecode generation in ArC is based on Gizmo 2 (if you want the gory details, look at https://github.com/quarkusio/quarkus/pull/50708[this pull request]), and it's going to be released in Quarkus 3.30."
msgstr "ArCの話に戻ります。現在、ArCのすべてのバイトコード生成はGizmo 2をベースにしており（詳細が知りたければ、 link:https://github.com/quarkusio/quarkus/pull/50708[このプルリクエストを見て] ください）、Quarkus 3.30でリリースされる予定です。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"ArC has several public APIs that expose Gizmo types.\n"
"This means that the rewrite to Gizmo 2 includes breaking changes.\n"
"These are unlikely to impact users -- in fact, the number of affected places in the Quarkus core repository is surprisingly small.\n"
"However, in the interest of transparency, here's a full list of API breakages:"
msgstr "ArCにはGizmoの型を公開するパブリックAPIがいくつかあります。つまり、Gizmo 2への書き換えには破壊的な変更が含まれます。実際、Quarkusのコアリポジトリで影響を受ける箇所は驚くほど少ないです。Quarkusのコアリポジトリで影響を受ける箇所は驚くほど少ないです："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`BeanConfiguratorBase`: methods"
msgstr "`BeanConfiguratorBase` 方法"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "were changed to"
msgstr "に変更されました。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`ObserverConfigurator`: method"
msgstr "`ObserverConfigurator` 方法"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "was changed to"
msgstr "に変更されました。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`ContextConfigurator`: method"
msgstr "`ContextConfigurator` 方法"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`BeanProcessor.Builder`: method"
msgstr "`BeanProcessor.Builder` 方法"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"Noone is expected to be affected by the last change, because that is in the ArC integration API, which should only be used by the Quarkus ArC extension.\n"
"The other changes are in APIs that could legitimately be used:"
msgstr "最後の変更はArC統合APIにあり、Quarkus ArCエクステンションによってのみ使用されるべきものです。他の変更は合法的に使用できるAPIにあります："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "synthetic beans"
msgstr "じんぞうまめ"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "synthetic observers"
msgstr "合成オブザーバー"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "custom contexts"
msgstr "カスタムコンテキスト"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"As you see, all these changes are similar.\n"
"The Gizmo 1 variant takes a `Consumer<MethodCreator>` (or, in one case, a `Function<MethodCreator, ResultHandle>`).\n"
"The `MethodCreator` must be used to create the bytecode of the corresponding method:"
msgstr "ご覧のように、これらの変更はすべて似ています。Gizmo 1のバリアントは `Consumer<MethodCreator>` （ある場合は `Function<MethodCreator, ResultHandle>` ）を取ります。 `MethodCreator` は、対応するメソッドのバイトコードを作成するために使用する必要があります："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`BeanConfiguratorBase.creator()`: create an instance of the synthetic bean"
msgstr "`BeanConfiguratorBase.creator()` 合成 Bean のインスタンスを作成します。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`BeanConfiguratorBase.destroyer()`: destroy an instance of the synthetic bean"
msgstr "`BeanConfiguratorBase.destroyer()` 合成 Bean のインスタンスを破棄します。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`BeanConfiguratorBase.checkActive()`: check if the synthetic bean is currently active (niche use case, most likely unused outside of the core Quarkus repository)"
msgstr "`BeanConfiguratorBase.checkActive()` 合成ビーンが現在アクティブかどうかをチェックします（ニッチなユースケース。）"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`ObserverConfigurator.notify()`: notify the synthetic observer"
msgstr "`ObserverConfigurator.notify()` 合成オブザーバーに通知"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "`ContextConfigurator.creator()`: create a context object of the custom context"
msgstr "`ContextConfigurator.creator()` カスタムコンテキストのコンテキストオブジェクトを作成します。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"The Gizmo 2 variants no longer take a Gizmo object.\n"
"Instead, they take an ArC interface that provides access to all the necessary Gizmo objects -- because more than 1 is necessary."
msgstr "Gizmo 2 のバリアントはもはや Gizmo オブジェクトを取りません。代わりに、必要なすべてのGizmoオブジェクトへのアクセスを提供するArCインターフェースを取ります。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"As mentioned above, most extensions should not be affected.\n"
"This is because higher-level APIs exist that do not expose bytecode generation; either they use classes that implement interfaces, or they accept results of recorder methods.\n"
"These higher-level APIs didn't change at all.\n"
"However, using the lower-level APIs is still permitted, so let's take a look at how we'd migrate a simple synthetic bean creation function from Gizmo 1 to Gizmo 2."
msgstr "前述のように、ほとんどの拡張機能は影響を受けないはずです。なぜなら、バイトコード生成を公開しないより高レベルのAPIが存在するからです。インターフェイスを実装したクラスを使用するか、レコーダーメソッドの結果を受け取ります。これらの上位APIはまったく変更されません。しかし、下位レベルのAPIを使用することは許可されているので、単純な合成ビーン作成関数をGizmo 1からGizmo 2に移行する方法を見てみましょう。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "Here's a simple synthetic bean registered using `SyntheticBeanBuildItem`:"
msgstr "以下は、 `SyntheticBeanBuildItem` を使って登録した簡単な合成ビーンです："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "The `Consumer` here accepts a `MethodCreator` that provides direct access to its parameters as well as to the class, from which one can read the fields."
msgstr "ここで `Consumer` は、 `MethodCreator` を受け取ります。 は、パラメータへの直接アクセスを提供するだけでなく、クラスへのアクセスも提供し、そこからフィールドを読み取ることもできます。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "After the rewrite to Gizmo 2, the code looks like:"
msgstr "Gizmo 2に書き換えた後のコードは次のようになります："

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"The `Consumer` accepts `CreateGeneration` that provides access to the `BlockCreator` to generate bytecode (`createMethod()`) and a number of necessary variables.\n"
"In this example, we use the `paramsMap()` method to acccess the parameter map."
msgstr "`Consumer` は `CreateGeneration` を受け入れ、 `BlockCreator` にアクセスしてバイトコード ( `createMethod()` ) と必要な変数を生成します。この例では、 `paramsMap()` メソッドを使ってパラメータ・マップにアクセスします。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid "The other APIs have changed in the same manner: instead of `MethodCreator`, the `Consumer` accepts `*Generation` which provides access to the `BlockCreator` and the necessary variables."
msgstr "他のAPIも同じように変更されています。 `MethodCreator` の代わりに、 `Consumer` は `*Generation` を受け入れ、 `BlockCreator` と必要な変数へのアクセスを提供します。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"One might ask: why does the new API provide access to a `BlockCreator` and not to a `MethodCreator`, which clearly still exists in Gizmo 2?\n"
"And it would be a good question.\n"
"The answer, as it turns out, is efficiency.\n"
"The previous API that did provide access to a `MethodCreator` required generating a whole new method that would only host the user-generated code.\n"
"The new API that _doesn't_ provide access to a `MethodCreator` allows embedding the user-generated code into a method that contains other, ArC-generated code.\n"
"Thus, the number of methods in the generated classes is smaller and the generated code is more compact."
msgstr "なぜ新しいAPIは `BlockCreator` 、Gizmo 2にはまだ存在する `MethodCreator` 。それは良い質問です。その答えは、結局のところ、効率性です。 `MethodCreator` へのアクセスを提供する以前のAPIでは、ユーザーが生成したコードだけをホストする全く新しいメソッドを生成する必要がありました。 `MethodCreator` へのアクセスを提供 _しない_ 新しい API では、ユーザが生成したコードを他の ArC が生成したコードを含むメソッドに埋め込むことができます。従って、生成されるクラス内のメソッドの数は少なくなり、生成されるコードはよりコンパクトになります。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
msgid "Conclusion"
msgstr "まとめ"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"Gizmo 2 is an evolution (some might say _revolution_) of Gizmo 1, the simplified bytecode generation library used by all of Quarkus.\n"
"ArC is a heavy user of Gizmo and it just recently migrated to Gizmo 2.\n"
"There are some breaking changes that might affect Quarkus extensions (not applications)."
msgstr "Gizmo 2は、Quarkusで使用されている簡易バイトコード生成ライブラリであるGizmo 1の進化版（ _革命と_ 言う人もいるかもしれません）です。ArCはGizmoのヘビーユーザーであり、つい最近Gizmo 2に移行しました。Quarkusのエクステンション（アプリケーションではありません）に影響を与えるかもしれない、いくつかの変更点があります。"

#: _posts/2025-11-03-arc-migrates-to-gizmo2.adoc
#, fuzzy
msgid ""
"In this post, we reviewed the API breakages and showed a simple migration scenario.\n"
"Hopefully, your extensions are not affected, because they use the higher-level APIs, but if they are, you'll need to migrate as well.\n"
"Then, your extension will only be compatible with Quarkus 3.30 and above; it will stop working with previous versions.\n"
"Plan accordingly."
msgstr "この投稿では、APIの破損を確認し、簡単な移行シナリオを示しました。上位レベルのAPIを使用しているため、拡張機能が影響を受けないことを祈りますが、影響を受ける場合は、同様に移行する必要があります。その場合、拡張機能の互換性はQuarkus 3.30以降のみとなり、以前のバージョンでは動作しなくなります。それに合わせて計画を立ててください。"
