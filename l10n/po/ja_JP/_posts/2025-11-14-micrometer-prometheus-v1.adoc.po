msgid ""
msgstr ""
"Language: ja_JP\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: jekyll-l10n\n"

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Quarkus Micrometer using Prometheus client v1"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Micrometer has moved to use the Prometheus client v1. This post explains the migration path and required changes for applications."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid ""
"Micrometer adopted Prometheus Client v1.x starting with version 1.13. However, Quarkus still uses Prometheus Client v0.x by default through the `quarkus-micrometer-registry-prometheus` extension which has been using the legacy `io.prometheus:simpleclient`.\n"
"This is now considered *deprecated* and will not be part of the future Quarkus 4.x version (still no timeline)."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "In parallel, we have introduced a new extension in Quarkiverse: https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[`quarkus-micrometer-registry-prometheus-v1`], which integrates the new v1.x client."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Since the new client introduces *breaking changes*, we’ve prepared a migration plan designed to reduce the impact on existing users."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid ""
"Some of the changes affect the names of some metrics. This requires queries and dashboards to be updated in order to continue working.\n"
"Users should evaluate the impacts for their projects before moving to the new `quarkus-micrometer-registry-prometheus-v1` extension."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The old and the new extension should not be used at the same time as the both require the `/q/metrics` endpoint."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Migrating to the new extension"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Users can keep current extension as is until Quarkus 4.0 allowing them to migrate at a time of their choice."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "We are introducing the new extension https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[`quarkus-micrometer-registry-prometheus-v1`] and users can start migrating their projects to it right now."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "For Quarkus 4.0 we will introduce the following changes:"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The deprecated `quarkus-micrometer-registry-prometheus` extension will be moved from Quarkus core repo to Quarkiverse, allowing an additional migration period."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The new https://docs.quarkiverse.io/quarkus-micrometer-registry/dev/micrometer-registry-prometheus-v1.html[`quarkus-micrometer-registry-prometheus-v1`] extension will be moved from Quarkiverse to Quarkus core repo, making it the default registry."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Breaking changes"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "As mentioned above, the new extension comes with a set of breaking changes."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Prometheus client v1"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The `quarkus-micrometer-registry-prometheus-v1` extension will be using the Prometheus Client v1.x and includes *breaking changes* expressed in detail on the https://github.com/micrometer-metrics/micrometer/wiki/1.13-Migration-Guide[Micrometer 1.13 Migration Guide], featuring package, API and semantic convention changes."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "These are the main points to consider when migrating to the new Quarkus extension:"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Counters now use Longs instead of Doubles."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Before: `\"registry=\\\"prometheus\\\",status=\\\"200\\\",uri=\\\"/example/prime/{number}\\\"} 2.0`"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Now: `\"registry=\\\"prometheus\\\",status=\\\"200\\\",uri=\\\"/example/prime/{number}\\\"} 2`"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "`io.micrometer.prometheusmetrics.PrometheusMeterRegistry` must be used instead of the old `io.micrometer.prometheus.PrometheusMeterRegistry`."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "`io.prometheus.metrics.tracer.common.SpanContext` must be used instead of the old `io.prometheus.client.exemplars.ExemplarSampler`"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The new Prometheus client uses some reserved words that must not be used to name metrics, therefore some metrics were renamed. Some examples of reserved words and renamed metrics:"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "`info`. Before: `jvm_info_total`. Now: `jvm_total`"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "`duration`. Before: `http_server_requests_duration_seconds`. Now: `http_server_requests_seconds`"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Some metrics would display Tags ending in a comma (`,`). This tailing comma has now been removed. Example: `hibernate_flushes_total{entityManagerFactory=\\\"<default>\\\",env=\\\"test\\\",env2=\\\"test\\\",registry=\\\"prometheus\\\",} 1.0`"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "It is no longer possible to create a metric generating Service Level Objectives and Percentiles at the same time."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Change when registering metrics:"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Metrics must be registered always with the same tags. Micrometer will now send a warning if we register the same metric more than once with different Tag names."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Implementation changes"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Quarkus automatic instrumentation will generate metrics reflecting these changes. If your application defines custom metrics, be sure to update their creation, associated tests, and any dashboard queries to align with the guidelines above."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "About metrics in Quarkus"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The https://quarkus.io/guides/telemetry-micrometer[Micrometer extension] is the recommended approach to generate metrics in Quarkus and this a rare occasions were breaking changes are being introduced."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Micrometer has become the default metrics framework in Quarkus due to its stability, maturity, and widespread adoption on the Java ecosystem — not https://quarkus.io/guides/opentelemetry-metrics[OpenTelemetry Metrics]."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Micrometer integration in Quarkus is provided through the core quarkus-micrometer` extension. Specific registry extensions depend on this core extension and implement their own registries to export telemetry data. The Prometheus registry (`quarkus-micrometer-registry-prometheus`) is the default and most commonly used, and it is the focus of this announcement."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "However, there are alternative ways to export metrics using Micrometer:"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Through the https://github.com/quarkiverse/quarkus-micrometer-registry/[Quarkiverse Micrometer registries]"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Via OpenTelemetry, using a bridge provided by the https://quarkus.io/guides/telemetry-micrometer-to-opentelemetry[Micrometer and OpenTelemetry] extension. This setup allows Micrometer metrics to be sent as OpenTelemetry metrics, offering a unified output via the https://opentelemetry.io/docs/specs/otlp/[OpenTelemetry OTLP protocol]."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "For more details on Observability in Quarkus please visit https://quarkus.io/guides/observability[this guide]."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "Conclusion"
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "While the existing Prometheus registry remains available for the Quarkus 3.x lifecycle, it is now deprecated, and users are encouraged to begin migrating to the new extension because the old client extension will be removed on Quarkus 4.0 (no timeline at this moment)."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "This change introduces a number of breaking updates aligned with Micrometer 1.13 and Prometheus Client v1.x, affecting metric types, naming conventions, and APIs."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "To support users, a migration plan has been outlined to provide flexibility and minimize disruption."
msgstr ""

#: _posts/2025-11-14-micrometer-prometheus-v1.adoc
msgid "The prometheus client is not the only option to send out telemetry, there are alternative options such as the Quarkiverse registries or our OpenTelemetry bridge."
msgstr ""
