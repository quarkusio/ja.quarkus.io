msgid ""
msgstr ""
"Language: ja_JP\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: jekyll-l10n\n"

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Closing the Gap: Test Coverage for Quarkus Extensions"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "From now on, quarkus-jacoco can also be used to measure test coverage of Quarkus extensions."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"Test coverage is usually defined as a metric that measures the percentage of code executed by tests.\n"
"Some developers doubt its usefulness but I agree with https://martinfowler.com/bliki/TestCoverage.html[Martin Fowler's] opinion that _\"Test coverage is a useful tool for finding untested parts of a codebase\"_.\n"
"I don't think the resulting number itself is important.\n"
"After all, writing a test for a generated getter makes no sense at all.\n"
"However, if it's possible to identify poorly tested code in a hot path of your extension, then you can improve the test suite and spot bugs before the release, which always pays off.\n"
"Just as importantly, you can increase the ability to catch regressions."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"For a long time, there has been the `io.quarkus:quarkus-jacoco` extension that integrates the https://www.jacoco.org/jacoco/index.html[JaCoCo code coverage library].\n"
"Nevertheless, until recently, it was not possible to measure the coverage of runtime modules for an extension project.\n"
"In other words, it was possible to measure the coverage in your `@QuarkusTest`s but not in `QuarkusUnitTest`s, which typically constitute the majority of tests in extensions.\n"
"Without adequate coverage support, developers were flying blind, uncertain whether their bytecode enhancements and recording logic were being effectively tested."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Technical overview"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"JaCoCo instruments classes to record execution coverage data.\n"
"By default, the classes are instrumented on-the-fly by a Java agent.\n"
"However, in Quarkus we use https://www.jacoco.org/jacoco/trunk/doc/offline.html[offline instrumentation] to modify the bytecode of classes _during build_.\n"
"By default, all classes in all _application archives_ are instrumented.\n"
"An _application archive_ is an archive that provides components to the application.\n"
"It's indexed via Jandex, and extensions can analyze its content.\n"
"For example, Quarkus is analyzing the application archives during CDI bean discovery.\n"
"However, a runtime module of an extension is usually _not_ an application archive.\n"
"Therefore, the extension classes were never instrumented.\n"
"Until now.\n"
"In Quarkus 3.31.2, we introduced new configuration properties that specify the artifacts to be instrumented: `quarkus.jacoco.instrument-artifacts.\"dependency-name\".group-id` and `quarkus.jacoco.instrument-artifacts.\"dependency-name\".artifact-id`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Basic setup"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "If you want to measure the test coverage of the runtime module of an extension, specific JaCoCo configuration is needed in the deployment module:"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
#, fuzzy
msgid "This profile is activated with the `jacoco` property."
msgstr "このプロファイルは、 `jacoco` プロパティで有効になります。"

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Add the `quarkus-jacoco-deployment` dependency with the test scope."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Instruct the JaCoCo plugin to instrument the `io.quarkus:quarkus-runtime-module-name`` artifact."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "By default, the JaCoCo data will be saved in the `target/jacoco-quarkus.exec` file and a coverage report is generated automatically in the `target/jacoco-report` directory."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Multi-module setup"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"For multi-module projects, more config properties might be needed.\n"
"Typically, when an extension project contains multiple extensions that depend on each other, a more complex configuration is required.\n"
"In the following project we have two extensions submodules: `foo` and `bar`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"/my-extension-project\n"
"   ├── /foo\n"
"   │  ├── runtime\n"
"   │  ├── deployment\n"
"   │  └── pom.xml\n"
"   ├── /bar (depends on foo)\n"
"   │  ├── runtime\n"
"   │  ├── deployment\n"
"   │  └── pom.xml\n"
"   └── pom.xml"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"Submodule `bar` depends on `foo` and extends its functionality.\n"
"The `foo/deployment` submodule contains `QuarkusUnitTest`s that test classes from `foo/runtime`.\n"
"The `bar/deployment` submodule contains `QuarkusUnitTest`s that test classes from both `bar/runtime` and `foo/runtime`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"Our goal is to measure the coverage for both `foo/runtime` and `bar/runtime`.\n"
"How do we proceed?\n"
"First, we need to apply some configuration to the parent project."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "`my-extension-project/pom.xml`"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "The shared JaCoCo data file will be: `my-extension-project/target/jacoco.exec`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "The shared JaCoCo data will be reused for all tests."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "The generated coverage report will be in the `my-extension-project/target/coverage` directory."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "The report data (source directories and class files) are aggregated so that a single report can be generated."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Afterwards, we will modify the deployment modules of `foo` and `bar`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "`my-extension-project/bar/pom.xml`"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Instrument `org.acme:foo` when running tests in `bar/deployment`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Instrument `org.acme:bar` when running tests in `bar/deployment`."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"Similarly, we can modify the `my-extension-project/foo/pom.xml` and then simply run `mvn clean test -Djacoco`.\n"
"When the build is finished, we can analyze the code coverage reports in the `my-extension-project/target/coverage` directory."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "The Quarkus JaCoCo config only works for tests that are annotated with `@QuarkusTest` and `@QuarkusUnitTest`. If you want to check the coverage of other tests as well then you will need to fall back to the JaCoCo maven plugin, see https://quarkus.io/guides/tests-with-coverage#coverage-for-tests-not-using-quarkustest[the docs] for more information."
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid "Conclusion"
msgstr ""

#: _posts/2026-02-10-quarkus-test-coverage-extensions.asciidoc
msgid ""
"Since Quarkus 3.31.2 you can measure and analyze the code coverage for the runtime modules of Quarkus extensions.\n"
"Improve the test suite, spot more bugs before the release, catch more regressions!"
msgstr ""
