<!DOCTYPE html>
<html lang="ja">







<head>
  <title>OpenID Connect (OIDC) と OAuth2 クライアントおよびフィルター - 3.27 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.27/guides/security-openid-connect-client-reference" />
  <meta property="og:title" content="OpenID Connect (OIDC) と OAuth2 クライアントおよびフィルター - 3.27" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/security-openid-connect-client-reference">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/3.27/guides/security-openid-connect-client-reference">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/performance" class="">パフォーマンス</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
          <li><a href="/versatility" class="">多用途性</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ドキュメント</a></li>
          <li><a href="/userstories/" class="">ユーザーストーリー</a></li>  
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">エクステンションを探す</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">エクステンションの使用</a></li>
          <li><a href="/guides/writing-extensions" class="">エクステンションの作成</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">エクステンションの共有</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/working-groups" class="">ワーキンググループ</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ロードマップ</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.27/guides/security-openid-connect-client-reference" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.27/guides/security-openid-connect-client-reference">ポルトガル（BR）</a></li>
          <li><a href="https://es.quarkus.io/version/3.27/guides/security-openid-connect-client-reference">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.27/guides/security-openid-connect-client-reference">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.27/guides/security-openid-connect-client-reference">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.27/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>バージョン:</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.28.4 - Latest</option>
        
        
        
        <option value="3.27" selected>3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">OpenID Connect (OIDC) と OAuth2 クライアントおよびフィルター </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus エクステンションは、トークンの取得、更新、伝播を対象に、OpenID Connect および OAuth 2.0 アクセストークンの管理に使用できます。</p>
</div>
<div class="paragraph">
<p>これには、以下が含まれます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>quarkus-oidc-client</code> および、 <code>quarkus-rest-client-oidc-filter</code> 、 <code>quarkus-resteasy-client-oidc-filter</code> エクステンションを使用して、OpenID Connect や <a href="https://www.keycloak.org">Keycloak</a> などの OAuth 2.0 準拠の認可サーバーからアクセストークンを取得し、更新する。</p>
</li>
<li>
<p><code>quarkus-rest-client-oidc-token-propagation</code> と <code>quarkus-resteasy-client-oidc-token-propagation</code> のエクステンションを使用して、現在の <code>Bearer</code> または <code>Authorization Code Flow</code> アクセストークンを伝播する。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>これらのエクステンションで管理されているアクセストークンをHTTP Authorization Bearerトークンとして使用して、リモートサービスにアクセスすることができます。</p>
</div>
<div class="paragraph">
<p><a href="security-openid-connect-client">OpenID Connect Clientとトークン伝搬クイックスタート</a> も参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oidcclient"><a class="anchor" href="#oidcclient"></a>OidcClient</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次の依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-oidc-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>quarkus-oidc-client</code> エクステンションは、SmallRye Mutiny <code>Uni</code> および <code>Vert.xWebClient</code> を使用してトークンを取得および更新するために使用できるリアクティブな <code>io.quarkus.oidc.client.OidcClient</code> を提供します。</p>
</div>
<div class="paragraph">
<p><code>OidcClient</code> はビルド時に IDP トークンエンドポイント URL (自動検出または手動設定) で初期化され、このエンドポイントを使用して <code>client_credentials</code> や <code>password</code> などのトークングラントを使用してアクセストークンを取得し、 <code>refresh_token</code> グラントを使用してトークンを更新できます。</p>
</div>
<div class="sect2">
<h3 id="token-endpoint-configuration"><a class="anchor" href="#token-endpoint-configuration"></a>トークンのエンドポイント設定</h3>
<div class="paragraph">
<p>デフォルトでは、トークンのエンドポイントアドレスは、設定された <code>quarkus.oidc-client.auth-server-url</code> に <code>/.well-known/openid-configuration</code> パスを追加することによって検出されます。</p>
</div>
<div class="paragraph">
<p>たとえば、次の KeycloakURL を指定した場合:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus</code></pre>
</div>
</div>
<div class="paragraph">
<p>OidcClient` は、トークンのエンドポイント URL が <code><a href="http://localhost:8180/auth/realms/quarkus/protocol/openid-connect/tokens" class="bare">http://localhost:8180/auth/realms/quarkus/protocol/openid-connect/tokens</a></code> であることを検出します。</p>
</div>
<div class="paragraph">
<p>また、ディスカバリーエンドポイントが利用できない場合や、ディスカバリーエンドポイントのラウンドトリップを回避する場合は、ディスカバリーを無効にして、相対パス値でトークンエンドポイントアドレスを設定することもできます。例:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus
quarkus.oidc-client.discovery-enabled=false
# Token endpoint: http://localhost:8180/auth/realms/quarkus/protocol/openid-connect/tokens
quarkus.oidc-client.token-path=/protocol/openid-connect/tokens</code></pre>
</div>
</div>
<div class="paragraph">
<p>検出せずにトークンエンドポイント URL を設定するよりコンパクトな方法は、 <code>quarkus.oidc-client.token-path</code> を絶対 URL に設定することです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.token-path=http://localhost:8180/auth/realms/quarkus/protocol/openid-connect/tokens</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、 <code>quarkus.oidc-client.auth-server-url</code> と <code>quarkus.oidc-client.discovery-enabled</code> の設定は必要ありません。</p>
</div>
</div>
<div class="sect2">
<h3 id="supported-token-grants"><a class="anchor" href="#supported-token-grants"></a>サポートされるトークングラント</h3>
<div class="paragraph">
<p><code>OidcClient</code> がトークンを取得するために使用できる主なトークングラントは、 <code>client_credentials</code> (デフォルト) と <code>password</code> グラントです。</p>
</div>
<div class="sect3">
<h4 id="client-credentials-grant"><a class="anchor" href="#client-credentials-grant"></a>クライアントクレデンシャル・グラント</h4>
<div class="paragraph">
<p><code>OidcClient</code> が <code>client_credentials</code> グラントを使用するように設定する方法は以下の通りです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>client_credentials</code> グラントでは、 <code>quarkus.oidc-client.grant-options.client.&lt;param-name&gt;=&lt;value&gt;</code> を使用してトークンリクエストの追加パラメーターを設定できます。ここでは、 <code>audience</code> パラメーターを使用して、トークンの受信者を設定する方法を説明します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
# 'client' is a shortcut for `client_credentials`
quarkus.oidc-client.grant.type=client
quarkus.oidc-client.grant-options.client.audience=https://example.com/api</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="password-grant"><a class="anchor" href="#password-grant"></a>パスワード・グラント</h4>
<div class="paragraph">
<p><code>OidcClient</code> が <code>password</code> グラントを使用するように設定する方法は以下の通りです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=password
quarkus.oidc-client.grant-options.password.username=alice
quarkus.oidc-client.grant-options.password.password=alice</code></pre>
</div>
</div>
<div class="paragraph">
<p>さらに、 <code>quarkus.oidc-client.grant-options.password</code> という設定プレフィックスを使用して、クライアント認証のグラントをカスタマイズする方法と同様に、カスタマイズすることが可能です。</p>
</div>
</div>
<div class="sect3">
<h4 id="other-grants"><a class="anchor" href="#other-grants"></a>その他のグラント</h4>
<div class="paragraph">
<p><code>OidcClient</code> は設定にはない特別な入力パラメーターを必要とするグラントを使用して、トークンの取得を支援することもできます。これらのグラントとは、 <code>refresh_token</code> （外部リフレッシュトークン付き）、 <code>authorization_code</code> 、および現在のアクセストークンを交換するために使用できる 2 つのグラント <code>urn:ietf:params:oauth:grant-type:token-exchange</code> および `urn:ietf:params:oauth:grant-type:jwt-bearer`です。</p>
</div>
<div class="paragraph">
<p>アクセストークンを取得する必要があり、既存のリフレッシュトークンを現在の Quarkus エンドポイントに POST している場合は、 <code>refresh_token</code> グラントを使用する必要があります。このグラントでは、帯域外のリフレッシュトークンを使用して新しいトークンセットを取得します。
この場合、 <code>OidcClient</code> を次のように設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=refresh</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に、 <code>OidcClient.refreshTokens</code> メソッドと提供されたリフレッシュトークンを使用して、アクセストークンを取得できます。</p>
</div>
<div class="paragraph">
<p>複雑なマイクロサービスアプリケーションを構築していて、同じ <code>Bearer</code> トークンが複数のサービスに伝播されて使用されるのを避ける場合は、 <code>urn:ietf:params:oauth:grant-type:token-exchange</code> または <code>urn:ietf:params:oauth:grant-type:jwt-bearer</code> グラントの使用が必要になる場合があります。詳細は、<a href="#token-propagation-rest">Token Propagation for Quarkus REST</a> と<a href="#token-propagation-resteasy">Token Propagation for RESTEasy Classic</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>何らかの理由で <a href="security-oidc-code-flow-authentication">Quarkus OIDC エクステンション</a> を使用して認可コードフローをサポートできない場合、 <code>OidcClient</code> を使用して <code>authorization code</code> グラントをサポートすることが必要になる場合があります。認可コードフローを実装する正当な理由がある場合は、 <code>OidcClient</code> を次のように設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=code</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に、 <code>OidcClient.accessTokens</code> メソッドで追加プロパティーの Map を受け取り、現在の <code>code</code> と <code>redirect_uri</code> パラメーターを渡して認可コードとトークンを交換することが可能です。</p>
</div>
<div class="paragraph">
<p><code>OidcClient</code> は <code>urn:openid:params:grant-type:ciba</code> グラントもサポートします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=ciba</code></pre>
</div>
</div>
<div class="paragraph">
<p>さらに、 <code>OidcClient.accessTokens</code> メソッドを使用して追加プロパティーの Map を受け入れ、 <code>auth_req_id</code> パラメーターを渡してトークン認可コードを交換できます。</p>
</div>
</div>
<div class="sect3">
<h4 id="grant-scopes"><a class="anchor" href="#grant-scopes"></a>スコープのグラント</h4>
<div class="paragraph">
<p>スコープの特定のセットが発行されたアクセストークンに関連付けられるように要求する必要がある場合があります。専用の  <code>quarkus.oidc-client.scopes</code> リストプロパティーを使用してください (例: <code>quarkus.oidc-client.scopes=email,phone</code>)。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-oidc-client-directly"><a class="anchor" href="#use-oidc-client-directly"></a>OidcClient を直接使用する</h3>
<div class="paragraph">
<p><code>OidcClient</code> を直接使用してアクセストークンを取得して HTTP <code>Authorization</code> ヘッダーに <code>Bearer</code> スキーム値として設定できます。</p>
</div>
<div class="paragraph">
<p>たとえば、Quarkus エンドポイントがユーザー名を返すマイクロサービスにアクセスする必要があるとします。
まず、REST クライアントを作成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.security.openid.connect.client;

import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;

import io.smallrye.mutiny.Uni;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.HeaderParam;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;

@RegisterRestClient
@Path("/")
public interface RestClientWithTokenHeaderParam {

    @GET
    @Produces("text/plain")
    @Path("userName")
    Uni&lt;String&gt; getUserName(@HeaderParam("Authorization") String authorization);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に、 <code>OidcClient</code> を使用してトークンを取得し、伝播します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.security.openid.connect.client;

import org.eclipse.microprofile.rest.client.inject.RestClient;

import io.quarkus.oidc.client.runtime.TokensHelper;
import io.quarkus.oidc.client.OidcClient;

import io.smallrye.mutiny.Uni;
import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;

@Path("/service")
public class OidcClientResource {

    @Inject
    OidcClient client;
    TokensHelper tokenHelper = new TokensHelper(); <i class="conum" data-value="1"></i><b>(1)</b>

    @Inject
    @RestClient
    RestClientWithTokenHeaderParam restClient;

    @GET
    @Path("user-name")
    @Produces("text/plain")
    public Uni&lt;String&gt; getUserName() {
    	return tokenHelper.getTokens(client).onItem()
        		.transformToUni(tokens -&gt; restClient.getUserName("Bearer " + tokens.getAccessToken()));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>io.quarkus.oidc.client.runtime.TokensHelper</code> は、アクセストークンの取得と更新を管理します。</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="inject-tokens"><a class="anchor" href="#inject-tokens"></a>トークンの注入</h3>
<div class="paragraph">
<p>内部で <code>OidcClient</code> を使用する <code>Tokens</code> を注入できます。 <code>Tokens</code> はアクセストークンを取得し、必要に応じて更新するために使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import io.quarkus.oidc.client.Tokens;

@Path("/service")
public class OidcClientResource {

    @Inject Tokens tokens;

    @GET
    public String getResponse() {
        //  Get the access token, which might have been refreshed.
        String accessToken = tokens.getAccessToken();
        // Use the access token to configure MP RestClient Authorization header/etc
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-oidc-clients"><a class="anchor" href="#use-oidc-clients"></a>OidcClientsの使用</h3>
<div class="paragraph">
<p><code>io.quarkus.oidc.client.OidcClients</code> は、 <code>OidcClient</code>s のコンテナーです。デフォルトの <code>OidcClient</code> と名前付きクライアントを含み、以下のように設定することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.client-enabled=false

quarkus.oidc-client.jwt-secret.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.jwt-secret.client-id=quarkus-app
quarkus.oidc-client.jwt-secret.credentials.jwt.secret=AyM1SysPpbyDfgZld3umj1qzKObwVMkoqQ-EstJQLr_T-1qS0gZH75aKtMN3Yj0iPS4hcgUuTwjAzZr1Z9CAow</code></pre>
</div>
</div>
<div class="paragraph">
<p>この場合、デフォルトのクライアントは <code>client-enabled=false</code> プロパティーで無効になっています。 <code>jwt-secret</code> クライアントは以下のようにアクセスできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RestClient;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import io.smallrye.mutiny.Uni;
import io.quarkus.oidc.client.OidcClient;
import io.quarkus.oidc.client.OidcClients;
import io.quarkus.oidc.client.runtime.TokensHelper;

@Path("/clients")
public class OidcClientResource {

    @Inject
    OidcClients clients;
    TokensHelper tokenHelper = new TokensHelper();

    @Inject
    @RestClient
    RestClientWithTokenHeaderParam restClient; <i class="conum" data-value="1"></i><b>(1)</b>

    @GET
    @Path("user-name")
    @Produces("text/plain")
    public Uni&lt;String&gt; getUserName() {
    	OidcClient client = clients.getClient("jwt-secret");
    	return tokenHelper.getTokens(client).onItem()
        		.transformToUni(tokens -&gt; restClient.getUserName("Bearer " + tokens.getAccessToken()));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="#use-oidc-client-directly">OidcClient を直接使用する</a> セクションの <code>RestClientWithTokenHeaderParam</code> 宣言を参照してください。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="security-openid-connect-multitenancy">OIDCマルチテナンシー</a> も使用し、各 OIDC テナントに独自の関連付けられた <code>OidcClient</code> がある場合は、Vert.x <code>RoutingContext</code> <code>tenant-id</code> 属性を使用できます。次に例を示します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import io.quarkus.oidc.client.OidcClient;
import io.quarkus.oidc.client.OidcClients;
import io.vertx.ext.web.RoutingContext;

@Path("/clients")
public class OidcClientResource {

    @Inject
    OidcClients clients;
    @Inject
    RoutingContext context;

    @GET
    public String getResponse() {
        String tenantId = context.get("tenant-id");
        // named OIDC tenant and client configurations use the same key:
        OidcClient client = clients.getClient(tenantId);
        //Use this client to get the token
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>プログラムで新しい <code>OidcClient</code> を作成することもできます。たとえば、起動時に作成する必要があるとします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.security.openid.connect.client;

import java.util.Map;

import org.eclipse.microprofile.config.inject.ConfigProperty;

import io.quarkus.oidc.client.OidcClient;
import io.quarkus.oidc.client.runtime.OidcClientConfig;
import io.quarkus.oidc.client.runtime.OidcClientConfig.Grant.Type;
import io.quarkus.oidc.client.OidcClients;
import io.quarkus.runtime.StartupEvent;
import io.smallrye.mutiny.Uni;
import jakarta.enterprise.context.ApplicationScoped;
import jakarta.enterprise.event.Observes;
import jakarta.inject.Inject;

@ApplicationScoped
public class OidcClientCreator {

    @Inject
    OidcClients oidcClients;
    @ConfigProperty(name = "quarkus.oidc.auth-server-url")
    String oidcProviderAddress;

    private volatile OidcClient oidcClient;

    public void startup(@Observes StartupEvent event) {
    	createOidcClient().subscribe().with(client -&gt; {oidcClient = client;});
    }

    public OidcClient getOidcClient() {
        return oidcClient;
    }

    private Uni&lt;OidcClient&gt; createOidcClient() {
        OidcClientConfig cfg = OidcClientConfig
            .authServerUrl(oidcProviderAddress)
            .id("myclient")
            .clientId("backend-service")
            .credentials("secret")
            .grant(Type.PASSWORD)
            .grantOptions("password", Map.of("username", "alice", "password", "alice"))
            .build();
        return oidcClients.newClient(cfg);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このクライアントは次のように使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RestClient;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import io.smallrye.mutiny.Uni;
import io.quarkus.oidc.client.runtime.TokensHelper;

@Path("/clients")
public class OidcClientResource {

    @Inject
    OidcClientCreator oidcClientCreator;
    TokensHelper tokenHelper = new TokensHelper();

    @Inject
    @RestClient
    RestClientWithTokenHeaderParam restClient; <i class="conum" data-value="1"></i><b>(1)</b>

    @GET
    @Path("user-name")
    @Produces("text/plain")
    public Uni&lt;String&gt; getUserName() {
    	return tokenHelper.getTokens(oidcClientCreator.getOidcClient()).onItem()
        		.transformToUni(tokens -&gt; restClient.getUserName("Bearer " + tokens.getAccessToken()));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="#use-oidc-client-directly">OidcClient を直接使用する</a> セクションの <code>RestClientWithTokenHeaderParam</code> 宣言を参照してください。</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="named-oidc-clients"><a class="anchor" href="#named-oidc-clients"></a>名前の付いた OidcClient とトークンの注入</h3>
<div class="paragraph">
<p>複数の <code>OidcClient</code> オブジェクトが設定されている場合、 <code>OidcClients</code> を使用する代わりに、追加の修飾子 <code>@NamedOidcClient</code> で <code>OidcClient</code> の注入ターゲットを指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.security.openid.connect.client;

import org.eclipse.microprofile.rest.client.inject.RestClient;
import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import io.smallrye.mutiny.Uni;
import io.quarkus.oidc.client.NamedOidcClient;
import io.quarkus.oidc.client.OidcClient;
import io.quarkus.oidc.client.runtime.TokensHelper;

@Path("/clients")
public class OidcClientResource {

    @Inject
    @NamedOidcClient("jwt-secret")
    OidcClient client;

    TokensHelper tokenHelper = new TokensHelper();

    @Inject
    @RestClient
    RestClientWithTokenHeaderParam restClient; <i class="conum" data-value="1"></i><b>(1)</b>

    @GET
    @Path("user-name")
    @Produces("text/plain")
    public Uni&lt;String&gt; getUserName() {
    	return tokenHelper.getTokens(client).onItem()
        		.transformToUni(tokens -&gt; restClient.getUserName("Bearer " + tokens.getAccessToken()));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="#use-oidc-client-directly">OidcClient を直接使用する</a> セクションの <code>RestClientWithTokenHeaderParam</code> 宣言を参照してください。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>同じ修飾子を使用して、 <code>Tokens</code> インジェクションに使用される <code>OidcClient</code> を指定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.io.IOException;

import jakarta.annotation.Priority;
import jakarta.enterprise.context.RequestScoped;
import jakarta.inject.Inject;
import jakarta.ws.rs.Priorities;
import jakarta.ws.rs.client.ClientRequestContext;
import jakarta.ws.rs.client.ClientRequestFilter;
import jakarta.ws.rs.core.HttpHeaders;
import jakarta.ws.rs.ext.Provider;

import io.quarkus.oidc.client.NamedOidcClient;
import io.quarkus.oidc.client.Tokens;

@Provider
@Priority(Priorities.AUTHENTICATION)
@RequestScoped
public class OidcClientRequestCustomFilter implements ClientRequestFilter {

    @Inject
    @NamedOidcClient("jwt-secret")
    Tokens tokens;

    @Override
    public void filter(ClientRequestContext requestContext) throws IOException {
        requestContext.getHeaders().add(HttpHeaders.AUTHORIZATION, "Bearer " + tokens.getAccessToken());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rest-client-oidc-filter"><a class="anchor" href="#rest-client-oidc-filter"></a>RestClient の Reactive ClientFilter で OidcClient を使用する</h3>
<div class="paragraph">
<p>以下の Maven 依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-rest-client-oidc-filter&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>io.quarkus:quarkus-oidc-client</code> も追加されます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>quarkus-rest-client-oidc-filter</code> エクステンションは、 <code>io.quarkus.oidc.client.filter.OidcClientRequestReactiveFilter</code> を提供します。</p>
</div>
<div class="paragraph">
<p>これは、 <code>OidcClient</code> を使用してトークンにアクセスし、必要に応じて更新して HTTP <code>Authorization</code> <code>Bearer</code> スキーム値として設定する点で、 <code>OidcClientRequestFilter</code> (<a href="#resteasy-client-oidc-filter">Use OidcClient in MicroProfile RestClient client filter</a> 参照) と同様に機能します。相違点は、<a href="rest-client">Reactive RestClient</a> と連携し、トークンの取得および更新時に現在の IO スレッドをブロックしないノンブロッキングクライアントフィルターを実装します。</p>
</div>
<div class="paragraph">
<p>IOスレッドのブロックを避けるために、 <code>OidcClientRequestReactiveFilter</code> は実行されるまで最初のトークン取得を遅らせます。</p>
</div>
<div class="paragraph">
<p><code>io.quarkus.oidc.client.reactive.filter.OidcClientFilter</code> または <code>org.eclipse.microprofile.rest.client.annotation.RegisterProvider</code> アノテーションを使用して、 <code>OidcClientRequestReactiveFilter</code> を選択的に登録できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.client.filter.OidcClientFilter;
import io.smallrye.mutiny.Uni;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@OidcClientFilter
@Path("/")
public interface ProtectedResourceService {

    @GET
    Uni&lt;String&gt; getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.annotation.RegisterProvider;
import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.client.reactive.filter.OidcClientRequestReactiveFilter;
import io.smallrye.mutiny.Uni;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@RegisterProvider(OidcClientRequestReactiveFilter.class)
@Path("/")
public interface ProtectedResourceService {

    @GET
    Uni&lt;String&gt; getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>OidcClientRequestReactiveFilter</code> は、デフォルトの <code>OidcClient</code> を使用します。名前付きの <code>OidcClient</code> は、 <code>quarkus.rest-client-oidc-filter.client-name</code> 設定プロパティーで選択できます。
<code>@OidcClientFilter</code> アノテーションの <code>value</code> 属性を設定して <code>OidcClient</code> を選択することもできます。アノテーションを使用して設定されたクライアント名は、 <code>quarkus.rest-client-oidc-filter.client-name</code> 設定プロパティーよりも優先されます。
たとえば、<a href="#use-oidc-clients">この</a> <code>jwt-secret</code> という名前の OIDC クライアント宣言では、このクライアントを次のように参照できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.client.filter.OidcClientFilter;
import io.smallrye.mutiny.Uni;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@OidcClientFilter("jwt-secret")
@Path("/")
public interface ProtectedResourceService {

    @GET
    Uni&lt;String&gt; getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you also want to refresh the token every time the <code>ProtectedResourceService#getUserName</code> call results in a 401 Unauthorized error, use the <code>quarkus.rest-client-oidc-filter.refresh-on-unauthorized</code> configuration property like in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.rest-client-oidc-filter.refresh-on-unauthorized=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, if you only need to enable this feature for individual endpoints, create a custom filter like in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import io.quarkus.oidc.client.reactive.filter.runtime.AbstractOidcClientRequestReactiveFilter;
import jakarta.annotation.Priority;
import jakarta.ws.rs.Priorities;

@Priority(Priorities.AUTHENTICATION)
public class OidcClientRequestCustomFilter extends AbstractOidcClientRequestReactiveFilter {

    @Override
    protected boolean refreshOnUnauthorized() {
        return true;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resteasy-client-oidc-filter"><a class="anchor" href="#resteasy-client-oidc-filter"></a>RestClient の ClientFilter で OidcClient を使用する</h3>
<div class="paragraph">
<p>以下の Maven 依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-resteasy-client-oidc-filter&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>io.quarkus:quarkus-oidc-client</code> も追加されます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>quarkus-resteasy-client-oidc-filter</code> エクステンションは、 <code>io.quarkus.oidc.client.filter.OidcClientRequestFilter</code> Jakarta REST ClientRequestFilter を提供し、 <code>OidcClient</code> を使用してアクセストークンを取得し、必要に応じて更新し、HTTP <code>Authorization Bearer</code> スキーム値として設定します。</p>
</div>
<div class="paragraph">
<p>デフォルトでは、このフィルタは初期化時に <code>OidcClient</code> を取得してアクセストークンとリフレッシュトークンの最初のペアを取得します。アクセストークンが短命でリフレッシュトークンが利用できない場合は、 <code>quarkus.oidc-client.early-tokens-acquisition=false</code> でトークンの取得を遅延させるべきです。</p>
</div>
<div class="paragraph">
<p><code>io.quarkus.oidc.client.filter.OidcClientFilter</code> または <code>org.eclipse.microprofile.rest.client.annotation.RegisterProvider</code> アノテーションを使用して <code>OidcClientRequestFilter</code> を選択的に登録することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.client.filter.OidcClientFilter;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@OidcClientFilter
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.annotation.RegisterProvider;
import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.client.filter.OidcClientRequestFilter;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@RegisterProvider(OidcClientRequestFilter.class)
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは、 <code>quarkus.resteasy-client-oidc-filter.register-filter=true</code> プロパティーが設定されている場合、すべての MP Rest または Jakarta REST クライアントで <code>OidcClientRequestFilter</code> を自動的に登録することもできます。</p>
</div>
<div class="paragraph">
<p><code>OidcClientRequestFilter</code> は、デフォルトの <code>OidcClient</code> を使用します。名前付きの <code>OidcClient</code> は、 <code>quarkus.resteasy-client-oidc-filter.client-name</code> 設定プロパティーで選択できます。
<code>@OidcClientFilter</code> アノテーションの <code>value</code> 属性を設定して <code>OidcClient</code> を選択することもできます。アノテーションを使用して設定されたクライアント名は、 <code>quarkus.resteasy-client-oidc-filter.client-name</code> 設定プロパティーよりも優先されます。
たとえば、<a href="#use-oidc-clients">this</a> <code>jwt-secret</code> という名前の OIDC クライアント宣言では、このクライアントを次のように参照できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.client.filter.OidcClientFilter;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@OidcClientFilter("jwt-secret")
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you also want to refresh the token every time the <code>ProtectedResourceService#getUserName</code> call results in a 401 Unauthorized error, use the <code>quarkus.resteasy-client-oidc-filter.refresh-on-unauthorized</code> configuration property like in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.resteasy-client-oidc-filter.refresh-on-unauthorized=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, if you only need to enable this feature for individual endpoints, create a custom filter like in the example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import io.quarkus.oidc.client.filter.runtime.AbstractOidcClientRequestFilter;
import jakarta.annotation.Priority;
import jakarta.ws.rs.Priorities;

@Priority(Priorities.AUTHENTICATION)
public class OidcClientRequestCustomFilter extends AbstractOidcClientRequestFilter {

    @Override
    protected boolean refreshOnUnauthorized() {
        return true;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-a-custom-restclient-clientfilter"><a class="anchor" href="#use-a-custom-restclient-clientfilter"></a>カスタムの RestClient ClientFilter を使用する</h3>
<div class="paragraph">
<p>ご希望の場合は、独自のカスタムフィルターを使用して、 <code>Tokens</code> を注入することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.io.IOException;
import jakarta.annotation.Priority;
import jakarta.inject.Inject;
import jakarta.ws.rs.Priorities;
import jakarta.ws.rs.client.ClientRequestContext;
import jakarta.ws.rs.client.ClientRequestFilter;
import jakarta.ws.rs.core.HttpHeaders;
import jakarta.ws.rs.ext.Provider;
import io.quarkus.oidc.client.Tokens;

@Provider
@Priority(Priorities.AUTHENTICATION)
public class OidcClientRequestCustomFilter implements ClientRequestFilter {

    @Inject
    Tokens tokens;

    @Override
    public void filter(ClientRequestContext requestContext) throws IOException {
        requestContext.getHeaders().add(HttpHeaders.AUTHORIZATION, "Bearer " + tokens.getAccessToken());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Tokens</code> プロデューサーがトークンを取得・更新し、カスタムフィルターが何時、どのようにトークンを使用するかを決定します。</p>
</div>
<div class="paragraph">
<p>名前付きの <code>Tokens</code> を挿入することもできます。<a href="#named-oidc-clients">Inject named OidcClient and Tokens</a> を参照してください。</p>
</div>
</div>
<div class="sect2">
<h3 id="refresh-access-tokens"><a class="anchor" href="#refresh-access-tokens"></a>アクセストークンを更新する</h3>
<div class="paragraph">
<p><code>OidcClientRequestReactiveFilter</code>、 <code>OidcClientRequestFilter</code>、および <code>Tokens</code> プロデューサーは、リフレッシュトークンが利用可能な場合、現在の期限切れのアクセストークンを更新します。
さらに、HTTP 401 エラーの原因となる可能性のある期限切れに近いアクセストークンの送信を回避するために、 <code>quarkus.oidc-client.refresh-token-time-skew</code> プロパティーを使用して事前にアクセストークンを更新できます。たとえば、このプロパティーが <code>3S</code> に設定されている場合、アクセストークンが 3 秒未満に失効し、このトークンは自動的に更新されます。</p>
</div>
<div class="paragraph">
<p>By default, OIDC client refreshes the token during the current request, when it detects that it has expired, or nearly expired if the <a href="#quarkus-oidc-client_quarkus-oidc-client-refresh-token-time-skew">refresh token time skew</a> is configured.
Performance critical applications may want to avoid having to wait for a possible token refresh during the incoming requests and configure an asynchronous token refresh instead, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.refresh-interval=1m <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Check every minute if the current access token is expired and must be refreshed.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>アクセストークンの更新が必要なのにリフレッシュトークンがない場合は、 <code>client_credentials</code> のように設定されたグラントを使って新しいトークンの取得を試みます。</p>
</div>
<div class="paragraph">
<p>OpenID Connect プロバイダーによっては、 <code>client_credentials</code> グラントレスポンスでリフレッシュトークンを返さないものがあることに注意してください。たとえば、Keycloak 12 以降では、 <code>client_credentials</code> に対してデフォルトでリフレッシュトークンが返されません。また、プロバイダーはリフレッシュトークンの使用回数を制限している場合があります。</p>
</div>
</div>
<div class="sect2">
<h3 id="revoke-access-tokens"><a class="anchor" href="#revoke-access-tokens"></a>アクセストークンを失効する</h3>
<div class="paragraph">
<p>Keycloak などの OpenId Connect プロバイダーがトークンの失効エンドポイントをサポートしている場合、 <code>OidcClient#revokeAccessToken</code> を使うことで現在のアクセストークンを失効させることができます。失効エンドポイントの URL は、トークン要求 URI と共に検出されるか、または <code>quarkus.oidc-client.revoke-path</code> で設定することができます。</p>
</div>
<div class="paragraph">
<p>このトークンを REST クライアントで使用すると HTTP <code>401</code> ステータスコードで失敗するか、アクセストークンがすでに長期間使用されていて更新する場合は、アクセストークンを取り消してください。</p>
</div>
<div class="paragraph">
<p>リフレッシュトークンを使用してトークンのリフレッシュを要求することができます。リフレッシュトークンが利用できない場合は、まずそれを失効させてから、新しいアクセストークンをリクエストすることで更新できます。</p>
</div>
</div>
<div class="sect2">
<h3 id="oidc-client-authentication"><a class="anchor" href="#oidc-client-authentication"></a>OidcClient 認証</h3>
<div class="paragraph">
<p><code>OidcClient</code> は、 <code>client_credentials</code> および他のグラントリクエストが成功するために OpenID Connect プロバイダーに対して認証する必要があります。 <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClientAuthentication">OIDC Client Authentication</a> オプションはすべてサポートされています。以下に例を示します。</p>
</div>
<div class="paragraph">
<p><code>client_secret_basic</code> .</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=mysecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.client-secret.value=mysecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>または、<a href="credentials-provider">クレデンシャルプロバイダー</a> から取得したシークレットを使用:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app

# This key is used to retrieve a secret from the map of credentials returned from CredentialsProvider
quarkus.oidc-client.credentials.client-secret.provider.key=mysecret-key
# This is the keyring provided to the CredentialsProvider when looking up the secret, set only if required by the CredentialsProvider implementation
quarkus.oidc.credentials.client-secret.provider.keyring-name=oidc
# Set it only if more than one CredentialsProvider can be registered
quarkus.oidc-client.credentials.client-secret.provider.name=oidc-credentials-provider</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>client_secret_post</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.client-secret.value=mysecret
quarkus.oidc-client.credentials.client-secret.method=post</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>client_secret_jwt</code>、署名アルゴリズムは <code>HS256</code> です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.jwt.secret=AyM1SysPpbyDfgZld3umj1qzKObwVMkoqQ-EstJQLr_T-1qS0gZH75aKtMN3Yj0iPS4hcgUuTwjAzZr1Z9CAow</code></pre>
</div>
</div>
<div class="paragraph">
<p>または <a href="credentials-provider">CredentialsProvider</a> から取得した秘密鍵で、署名アルゴリズムは <code>HS256</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app

# This is a key that will be used to retrieve a secret from the map of credentials returned from CredentialsProvider
quarkus.oidc-client.credentials.jwt.secret-provider.key=mysecret-key
# This is the keyring provided to the CredentialsProvider when looking up the secret, set only if required by the CredentialsProvider implementation
quarkus.oidc.credentials.client-secret.provider.keyring-name=oidc
# Set it only if more than one CredentialsProvider can be registered
quarkus.oidc-client.credentials.jwt.secret-provider.name=oidc-credentials-provider</code></pre>
</div>
</div>
<div class="paragraph">
<p>PEM キーが application.properties にインライン化され、署名アルゴリズムが <code>RS256</code> である `private_key_jwt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.jwt.key=Base64-encoded private key representation</code></pre>
</div>
</div>
<div class="paragraph">
<p>PEM キーファイルを使用した`private_key_jwt`、署名アルゴリズムは <code>RS256</code> です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.jwt.key-file=privateKey.pem</code></pre>
</div>
</div>
<div class="paragraph">
<p>キーストアファイルを使用した <code>private_key_jwt</code> 、署名アルゴリズムは <code>RS256</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.jwt.key-store-file=keystore.pkcs12
quarkus.oidc-client.credentials.jwt.key-store-password=mypassword
quarkus.oidc-client.credentials.jwt.key-password=mykeypassword

# Private key alias inside the keystore
quarkus.oidc-client.credentials.jwt.key-id=mykeyAlias</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>client_secret_jwt</code> または <code>private_key_jwt</code> 認証方法を使用することで、クライアントシークレットが漏れることはありません。</p>
</div>
<div class="sect3">
<h4 id="additional-jwt-authentication-options"><a class="anchor" href="#additional-jwt-authentication-options"></a>JWT認証の追加オプション</h4>
<div class="paragraph">
<p><code>client_secret_jwt</code> と <code>private_key_jwt</code> のいずれかの認証方法を使用する場合、JWT 署名アルゴリズム、鍵識別子、オーディエンス、サブジェクト、発行者などをカスタマイズすることが可能です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># private_key_jwt client authentication

quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus/
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.jwt.key-file=privateKey.pem

# This is a token key identifier 'kid' header - set it if your OpenID Connect provider requires it.
# Note that if the key is represented in a JSON Web Key (JWK) format with a `kid` property, then
# using 'quarkus.oidc-client.credentials.jwt.token-key-id' is unnecessary.
quarkus.oidc-client.credentials.jwt.token-key-id=mykey

# Use the RS512 signature algorithm instead of the default RS256
quarkus.oidc-client.credentials.jwt.signature-algorithm=RS512

# The token endpoint URL is the default audience value; use the base address URL instead:
quarkus.oidc-client.credentials.jwt.audience=${quarkus.oidc-client.auth-server-url}

# custom subject instead of the client ID:
quarkus.oidc-client.credentials.jwt.subject=custom-subject

# custom issuer instead of the client ID:
quarkus.oidc-client.credentials.jwt.issuer=custom-issuer</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jwt-bearer"><a class="anchor" href="#jwt-bearer"></a>JWT ベアラー</h4>
<div class="paragraph">
<p><a href="https://www.rfc-editor.org/rfc/rfc7523">RFC7523</a> では、JWT ベアラートークンを使用してクライアントを認証する方法について説明しています。詳細は、<a href="https://www.rfc-editor.org/rfc/rfc7523#section-2.2">クライアント認証での JWT の使用</a> セクションを参照してください。</p>
</div>
<div class="paragraph">
<p>有効にするには、以下を実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=${auth-server-url}
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.jwt.source=bearer</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に、JWT ベアラートークンを <code>client_assertion</code> パラメーターとして OIDC クライアントに提供する必要があります。</p>
</div>
<div class="paragraph">
<p>Quarkus はファイルシステムから JWT ベアラートークンを読み込むことができます。
たとえば、Kubernetes では、サービスアカウントトークンプロジェクションを <code>/var/run/secrets/tokens</code> パスにマウントできます。
次に、JWT ベアラートークンパスを次のように設定するだけです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.credentials.jwt.token-path=/var/run/secrets/tokens <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>JWT ベアラートークンへのパス。Quarkus はファイルシステムから新しいトークンをロードし、トークンの有効期限が切れると再ロードします。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>他のオプションとして、追加のグラントパラメーターを受け入れるトークンを取得または更新するには、 <code>OidcClient</code> メソッドを使用できます (例: <code>oidcClient.getTokens(Map.of("client_assertion", "ey&#8230;&#8203;"))</code>)。</p>
</div>
<div class="paragraph">
<p>OIDC クライアントフィルターを使用する場合は、このアサーションを提供するカスタムフィルターを登録する必要があります。</p>
</div>
<div class="paragraph">
<p>以下は、Quarkus REST (旧称 RESTEasy Reactive) カスタムフィルターの例です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import java.util.Map;

import io.quarkus.oidc.client.reactive.filter.runtime.AbstractOidcClientRequestReactiveFilter;
import io.quarkus.oidc.common.runtime.OidcConstants;
import jakarta.annotation.Priority;
import jakarta.ws.rs.Priorities;

@Priority(Priorities.AUTHENTICATION)
public class OidcClientRequestCustomFilter extends AbstractOidcClientRequestReactiveFilter {

    @Override
    protected Map&lt;String, String&gt; additionalParameters() {
        return Map.of(OidcConstants.CLIENT_ASSERTION, "ey...");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>以下は、RESTEasy Classic カスタムフィルターの例です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import java.util.Map;

import io.quarkus.oidc.client.filter.runtime.AbstractOidcClientRequestFilter;
import io.quarkus.oidc.common.runtime.OidcConstants;
import jakarta.annotation.Priority;
import jakarta.ws.rs.Priorities;

@Priority(Priorities.AUTHENTICATION)
public class OidcClientRequestCustomFilter extends AbstractOidcClientRequestFilter {

    @Override
    protected Map&lt;String, String&gt; additionalParameters() {
        return Map.of(OidcConstants.CLIENT_ASSERTION, "ey...");
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="apple-post-jwt"><a class="anchor" href="#apple-post-jwt"></a>Apple POST JWT</h4>
<div class="paragraph">
<p>Apple OpenID Connect プロバイダーは <code>client_secret_post</code> メソッドを使用します。ここで、シークレットは <code>private_key_jwt</code> 認証メソッドで生成された JWT ですが、Apple アカウント固有の発行者とサブジェクトプロパティーを使用します。</p>
</div>
<div class="paragraph">
<p><code>quarkus-oidc-client</code> は、以下のように設定できる標準外の <code>client_secret_post_jwt</code> 認証方法をサポートしています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=${apple.url}
quarkus.oidc-client.client-id=${apple.client-id}
quarkus.oidc-client.credentials.client-secret.method=post-jwt

quarkus.oidc-client.credentials.jwt.key-file=ecPrivateKey.pem
quarkus.oidc-client.credentials.jwt.signature-algorithm=ES256
quarkus.oidc-client.credentials.jwt.subject=${apple.subject}
quarkus.oidc-client.credentials.jwt.issuer=${apple.issuer}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="mutual-tls"><a class="anchor" href="#mutual-tls"></a>相互 TLS</h4>
<div class="paragraph">
<p>一部の OpenID Connect プロバイダーでは、相互 TLS (<code>mTLS</code>) 認証プロセスの一部としてクライアントを認証する必要がある場合があります。</p>
</div>
<div class="paragraph">
<p><code>quarkus-oidc-client</code> は、 <code>mTLS</code> をサポートするように次のように設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.tls.tls-configuration-name=oidc-client

# configure hostname verification if necessary
#quarkus.tls.oidc-client.hostname-verification-algorithm=NONE

# Keystore configuration
quarkus.tls.oidc-client.key-store.p12.path=client-keystore.p12
quarkus.tls.oidc-client.key-store.p12.password=${key-store-password}

# Add more keystore properties if needed:
#quarkus.tls.oidc-client.key-store.p12.alias=keyAlias
#quarkus.tls.oidc-client.key-store.p12.alias-password=keyAliasPassword

# Truststore configuration
quarkus.tls.oidc-client.trust-store.p12.path=client-truststore.p12
quarkus.tls.oidc-client.trust-store.p12.password=${trust-store-password}
# Add more truststore properties if needed:
#quarkus.tls.oidc-client.trust-store.p12.alias=certAlias</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oidc-client-spi"><a class="anchor" href="#oidc-client-spi"></a>OIDC クライアント SPI</h3>
<div class="paragraph">
<p>カスタムエクステンションが、OIDC クライアントでサポートされている OIDC トークングラントの 1 つを使用して OIDC トークンを取得する必要がある場合、このエクステンションは OIDC クライアント SPI のみに依存し、必要に応じて OIDC クライアント自体がアクセストークンを取得および更新できるようにします。</p>
</div>
<div class="paragraph">
<p>次の依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-oidc-client-spi&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に、必要に応じて <code>io.quarkus.oidc.client.spi.TokenProvider</code> CDI Bean を使用するようにエクステンションを更新します。次に例を示します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.extension;

import jakarta.inject.Inject;
import io.quarkus.oidc.client.spi.TokenProvider;

public class ExtensionOAuth2Support {

   @Inject
   TokenProvider tokenProvider;

   public Uni&lt;String&gt; getAccessToken() {
       return tokenProvider.getAccessToken();
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>現在、カスタムエクステンションが複数の名前付き OIDC クライアントを認識する可能性は低いため、 <code>io.quarkus.oidc.client.spi.TokenProvider</code> はデフォルトの OIDC クライアントでのみ使用できます。</p>
</div>
</div>
<div class="sect2">
<h3 id="integration-testing-oidc-client"><a class="anchor" href="#integration-testing-oidc-client"></a>テスト</h3>
<div class="paragraph">
<p>テストプロジェクトに以下の依存関係を追加することから始めます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.awaitility&lt;/groupId&gt;
    &lt;artifactId&gt;awaitility&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="oidc-client-ref-integration-testing-wiremock"><a class="anchor" href="#oidc-client-ref-integration-testing-wiremock"></a>Wiremock</h4>
<div class="paragraph">
<p>テストプロジェクトに以下の依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.wiremock&lt;/groupId&gt;
    &lt;artifactId&gt;wiremock&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
    &lt;version&gt;${wiremock.version}&lt;/version&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>適切なWiremockバージョンを使用してください。利用可能なすべてのバージョンは、 <a href="https://search.maven.org/artifact/org.wiremock/wiremock">こちら</a> をご覧ください。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以下のように、Wiremock ベースの <code>QuarkusTestResourceLifecycleManager</code> を記述します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import static com.github.tomakehurst.wiremock.client.WireMock.matching;
import static com.github.tomakehurst.wiremock.core.WireMockConfiguration.wireMockConfig;

import java.util.HashMap;
import java.util.Map;

import com.github.tomakehurst.wiremock.WireMockServer;
import com.github.tomakehurst.wiremock.client.WireMock;
import com.github.tomakehurst.wiremock.core.Options.ChunkedEncodingPolicy;

import io.quarkus.test.common.QuarkusTestResourceLifecycleManager;

public class KeycloakRealmResourceManager implements QuarkusTestResourceLifecycleManager {
    private WireMockServer server;

    @Override
    public Map&lt;String, String&gt; start() {

        server = new WireMockServer(wireMockConfig().dynamicPort().useChunkedTransferEncoding(ChunkedEncodingPolicy.NEVER));
        server.start();

        server.stubFor(WireMock.post("/tokens")
                .withRequestBody(matching("grant_type=password&amp;username=alice&amp;password=alice"))
                .willReturn(WireMock
                        .aResponse()
                        .withHeader("Content-Type", "application/json")
                        .withBody(
                                "{\"access_token\":\"access_token_1\", \"expires_in\":4, \"refresh_token\":\"refresh_token_1\"}")));
        server.stubFor(WireMock.post("/tokens")
                .withRequestBody(matching("grant_type=refresh_token&amp;refresh_token=refresh_token_1"))
                .willReturn(WireMock
                        .aResponse()
                        .withHeader("Content-Type", "application/json")
                        .withBody(
                                "{\"access_token\":\"access_token_2\", \"expires_in\":4, \"refresh_token\":\"refresh_token_1\"}")));


        Map&lt;String, String&gt; conf = new HashMap&lt;&gt;();
        conf.put("keycloak.url", server.baseUrl());
        return conf;
    }

    @Override
    public synchronized void stop() {
        if (server != null) {
            server.stop();
            server = null;
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>REST テストエンドポイントを用意します。注入された MP REST クライアントを登録された OidcClient フィルターで使用するテスト用フロントエンドエンドポイントが、トークンをエコーバックするダウンストリームエンドポイントを呼び出すことができます。例として、 <code>main</code> Quarkus リポジトリーの <code>integration-tests/oidc-client-wiremock</code> を参照してください。</p>
</div>
<div class="paragraph">
<p><code>application.properties</code> を次のように設定します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Use the 'keycloak.url' property set by the test KeycloakRealmResourceManager
quarkus.oidc-client.auth-server-url=${keycloak.url:replaced-by-test-resource}
quarkus.oidc-client.discovery-enabled=false
quarkus.oidc-client.token-path=/tokens
quarkus.oidc-client.client-id=quarkus-service-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=password
quarkus.oidc-client.grant-options.password.username=alice
quarkus.oidc-client.grant-options.password.password=alice</code></pre>
</div>
</div>
<div class="paragraph">
<p>そして最後にテストコードを書きます。上記の Wiremock ベースのリソースがある場合、最初のテスト起動では <code>access_token_1</code> アクセストークンが返されますが、このアクセストークンは 4 秒で期限切れになります。 <code>awaitility</code> を使用して約 5 秒間待つと、次のテスト起動時に <code>access_token_2</code> アクセストークンが返され、期限切れの <code>access_token_1</code> アクセストークンが更新されたことが確認できます。</p>
</div>
</div>
<div class="sect3">
<h4 id="keycloak"><a class="anchor" href="#keycloak"></a>Keycloak</h4>
<div class="paragraph">
<p>Keycloak を使用する場合は、<a href="security-oidc-bearer-token-authentication#bearer-token-integration-testing-keycloak">OpenID Connect ベアラートークンインテグレーションのテスト</a> の Keycloak セクションで説明されているのと同じアプローチを使用できます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-to-check-the-errors-in-the-logs"><a class="anchor" href="#how-to-check-the-errors-in-the-logs"></a>ログでエラーを確認する方法</h3>
<div class="paragraph">
<p>トークン取得および更新エラーの詳細を確認するには、 <code>io.quarkus.oidc.client.runtime.OidcClientImpl</code> の <code>TRACE</code> レベルのロギングを有効にしてください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.log.category."io.quarkus.oidc.client.runtime.OidcClientImpl".level=TRACE
quarkus.log.category."io.quarkus.oidc.client.runtime.OidcClientImpl".min-level=TRACE</code></pre>
</div>
</div>
<div class="paragraph">
<p>OidcClient の初期化エラーの詳細を確認するには、 <code>io.quarkus.oidc.client.runtime.OidcClientRecorder</code> の <code>TRACE</code> レベルのログを有効にしてください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.log.category."io.quarkus.oidc.client.runtime.OidcClientRecorder".level=TRACE
quarkus.log.category."io.quarkus.oidc.client.runtime.OidcClientRecorder".min-level=TRACE</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oidc-client-ref-oidc-request-filters"><a class="anchor" href="#oidc-client-ref-oidc-request-filters"></a>OIDCリクエストフィルター</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can filter OIDC requests made by OIDC client to the OIDC provider by registering one or more <code>OidcRequestFilter</code> implementations, which can update or add new request headers, customize or analyze the request body.</p>
</div>
<div class="paragraph">
<p>すべての OIDC プロバイダーエンドポイントへのリクエストをインターセプトする単一のフィルターを使用することも、 <code>@OidcEndpoint</code> アノテーションを使用してこのフィルターを特定のエンドポイントへのリクエストにのみ適用することもできます。例: </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import jakarta.enterprise.context.ApplicationScoped;

import io.quarkus.arc.Unremovable;
import io.quarkus.oidc.common.OidcEndpoint;
import io.quarkus.oidc.common.OidcRequestFilter;
import io.vertx.core.http.HttpMethod;

@ApplicationScoped
@OidcEndpoint(value = Type.TOKEN)
@Unremovable
public class OidcRequestCustomizer implements OidcRequestFilter {

    @Override
    public void filter(OidcRequestContext requestContext) {
        HttpMethod method = requestContext.request().method();
        String uri = requestContext.request().uri();
        if (method == HttpMethod.POST &amp;&amp; uri.endsWith("/token") &amp;&amp; requestContext.requestBody() != null) {
            requestContext.request().putHeader("Digest", calculateDigest(requestContext.requestBody().toString()));
        }
    }

    private String calculateDigest(String bodyString) {
        // Apply the required digest algorithm to the body string
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>OidcRequestContextProperties</code> を使用して、リクエストプロパティーにアクセスできます。
現在、 <code>client_id</code> キーを使用してクライアントテナント ID にアクセスし、 <code>grant_type</code> キーを使用して、OIDC クライアントがトークンの取得に使用するグラントタイプにアクセスできます。</p>
</div>
<div class="paragraph">
<p><code>OidcRequestFilter</code> can customize a request body by preparing an instance of <code>io.vertx.mutiny.core.buffer.Buffer</code>
and setting it on a request context, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import jakarta.enterprise.context.ApplicationScoped;

import io.quarkus.arc.Unremovable;
import io.quarkus.oidc.common.OidcEndpoint;
import io.quarkus.oidc.common.OidcEndpoint.Type;
import io.quarkus.oidc.common.OidcRequestContextProperties;
import io.quarkus.oidc.common.OidcRequestFilter;
import io.vertx.mutiny.core.buffer.Buffer;

@ApplicationScoped
@Unremovable
@OidcEndpoint(value = Type.TOKEN)
public class TokenRequestFilter implements OidcRequestFilter {

    @Override
    public void filter(OidcRequestContext rc) {
        // Add more required properties to the token request
        rc.requestBody(rc.requestBody().toString() + "&amp;opaque_token_param=opaque_token_value"));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oidc-client-ref-oidc-response-filters"><a class="anchor" href="#oidc-client-ref-oidc-response-filters"></a>OIDC レスポンスフィルター</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1 つ以上の <code>OidcResponseFilter</code> 実装を登録することで、OIDC クライアント要求への応答をフィルタリングできます。これにより、応答のステータス、ヘッダー、本文をチェックして、ログに記録したり、その他のアクションを実行したりできます。</p>
</div>
<div class="paragraph">
<p>すべての OIDC クライアント要求への応答をインターセプトする単一のフィルターを使用することも、 <code>@OidcEndpoint</code> アノテーションを使用して、このフィルターを特定の OIDC クライアント要求への応答にのみ適用することもできます。例: </p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import jakarta.enterprise.context.ApplicationScoped;

import org.jboss.logging.Logger;

import io.quarkus.arc.Unremovable;
import io.quarkus.oidc.common.OidcEndpoint;
import io.quarkus.oidc.common.OidcEndpoint.Type;
import io.quarkus.oidc.common.OidcResponseFilter;
import io.quarkus.oidc.common.runtime.OidcConstants;

@ApplicationScoped
@Unremovable
@OidcEndpoint(value = Type.TOKEN) <i class="conum" data-value="1"></i><b>(1)</b>
public class TokenEndpointResponseFilter implements OidcResponseFilter {
    private static final Logger LOG = Logger.getLogger(TokenEndpointResponseFilter.class);

    @Override
    public void filter(OidcResponseContext rc) {
        String contentType = rc.responseHeaders().get("Content-Type"); <i class="conum" data-value="2"></i><b>(2)</b>
        if (contentType.equals("application/json")
                &amp;&amp; "refresh_token".equals(rc.requestProperties().get(OidcConstants.GRANT_TYPE)) <i class="conum" data-value="3"></i><b>(3)</b>
                &amp;&amp; rc.responseBody().toJsonObject().containsKey("refresh_token")) { <i class="conum" data-value="4"></i><b>(4)</b>
            LOG.debug("Tokens have been refreshed");
        }
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>このフィルターを、OIDC トークンエンドポイントのみを対象とするリクエストに制限します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>レスポンスの <code>Content-Type</code> ヘッダーを確認します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>OidcRequestContextProperties</code> リクエストプロパティーを使用して、ヘッダーが <code>refresh_grant</code> トークングラント応答であることを確認します。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>応答 JSON に <code>refresh_token</code> プロパティーが含まれていることを確認します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>OidcResponseFilter</code> can customize a response body by preparing an instance of <code>io.vertx.mutiny.core.buffer.Buffer</code>
and setting it as a property on a response context, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package io.quarkus.it.keycloak;

import jakarta.enterprise.context.ApplicationScoped;

import io.quarkus.arc.Unremovable;
import io.quarkus.oidc.common.OidcEndpoint;
import io.quarkus.oidc.common.OidcEndpoint.Type;
import io.quarkus.oidc.common.OidcRequestContextProperties;
import io.quarkus.oidc.common.OidcResponseFilter;
import io.vertx.core.json.JsonObject;
import io.vertx.mutiny.core.buffer.Buffer;

@ApplicationScoped
@Unremovable
@OidcEndpoint(value = Type.TOKEN)
public class TokenResponseFilter implements OidcResponseFilter {

    @Override
    public void filter(OidcResponseContext rc) {
        JsonObject body = rc.responseBody().toJsonObject();
        // JSON `scope` property has multiple values separated by a comma character.
        // It must be replaced with a space character.
        String scope = body.getString("scope");
        body.put("scope", scope.replace(",", " "));
        rc.responseBody(Buffer.buffer(body.toString()));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="token-propagation-rest"><a class="anchor" href="#token-propagation-rest"></a>Quarkus REST のトークン伝播</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>quarkus-rest-client-oidc-token-propagation</code> エクステンションは、認証情報の伝播を簡素化する REST クライアントフィルター <code>io.quarkus.oidc.token.propagation.reactive.AccessTokenRequestReactiveFilter</code> を提供します。このクライアントは、現在アクティブなリクエストに存在する <a href="security-oidc-bearer-token-authentication">ベアラートークン</a>、または <a href="security-oidc-code-flow-authentication">認可コードフローメカニズム</a> から取得したトークンを、HTTP <code>Authorization</code> ヘッダーの <code>Bearer</code> スキーム値として伝播します。</p>
</div>
<div class="paragraph">
<p>例えば、 <code>io.quarkus.oidc.token.propagation.common.AccessToken</code> または <code>org.eclipse.microprofile.rest.client.annotation.RegisterProvider</code> のアノテーションを使用することで、 <code>AccessTokenRequestReactiveFilter</code> を選択的に登録することができます：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.token.propagation.common.AccessToken;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@AccessToken
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.annotation.RegisterProvider;
import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.token.propagation.reactive.AccessTokenRequestReactiveFilter;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@RegisterProvider(AccessTokenRequestReactiveFilter.class)
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>さらに、 <code>AccessTokenRequestReactiveFilter</code> 、トークンを伝播する前に交換する必要がある複雑なアプリケーションをサポートすることができます。</p>
</div>
<div class="paragraph">
<p><a href="https://www.keycloak.org/securing-apps/token-exchange">Keycloak</a> または another OIDC provider that supports a <a href="https://tools.ietf.org/html/rfc8693">Token Exchange</a> トークングラントをサポートする別の OIDC プロバイダーを使用する場合は、次のように <code>AccessTokenRequestReactiveFilter</code> を設定してトークンを交換できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=exchange
quarkus.oidc-client.grant-options.exchange.audience=quarkus-app-exchange

quarkus.rest-client-oidc-token-propagation.exchange-token=true <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>OidcClient 名が <code>io.quarkus.oidc.token.propagation.common.AccessToken#exchangeTokenClient</code> アノテーション属性で設定されている場合、 <code>exchange-token</code> 設定プロパティは無視されることに注意してください。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>AccessTokenRequestReactiveFilter</code> は <code>OidcClient</code> を使用して現在のトークンを交換します。 <code>quarkus.oidc-client.grant-options.exchange</code> を使用すると、OpenID Connect プロバイダーが要求する追加の交換プロパティーを設定できます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>Azure</code> のように、<a href="https://www.rfc-editor.org/rfc/rfc7523#section-2.1">JWTベアラートークングラント</a> を使用して現在のトークンを交換する <a href="https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow#example">必要がある</a> プロバイダーを使用する場合、 <code>AccessTokenRequestReactiveFilter</code> をトークンを交換するように設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=${azure.provider.url}
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret

quarkus.oidc-client.grant.type=jwt
quarkus.oidc-client.grant-options.jwt.requested_token_use=on_behalf_of
quarkus.oidc-client.scopes=https://graph.microsoft.com/user.read,offline_access

quarkus.resteasy-client-oidc-token-propagation.exchange-token=true</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>AccessTokenRequestReactiveFilter</code> はデフォルトでデフォルトの <code>OidcClient</code> を使用します。名前付き <code>OidcClient</code> は、 <code>quarkus.rest-client-oidc-token-propagation.client-name</code> 設定プロパティまたは <code>io.quarkus.oidc.token.propagation.common.AccessToken#exchangeTokenClient</code> アノテーション属性を使用して選択できます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="token-propagation-resteasy"><a class="anchor" href="#token-propagation-resteasy"></a>RESTEasy Classic のトークン伝播</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>quarkus-resteasy-client-oidc-token-propagation</code> エクステンションは、認証情報の伝播を簡素化する 2 つの Jakarta REST <code>jakarta.ws.rs.client.ClientRequestFilter</code> クラス実装を提供します。
<code>io.quarkus.oidc.token.propagation.AccessTokenRequestFilter</code> は、現在アクティブなリクエストに存在する <a href="security-oidc-bearer-token-authentication">Bearer token</a> または <a href="security-oidc-code-flow-authentication">Authorization code flow mechanism</a> から取得したトークンを、HTTP <code>Authorization</code> ヘッダーの <code>Bearer</code> スキーム値として伝播します。
<code>io.quarkus.oidc.token.propagation.JsonWebTokenRequestFilter</code> は同じ機能を提供しますが、さらに JWT トークンのサポートも提供します。</p>
</div>
<div class="paragraph">
<p>現在の認可コードフローアクセストークンを伝播する必要がある場合、即時トークン伝播が適切に機能します。これは、 (ID トークンではなく) コードフローアクセストークンが、現在認証されているユーザーに代わってリモートサービスにアクセスするために現在の Quarkus エンドポイントに伝播されるように想定されているためです。</p>
</div>
<div class="paragraph">
<p>ただし、エンドツーエンドのベアラートークンの直接的な伝播は避ける必要があります。たとえば、 <code>Client &#8594; Service A &#8594; Service B</code> の場合、 <code>Service B</code> は <code>Client</code> から <code>Service A</code> に送信されたトークンを受信します。このような場合、 <code>Service B</code> はトークンが <code>Service A</code> から送信されたのか、直接 <code>Client</code> から送信されたのかを区別できません。 <code>Service B</code> で、トークンの送信元が <code>Service A</code> であることを確認するには、新しい発行者とオーディエンスのクレームをアサートできる必要があります。</p>
</div>
<div class="paragraph">
<p>さらに、複雑なアプリケーションでは、トークンを伝搬する前に交換または更新する必要がある場合があります。たとえば、 <code>Service A</code> が <code>Service B</code> にアクセスするとき、アクセスコンテキストが異なる場合があります。この例では、 <code>Service B</code> にアクセスするために <code>Service A</code> に付与されるスコープは、範囲が狭いか、完全に異なる場合があります。</p>
</div>
<div class="paragraph">
<p>次のセクションでは、 <code>AccessTokenRequestFilter</code> および <code>JsonWebTokenRequestFilter</code> がどのように役立つかを示します。</p>
</div>
<div class="sect2">
<h3 id="restclient-accesstokenrequestfilter"><a class="anchor" href="#restclient-accesstokenrequestfilter"></a>RestClient AccessTokenRequestFilter</h3>
<div class="paragraph">
<p><code>AccessTokenRequestFilter</code> は、すべてのトークンをStringとして扱うため、JWTトークンと不透明なトークンの両方を扱うことができます。</p>
</div>
<div class="paragraph">
<p>例えば、 <code>io.quarkus.oidc.token.propagation.common.AccessToken</code> または <code>org.eclipse.microprofile.rest.client.annotation.RegisterProvider</code> のどちらかを使用することで、 <code>AccessTokenRequestFilter</code> を選択的に登録することができます：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.token.propagation.common.AccessToken;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@AccessToken
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.annotation.RegisterProvider;
import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.token.propagation.AccessTokenRequestFilter;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@RegisterProvider(AccessTokenRequestFilter.class)
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>または、 <code>quarkus.resteasy-client-oidc-token-propagation.register-filter</code> プロパティーが <code>true</code> に設定され、 <code>quarkus.resteasy-client-oidc-token-propagation.json-web-token</code> プロパティーが <code>false</code> (デフォルト値) に設定されている場合、 <code>AccessTokenRequestFilter</code> はすべての MP Rest または Jakarta REST クライアントに自動的に登録されます。</p>
</div>
<div class="sect3">
<h4 id="exchange-token-before-propagation"><a class="anchor" href="#exchange-token-before-propagation"></a>伝播前にトークンを交換する</h4>
<div class="paragraph">
<p>現在のアクセストークンを伝播前に交換する必要があり、<a href="https://www.keycloak.org/securing-apps/token-exchange">Keycloak</a> または <a href="https://tools.ietf.org/html/rfc8693">Token Exchange</a> トークングラントをサポートするその他の OpenID Connect プロバイダーを使用する場合は、 <code>AccessTokenRequestFilter</code> を次のように設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=http://localhost:8180/auth/realms/quarkus
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret
quarkus.oidc-client.grant.type=exchange
quarkus.oidc-client.grant-options.exchange.audience=quarkus-app-exchange

quarkus.resteasy-client-oidc-token-propagation.exchange-token=true</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Azure</code> のように、 <a href="https://www.rfc-editor.org/rfc/rfc7523#section-2.1">JWTベアラートークングラント</a> を使用して現在のトークンを交換する <a href="https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow#example">必要がある</a> プロバイダーを使用する場合、 <code>AccessTokenRequestFilter</code> のようにトークンを交換するように設定することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.oidc-client.auth-server-url=${azure.provider.url}
quarkus.oidc-client.client-id=quarkus-app
quarkus.oidc-client.credentials.secret=secret

quarkus.oidc-client.grant.type=jwt
quarkus.oidc-client.grant-options.jwt.requested_token_use=on_behalf_of
quarkus.oidc-client.scopes=https://graph.microsoft.com/user.read,offline_access

quarkus.resteasy-client-oidc-token-propagation.exchange-token=true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>AccessTokenRequestFilter</code> は <code>OidcClient</code> を使用して現在のトークンを交換します。 <code>quarkus.oidc-client.grant-options.exchange</code> を使用して、OpenID Connect プロバイダーが要求する追加の交換プロパティーを設定できます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>AccessTokenRequestFilter</code> はデフォルトで <code>OidcClient</code> を使用します。名前付きの <code>OidcClient</code> は <code>quarkus.resteasy-client-oidc-token-propagation.client-name</code> 設定プロパティーで選択できます。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="restclient-jsonwebtokenrequestfilter"><a class="anchor" href="#restclient-jsonwebtokenrequestfilter"></a>RestClient JsonWebTokenRequestFilter</h3>
<div class="paragraph">
<p><code>JsonWebTokenRequestFilter</code> の使用は、Bearer JWT トークンを扱う場合に推奨します。これらのトークンは <code>issuer</code> や <code>audience</code> などのクレームを変更でき、更新したトークンを再度セキュア (例: 再署名) に保つことができます。これは注入された <code>org.eclipse.microprofile.jwt.JsonWebToken</code> を想定しているため、不透明なトークンでは動作しません。また、OpenID Connect プロバイダーが Token Exchange プロトコルをサポートしている場合は、代わりに <code>AccessTokenRequestFilter</code> を使用することを推奨します。JWT と不透明な bearer トークンの両方を <code>AccessTokenRequestFilter</code> で安全に交換できます。</p>
</div>
<div class="paragraph">
<p><code>JsonWebTokenRequestFilter</code> により、 <code>Service A</code> の実装は注入された <code>org.eclipse.microprofile.jwt.JsonWebToken</code> を新しい <code>issuer</code> と <code>audience</code> のクレーム値で更新し、更新したトークンのセキュリティーは、新しい署名で簡単に確保できます。唯一困難な手順としては、 <code>Service A</code> に署名鍵があるかの確認が挙げられます。署名鍵は、安全なファイルシステムか、Vault のようなリモートのセキュアなストレージからプロビジョニングする必要があります。</p>
</div>
<div class="paragraph">
<p>たとえば、 <code>io.quarkus.oidc.token.propagation.JsonWebToken</code> または <code>org.eclipse.microprofile.rest.client.annotation.RegisterProvider</code> を使用して、 <code>JsonWebTokenRequestFilter</code> を選択的に登録することが可能です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.token.propagation.JsonWebToken;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@JsonWebToken
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.eclipse.microprofile.rest.client.annotation.RegisterProvider;
import org.eclipse.microprofile.rest.client.inject.RegisterRestClient;
import io.quarkus.oidc.token.propagation.JsonWebTokenRequestFilter;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@RegisterRestClient
@RegisterProvider(JsonWebTokenRequestFilter.class)
@Path("/")
public interface ProtectedResourceService {

    @GET
    String getUserName();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>または、 <code>quarkus.resteasy-client-oidc-token-propagation.register-filter</code> プロパティーと <code>quarkus.resteasy-client-oidc-token-propagation.json-web-token</code> プロパティーの両方が <code>true</code> に設定されている場合、 <code>JsonWebTokenRequestFilter</code> はすべての MicroProfile REST または Jakarta REST クライアントに自動的に登録できます。</p>
</div>
<div class="sect3">
<h4 id="update-token-before-propagation"><a class="anchor" href="#update-token-before-propagation"></a>伝播前にトークンを更新する</h4>
<div class="paragraph">
<p>注入されたトークンの <code>iss</code> (issuer) や <code>aud</code> (audience) のクレームを更新して、新しい署名で保護する必要がある場合は、次のように <code>JsonWebTokenRequestFilter</code> を設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.resteasy-client-oidc-token-propagation.secure-json-web-token=true
smallrye.jwt.sign.key.location=/privateKey.pem
# Set a new issuer
smallrye.jwt.new-token.issuer=http://frontend-resource
# Set a new audience
smallrye.jwt.new-token.audience=http://downstream-resource
# Override the existing token issuer and audience claims if they are already set
smallrye.jwt.new-token.override-matching-claims=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>前述のように、Keycloak またはトークン交換プロトコルをサポートする OpenID Connect プロバイダーを使用する場合は、 <code>AccessTokenRequestFilter</code> を使用します。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="integration-testing-token-propagation"><a class="anchor" href="#integration-testing-token-propagation"></a>テスト</h3>
<div class="paragraph">
<p>通常、2 つの REST テストエンドポイントを準備する必要があります。
最初のエンドポイントは、トークン伝播フィルターが登録されている、注入 MP REST クライアントを使用して、2 番目のエンドポイントを呼び出します。</p>
</div>
<div class="paragraph">
<p>実行方法については、<a href="security-openid-connect-client">OpenID Connect クライアントとトークンの伝播</a> クイックスタート、特に <a href="security-openid-connect-client#testing">テスト</a> セクションを参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkus-oidc-client-graphql"><a class="anchor" href="#quarkus-oidc-client-graphql"></a>GraphQL クライアントインテグレーション</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>quarkus-oidc-client-graphql</code> エクステンションは、REST クライアントで使用されるアプローチと並行して、OIDC クライアントを <a href="smallrye-graphql-client">GraphQL クライアント</a> に統合する方法を提供します。
このエクステンションがアクティブな場合、プロパティーを通じて設定された GraphQL クライアント (ビルダーによってプログラム的にではなく) は OIDC クライアントを使用してアクセストークンを取得して <code>Authorization</code> ヘッダー値として設定します。
この OIDC クライアントは期限切れのアクセストークンも更新します。</p>
</div>
<div class="paragraph">
<p>以下のように、GraphQL クライアントが使用する OIDC クライアントを設定するには、 <code>quarkus.oidc-client-graphql.client-name</code> プロパティーが指定された設定済みの OIDC クライアントの 1 つを選択します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>quarkus.oidc-client-graphql.client-name=oidc-client-for-graphql

# OIDC クライアント自体の宣言例
quarkus.oidc-client.oidc-client-for-graphql.auth-server-url=${keycloak.url}
quarkus.oidc-client.oidc-client-for-graphql.grant.type=password
quarkus.oidc-client.oidc-client-for-graphql.grant-options.password.username=${username}
quarkus.oidc-client.oidc-client-for-graphql.grant-options.password.password=${password}
quarkus.oidc-client.oidc-client-for-graphql.client-id=${quarkus.oidc.client-id}
quarkus.oidc-client.oidc-client-for-graphql.credentials.client-secret.value=${keycloak.credentials.secret}
quarkus.oidc-client.oidc-client-for-graphql.credentials.client-secret.method=POST</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
`quarkus.oidc-client-graphql.client-name`プロパティーを指定しない場合は、
GraphQL クライアントは、デフォルトの OIDC クライアント (明示的な名前なし) を使用します。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以下のように、特に型安全な GraphQL クライアントの場合、
<code>GraphQLClientApi</code> インターフェイスに  <code>@io.quarkus.oidc.client.filter.OidcClientFilter</code> のアノテーションを付けることで、これをクライアントごとにオーバーライドできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@GraphQLClientApi(configKey = "order-client")
@OidcClientFilter("oidc-client-for-graphql")
public interface OrdersGraphQLClient {
    // Queries, mutations, and subscriptions go here.
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>これをプログラムで作成された GraphQL クライアントで使用できるようにするために、
両方のビルダー (<code>VertxDynamicGraphQLClientBuilder</code> と
<code>VertxTypesafeGraphQLClientBuilder</code>) は <code>dynamicHeader(String,
Uni&lt;String&gt;</code>) メソッドを含んでおり、変更される可能性のあるヘッダーをプラグインできます。
 OIDC クライアントを接続するには、以下を使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
OidcClients oidcClients;

VertxTypesafeGraphQLClientBuilder builder = ....;
Uni&lt;String&gt; tokenUni = oidcClients.getClient("OIDC_CLIENT_NAME")
    .getTokens().map(t -&gt; "Bearer " + t.getAccessToken());
builder.dynamicHeader("Authorization", tokenUni);
VertxDynamicGraphQLClient client = builder.build();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>設定リファレンス</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="oidc-client"><a class="anchor" href="#oidc-client"></a>OIDC クライアント</h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span>ビルド時に固定される設定プロパティ - 他のすべての設定プロパティは実行時にオーバーライド可能 <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-oidc-client_quarkus-oidc-client-enabled"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-enabled"><code>quarkus.oidc-client.enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If the OIDC client extension is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56675">QUARKUS_OIDC_CLIENT_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56675" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-auth-server-url"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-auth-server-url"><code>quarkus.oidc-client.auth-server-url</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.auth-server-url' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".auth-server-url</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".auth-server-url' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The base URL of the OpenID Connect (OIDC) server, for example, <code><a href="https://host:port/auth" class="bare">https://host:port/auth</a></code>. Do not set this property if you use 'quarkus-oidc' and the public key verification (<code>public-key</code>) or certificate chain verification only (<code>certificate-chain</code>) is required. The OIDC discovery endpoint is called by default by appending a <code>.well-known/openid-configuration</code> path to this URL. For Keycloak, use <code><a href="https://host:port/realms/{realm}" class="bare">https://host:port/realms/{realm}</a></code>, replacing <code>{realm}</code> with the Keycloak realm name.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56676">QUARKUS_OIDC_CLIENT_AUTH_SERVER_URL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56676" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-discovery-enabled"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-discovery-enabled"><code>quarkus.oidc-client.discovery-enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.discovery-enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".discovery-enabled</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".discovery-enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Discovery of the OIDC endpoints. If not enabled, you must configure the OIDC endpoint URLs individually.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56677">QUARKUS_OIDC_CLIENT_DISCOVERY_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56677" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-registration-path"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-registration-path"><code>quarkus.oidc-client.registration-path</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.registration-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".registration-path</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".registration-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The relative path or absolute URL of the OIDC dynamic client registration endpoint. Set if <code>discovery-enabled</code> is <code>false</code> or a discovered token endpoint path must be customized.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56678">QUARKUS_OIDC_CLIENT_REGISTRATION_PATH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56678" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-connection-delay"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-connection-delay"><code>quarkus.oidc-client.connection-delay</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.connection-delay' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".connection-delay</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".connection-delay' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The duration to attempt the initial connection to an OIDC server. For example, setting the duration to <code>20S</code> allows 10 retries, each 2 seconds apart. This property is only effective when the initial OIDC connection is created. For dropped connections, use the <code>connection-retry-count</code> property instead.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56679">QUARKUS_OIDC_CLIENT_CONNECTION_DELAY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56679" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-connection-retry-count"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-connection-retry-count"><code>quarkus.oidc-client.connection-retry-count</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.connection-retry-count' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".connection-retry-count</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".connection-retry-count' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The number of times to retry re-establishing an existing OIDC connection if it is temporarily lost. Different from <code>connection-delay</code>, which applies only to initial connection attempts. For instance, if a request to the OIDC token endpoint fails due to a connection issue, it will be retried as per this setting.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56680">QUARKUS_OIDC_CLIENT_CONNECTION_RETRY_COUNT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56680" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-connection-timeout"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-connection-timeout"><code>quarkus.oidc-client.connection-timeout</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.connection-timeout' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".connection-timeout</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".connection-timeout' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The number of seconds after which the current OIDC connection request times out.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56681">QUARKUS_OIDC_CLIENT_CONNECTION_TIMEOUT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56681" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>10S</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-use-blocking-dns-lookup"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-use-blocking-dns-lookup"><code>quarkus.oidc-client.use-blocking-dns-lookup</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.use-blocking-dns-lookup' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".use-blocking-dns-lookup</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".use-blocking-dns-lookup' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-8" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether DNS lookup should be performed on the worker thread. Use this option when you can see logged warnings about blocked Vert.x event loop by HTTP requests to OIDC server.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56682">QUARKUS_OIDC_CLIENT_USE_BLOCKING_DNS_LOOKUP</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56682" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-max-pool-size"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-max-pool-size"><code>quarkus.oidc-client.max-pool-size</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.max-pool-size' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".max-pool-size</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".max-pool-size' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-9" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum size of the connection pool used by the WebClient.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56683">QUARKUS_OIDC_CLIENT_MAX_POOL_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56683" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-follow-redirects"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-follow-redirects"><code>quarkus.oidc-client.follow-redirects</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.follow-redirects' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".follow-redirects</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".follow-redirects' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-10" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Follow redirects automatically when WebClient gets HTTP 302. When this property is disabled only a single redirect to exactly the same original URI is allowed but only if one or more cookies were set during the redirect request.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56684">QUARKUS_OIDC_CLIENT_FOLLOW_REDIRECTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56684" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-token-path"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-token-path"><code>quarkus.oidc-client.token-path</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.token-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".token-path</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".token-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-11" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The OIDC token endpoint that issues access and refresh tokens; specified as a relative path or absolute URL. Set if <code>discovery-enabled</code> is <code>false</code> or a discovered token endpoint path must be customized.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56685">QUARKUS_OIDC_CLIENT_TOKEN_PATH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56685" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-revoke-path"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-revoke-path"><code>quarkus.oidc-client.revoke-path</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.revoke-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".revoke-path</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".revoke-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-12" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The relative path or absolute URL of the OIDC token revocation endpoint.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56686">QUARKUS_OIDC_CLIENT_REVOKE_PATH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56686" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-client-id"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-client-id"><code>quarkus.oidc-client.client-id</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.client-id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".client-id</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".client-id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-13" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The client id of the application. Each application has a client id that is used to identify the application. Setting the client id is not required if <code>application-type</code> is <code>service</code> and no token introspection is required.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56687">QUARKUS_OIDC_CLIENT_CLIENT_ID</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56687" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-client-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-client-name"><code>quarkus.oidc-client.client-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.client-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".client-name</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".client-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-14" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The client name of the application. It is meant to represent a human readable description of the application which you may provide when an application (client) is registered in an OpenId Connect provider&#8217;s dashboard. For example, you can set this property to have more informative log messages which record an activity of the given client.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56688">QUARKUS_OIDC_CLIENT_CLIENT_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56688" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-id"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-id"><code>quarkus.oidc-client.id</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".id</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-15" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A unique OIDC client identifier. It must be set when OIDC clients are created dynamically and is optional in all other cases.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56689">QUARKUS_OIDC_CLIENT_ID</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56689" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-client-enabled"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-client-enabled"><code>quarkus.oidc-client.client-enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.client-enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".client-enabled</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".client-enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-16" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If this client configuration is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56690">QUARKUS_OIDC_CLIENT_CLIENT_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56690" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-scopes"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-scopes"><code>quarkus.oidc-client.scopes</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.scopes' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".scopes</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".scopes' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-17" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>List of access token scopes</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56691">QUARKUS_OIDC_CLIENT_SCOPES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56691" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-audience"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-audience"><code>quarkus.oidc-client.audience</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.audience' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".audience</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".audience' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-18" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>List of access token audiences</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56692">QUARKUS_OIDC_CLIENT_AUDIENCE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56692" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-refresh-token-time-skew"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-refresh-token-time-skew"><code>quarkus.oidc-client.refresh-token-time-skew</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.refresh-token-time-skew' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".refresh-token-time-skew</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".refresh-token-time-skew' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-19" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Refresh token time skew. If this property is enabled then the configured duration is converted to seconds and is added to the current time when checking whether the access token should be refreshed. If the sum is greater than this access token&#8217;s expiration time then a refresh is going to happen.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56693">QUARKUS_OIDC_CLIENT_REFRESH_TOKEN_TIME_SKEW</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56693" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-access-token-expires-in"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-access-token-expires-in"><code>quarkus.oidc-client.access-token-expires-in</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.access-token-expires-in' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".access-token-expires-in</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".access-token-expires-in' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-20" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Access token expiration period relative to the current time. This property is only checked when an access token grant response does not include an access token expiration property.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56694">QUARKUS_OIDC_CLIENT_ACCESS_TOKEN_EXPIRES_IN</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56694" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-access-token-expiry-skew"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-access-token-expiry-skew"><code>quarkus.oidc-client.access-token-expiry-skew</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.access-token-expiry-skew' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".access-token-expiry-skew</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".access-token-expiry-skew' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-21" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Access token expiry time skew that can be added to the calculated token expiry time.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56695">QUARKUS_OIDC_CLIENT_ACCESS_TOKEN_EXPIRY_SKEW</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56695" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-absolute-expires-in"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-absolute-expires-in"><code>quarkus.oidc-client.absolute-expires-in</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.absolute-expires-in' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".absolute-expires-in</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".absolute-expires-in' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-22" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If the access token 'expires_in' property should be checked as an absolute time value as opposed to a duration relative to the current time.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56696">QUARKUS_OIDC_CLIENT_ABSOLUTE_EXPIRES_IN</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56696" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-grant-type"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-grant-type"><code>quarkus.oidc-client.grant.type</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.grant.type' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".grant.type</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".grant.type' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-23" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Grant type</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56697">QUARKUS_OIDC_CLIENT_GRANT_TYPE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56697" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><span class="asciidoc-tooltip-wrapper"><code>client</code><span class="asciidoc-tooltip">'client_credentials' grant requiring an OIDC client authentication only</span></span>, <span class="asciidoc-tooltip-wrapper"><code>password</code><span class="asciidoc-tooltip">'password' grant requiring both OIDC client and user ('username' and 'password') authentications</span></span>, <span class="asciidoc-tooltip-wrapper"><code>code</code><span class="asciidoc-tooltip">'authorization_code' grant requiring an OIDC client authentication as well as at least 'code' and 'redirect_uri' parameters which must be passed to OidcClient at the token request time.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>exchange</code><span class="asciidoc-tooltip">'urn\:ietf\:params\:oauth\:grant-type\:token-exchange' grant requiring an OIDC client authentication as well as at least 'subject_token' parameter which must be passed to OidcClient at the token request time.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>jwt</code><span class="asciidoc-tooltip">'urn\:ietf\:params\:oauth\:grant-type\:jwt-bearer' grant requiring an OIDC client authentication as well as at least an 'assertion' parameter which must be passed to OidcClient at the token request time.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>refresh</code><span class="asciidoc-tooltip">'refresh_token' grant requiring an OIDC client authentication and a refresh token. Note, OidcClient supports this grant by default if an access token acquisition response contained a refresh token. However, in some cases, the refresh token is provided out of band, for example, it can be shared between several of the confidential client&#8217;s services, etc. If 'quarkus.oidc-client.grant-type' is set to 'refresh' then <code>OidcClient</code> will only support refreshing the tokens.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>ciba</code><span class="asciidoc-tooltip">'urn\:openid\:params\:grant-type\:ciba' grant requiring an OIDC client authentication as well as 'auth_req_id' parameter which must be passed to OidcClient at the token request time.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>device</code><span class="asciidoc-tooltip">'urn\:ietf\:params\:oauth\:grant-type\:device_code' grant requiring an OIDC client authentication as well as 'device_code' parameter which must be passed to OidcClient at the token request time.</span></span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><span class="asciidoc-tooltip-wrapper"><code>client</code><span class="asciidoc-tooltip">'client_credentials' grant requiring an OIDC client authentication only</span></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-grant-access-token-property"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-grant-access-token-property"><code>quarkus.oidc-client.grant.access-token-property</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.grant.access-token-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".grant.access-token-property</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".grant.access-token-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-24" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Access token property name in a token grant response</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56698">QUARKUS_OIDC_CLIENT_GRANT_ACCESS_TOKEN_PROPERTY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56698" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>access_token</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-grant-refresh-token-property"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-grant-refresh-token-property"><code>quarkus.oidc-client.grant.refresh-token-property</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.grant.refresh-token-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".grant.refresh-token-property</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".grant.refresh-token-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-25" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Refresh token property name in a token grant response</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56699">QUARKUS_OIDC_CLIENT_GRANT_REFRESH_TOKEN_PROPERTY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56699" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>refresh_token</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-grant-expires-in-property"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-grant-expires-in-property"><code>quarkus.oidc-client.grant.expires-in-property</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.grant.expires-in-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".grant.expires-in-property</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".grant.expires-in-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-26" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Access token expiry property name in a token grant response</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56700">QUARKUS_OIDC_CLIENT_GRANT_EXPIRES_IN_PROPERTY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56700" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>expires_in</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-grant-refresh-expires-in-property"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-grant-refresh-expires-in-property"><code>quarkus.oidc-client.grant.refresh-expires-in-property</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.grant.refresh-expires-in-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".grant.refresh-expires-in-property</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".grant.refresh-expires-in-property' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-27" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Refresh token expiry property name in a token grant response</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56701">QUARKUS_OIDC_CLIENT_GRANT_REFRESH_EXPIRES_IN_PROPERTY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56701" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>refresh_expires_in</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-grant-options-grant-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-grant-options-grant-name"><code>quarkus.oidc-client.grant-options."grant-name"</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.grant-options."grant-name"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".grant-options."grant-name"</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".grant-options."grant-name"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-28" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Grant options</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56702">QUARKUS_OIDC_CLIENT_GRANT_OPTIONS__GRANT_NAME_</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56702" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Map&lt;String,Map&lt;String,String&gt;&gt;</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-early-tokens-acquisition"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-early-tokens-acquisition"><code>quarkus.oidc-client.early-tokens-acquisition</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.early-tokens-acquisition' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".early-tokens-acquisition</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".early-tokens-acquisition' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-29" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Requires that all filters which use 'OidcClient' acquire the tokens at the post-construct initialization time, possibly long before these tokens are used. This property should be disabled if the access token may expire before it is used for the first time and no refresh token is available.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56703">QUARKUS_OIDC_CLIENT_EARLY_TOKENS_ACQUISITION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56703" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-headers-headers"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-headers-headers"><code>quarkus.oidc-client.headers."headers"</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.headers."headers"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".headers."headers"</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".headers."headers"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-30" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Custom HTTP headers which have to be sent to the token endpoint</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56704">QUARKUS_OIDC_CLIENT_HEADERS__HEADERS_</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56704" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Map&lt;String,String&gt;</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-refresh-interval"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-refresh-interval"><code>quarkus.oidc-client.refresh-interval</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.refresh-interval' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".refresh-interval</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".refresh-interval' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-31" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Token refresh interval. By default, OIDC client refreshes the token during the current request, when it detects that it has expired, or nearly expired if the <code>refresh-token-time-skew()</code> is configured. But, when this property is configured, OIDC client can refresh the token asynchronously in the configured interval. This property is only effective with OIDC client filters and other <code>AbstractTokensProducer</code> extensions, but not when you use the <code>OidcClient#getTokens()</code> API directly.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56705">QUARKUS_OIDC_CLIENT_REFRESH_INTERVAL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56705" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-oidc-client_section_quarkus-oidc-client-proxy"></a> <span class="section-name section-level0"><a href="#quarkus-oidc-client_section_quarkus-oidc-client-proxy">HTTP proxy configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-proxy-host"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-proxy-host"><code>quarkus.oidc-client.proxy.host</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.proxy.host' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".proxy.host</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".proxy.host' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-32" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The host name or IP address of the Proxy.<br>
Note: If the OIDC adapter requires a Proxy to talk with the OIDC server (Provider), set this value to enable the usage of a Proxy.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56706">QUARKUS_OIDC_CLIENT_PROXY_HOST</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56706" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-proxy-port"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-proxy-port"><code>quarkus.oidc-client.proxy.port</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.proxy.port' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".proxy.port</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".proxy.port' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-33" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The port number of the Proxy. The default value is <code>80</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56707">QUARKUS_OIDC_CLIENT_PROXY_PORT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56707" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>80</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-proxy-username"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-proxy-username"><code>quarkus.oidc-client.proxy.username</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.proxy.username' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".proxy.username</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".proxy.username' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-34" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The username, if the Proxy needs authentication.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56708">QUARKUS_OIDC_CLIENT_PROXY_USERNAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56708" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-proxy-password"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-proxy-password"><code>quarkus.oidc-client.proxy.password</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.proxy.password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".proxy.password</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".proxy.password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-35" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The password, if the Proxy needs authentication.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56709">QUARKUS_OIDC_CLIENT_PROXY_PASSWORD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56709" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-oidc-client_section_quarkus-oidc-client-tls"></a> <span class="section-name section-level0"><a href="#quarkus-oidc-client_section_quarkus-oidc-client-tls">TLS configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-tls-tls-configuration-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-tls-tls-configuration-name"><code>quarkus.oidc-client.tls.tls-configuration-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.tls.tls-configuration-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".tls.tls-configuration-name</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".tls.tls-configuration-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-36" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The name of the TLS configuration to use.</p>
</div>
<div class="paragraph">
<p>If a name is configured, it uses the configuration from <code>quarkus.tls.&lt;name&gt;.*</code> If a name is configured, but no TLS configuration is found with that name then an error will be thrown.</p>
</div>
<div class="paragraph">
<p>The default TLS configuration is <strong>not</strong> used by default.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56710">QUARKUS_OIDC_CLIENT_TLS_TLS_CONFIGURATION_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56710" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-oidc-client_section_quarkus-oidc-client-credentials"></a> <span class="section-name section-level0"><a href="#quarkus-oidc-client_section_quarkus-oidc-client-credentials">Different authentication options for OIDC client to access OIDC token and other secured endpoints</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-secret"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-secret"><code>quarkus.oidc-client.credentials.secret</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.secret' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.secret</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.secret' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-37" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The client secret used by the <code>client_secret_basic</code> authentication method. Must be set unless a secret is set in <code>client-secret</code> or <code>jwt</code> client authentication is required. You can use <code>client-secret.value</code> instead, but both properties are mutually exclusive.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56711">QUARKUS_OIDC_CLIENT_CREDENTIALS_SECRET</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56711" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-value"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-value"><code>quarkus.oidc-client.credentials.client-secret.value</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.client-secret.value' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.client-secret.value</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.client-secret.value' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-38" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The client secret value. This value is ignored if <code>credentials.secret</code> is set. Must be set unless a secret is set in <code>client-secret</code> or <code>jwt</code> client authentication is required.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56712">QUARKUS_OIDC_CLIENT_CREDENTIALS_CLIENT_SECRET_VALUE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56712" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-provider-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-provider-name"><code>quarkus.oidc-client.credentials.client-secret.provider.name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.client-secret.provider.name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.client-secret.provider.name</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.client-secret.provider.name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-39" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The CredentialsProvider bean name, which should only be set if more than one CredentialsProvider is registered</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56713">QUARKUS_OIDC_CLIENT_CREDENTIALS_CLIENT_SECRET_PROVIDER_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56713" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-provider-keyring-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-provider-keyring-name"><code>quarkus.oidc-client.credentials.client-secret.provider.keyring-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.client-secret.provider.keyring-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.client-secret.provider.keyring-name</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.client-secret.provider.keyring-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-40" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The CredentialsProvider keyring name. The keyring name is only required when the CredentialsProvider being used requires the keyring name to look up the secret, which is often the case when a CredentialsProvider is shared by multiple extensions to retrieve credentials from a more dynamic source like a vault instance or secret manager</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56714">QUARKUS_OIDC_CLIENT_CREDENTIALS_CLIENT_SECRET_PROVIDER_KEYRING_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56714" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-provider-key"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-provider-key"><code>quarkus.oidc-client.credentials.client-secret.provider.key</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.client-secret.provider.key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.client-secret.provider.key</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.client-secret.provider.key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-41" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The CredentialsProvider client secret key</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56715">QUARKUS_OIDC_CLIENT_CREDENTIALS_CLIENT_SECRET_PROVIDER_KEY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56715" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-method"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-client-secret-method"><code>quarkus.oidc-client.credentials.client-secret.method</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.client-secret.method' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.client-secret.method</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.client-secret.method' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-42" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The authentication method. If the <code>clientSecret.value</code> secret is set, this method is <code>basic</code> by default.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56716">QUARKUS_OIDC_CLIENT_CREDENTIALS_CLIENT_SECRET_METHOD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56716" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><span class="asciidoc-tooltip-wrapper"><code>basic</code><span class="asciidoc-tooltip"><code>client_secret_basic</code> (default)\: The client id and secret are submitted with the HTTP Authorization Basic scheme.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>post</code><span class="asciidoc-tooltip"><code>client_secret_post</code>\: The client id and secret are submitted as the <code>client_id</code> and <code>client_secret</code> form parameters.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>post-jwt</code><span class="asciidoc-tooltip"><code>client_secret_jwt</code>\: The client id and generated JWT secret are submitted as the <code>client_id</code> and <code>client_secret</code> form parameters.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>query</code><span class="asciidoc-tooltip">client id and secret are submitted as HTTP query parameters. This option is only supported by the OIDC extension.</span></span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-source"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-source"><code>quarkus.oidc-client.credentials.jwt.source</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.source' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.source</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.source' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-43" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>JWT token source: OIDC provider client or an existing JWT bearer token.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56717">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SOURCE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56717" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><span class="asciidoc-tooltip-wrapper"><code>client</code><span class="asciidoc-tooltip">JWT token is generated by the OIDC provider client to support <code>client_secret_jwt</code> and <code>private_key_jwt</code> authentication methods.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>bearer</code><span class="asciidoc-tooltip">JWT bearer token is used as a client assertion\: https\://www.rfc-editor.org/rfc/rfc7523#section-2.2.</span></span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><span class="asciidoc-tooltip-wrapper"><code>client</code><span class="asciidoc-tooltip">JWT token is generated by the OIDC provider client to support <code>client_secret_jwt</code> and <code>private_key_jwt</code> authentication methods.</span></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-token-path"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-token-path"><code>quarkus.oidc-client.credentials.jwt.token-path</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.token-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.token-path</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.token-path' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-44" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Path to a file with a JWT bearer token that should be used as a client assertion. This path can only be set when JWT source (<code>source()</code>) is set to <code>Source#BEARER</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56718">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_TOKEN_PATH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56718" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">path</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret"><code>quarkus.oidc-client.credentials.jwt.secret</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.secret' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.secret</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.secret' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-45" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If provided, indicates that JWT is signed using a secret key. It is mutually exclusive with <code>key</code>, <code>key-file</code> and <code>key-store</code> properties.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56719">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SECRET</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56719" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret-provider-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret-provider-name"><code>quarkus.oidc-client.credentials.jwt.secret-provider.name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.secret-provider.name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.secret-provider.name</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.secret-provider.name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-46" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The CredentialsProvider bean name, which should only be set if more than one CredentialsProvider is registered</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56720">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SECRET_PROVIDER_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56720" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret-provider-keyring-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret-provider-keyring-name"><code>quarkus.oidc-client.credentials.jwt.secret-provider.keyring-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.secret-provider.keyring-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.secret-provider.keyring-name</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.secret-provider.keyring-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-47" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The CredentialsProvider keyring name. The keyring name is only required when the CredentialsProvider being used requires the keyring name to look up the secret, which is often the case when a CredentialsProvider is shared by multiple extensions to retrieve credentials from a more dynamic source like a vault instance or secret manager</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56721">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SECRET_PROVIDER_KEYRING_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56721" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret-provider-key"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-secret-provider-key"><code>quarkus.oidc-client.credentials.jwt.secret-provider.key</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.secret-provider.key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.secret-provider.key</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.secret-provider.key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-48" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The CredentialsProvider client secret key</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56722">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SECRET_PROVIDER_KEY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56722" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key"><code>quarkus.oidc-client.credentials.jwt.key</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.key</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.key' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-49" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>String representation of a private key. If provided, indicates that JWT is signed using a private key in PEM or JWK format. It is mutually exclusive with <code>secret</code>, <code>key-file</code> and <code>key-store</code> properties. You can use the <code>signature-algorithm</code> property to override the default key algorithm, <code>RS256</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56723">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_KEY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56723" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-file"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-file"><code>quarkus.oidc-client.credentials.jwt.key-file</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.key-file' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.key-file</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.key-file' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-50" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If provided, indicates that JWT is signed using a private key in PEM or JWK format. It is mutually exclusive with <code>secret</code>, <code>key</code> and <code>key-store</code> properties. You can use the <code>signature-algorithm</code> property to override the default key algorithm, <code>RS256</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56724">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_KEY_FILE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56724" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-store-file"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-store-file"><code>quarkus.oidc-client.credentials.jwt.key-store-file</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.key-store-file' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.key-store-file</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.key-store-file' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-51" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If provided, indicates that JWT is signed using a private key from a keystore. It is mutually exclusive with <code>secret</code>, <code>key</code> and <code>key-file</code> properties.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56725">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_KEY_STORE_FILE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56725" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-store-password"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-store-password"><code>quarkus.oidc-client.credentials.jwt.key-store-password</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.key-store-password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.key-store-password</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.key-store-password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-52" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A parameter to specify the password of the keystore file.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56726">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_KEY_STORE_PASSWORD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56726" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-id"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-id"><code>quarkus.oidc-client.credentials.jwt.key-id</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.key-id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.key-id</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.key-id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-53" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The private key id or alias.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56727">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_KEY_ID</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56727" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-password"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-key-password"><code>quarkus.oidc-client.credentials.jwt.key-password</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.key-password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.key-password</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.key-password' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-54" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The private key password.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56728">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_KEY_PASSWORD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56728" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-audience"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-audience"><code>quarkus.oidc-client.credentials.jwt.audience</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.audience' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.audience</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.audience' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-55" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The JWT audience (<code>aud</code>) claim value. By default, the audience is set to the address of the OpenId Connect Provider&#8217;s token endpoint.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56729">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_AUDIENCE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56729" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-token-key-id"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-token-key-id"><code>quarkus.oidc-client.credentials.jwt.token-key-id</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.token-key-id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.token-key-id</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.token-key-id' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-56" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The key identifier of the signing key added as a JWT <code>kid</code> header.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56730">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_TOKEN_KEY_ID</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56730" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-issuer"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-issuer"><code>quarkus.oidc-client.credentials.jwt.issuer</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.issuer' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.issuer</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.issuer' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-57" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The issuer of the signing key added as a JWT <code>iss</code> claim. The default value is the client id.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56731">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_ISSUER</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56731" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-subject"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-subject"><code>quarkus.oidc-client.credentials.jwt.subject</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.subject' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.subject</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.subject' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-58" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Subject of the signing key added as a JWT <code>sub</code> claim The default value is the client id.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56732">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SUBJECT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56732" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-claims-claim-name"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-claims-claim-name"><code>quarkus.oidc-client.credentials.jwt.claims."claim-name"</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.claims."claim-name"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.claims."claim-name"</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.claims."claim-name"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-59" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Additional claims.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56733">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_CLAIMS__CLAIM_NAME_</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56733" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Map&lt;String,String&gt;</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-signature-algorithm"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-signature-algorithm"><code>quarkus.oidc-client.credentials.jwt.signature-algorithm</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.signature-algorithm' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.signature-algorithm</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.signature-algorithm' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-60" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The signature algorithm used for the <code>key-file</code> property. Supported values: <code>RS256</code> (default), <code>RS384</code>, <code>RS512</code>, <code>PS256</code>, <code>PS384</code>, <code>PS512</code>, <code>ES256</code>, <code>ES384</code>, <code>ES512</code>, <code>HS256</code>, <code>HS384</code>, <code>HS512</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56734">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_SIGNATURE_ALGORITHM</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56734" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-lifespan"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-lifespan"><code>quarkus.oidc-client.credentials.jwt.lifespan</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.lifespan' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.lifespan</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.lifespan' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-61" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The JWT lifespan in seconds. This value is added to the time at which the JWT was issued to calculate the expiration time.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56735">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_LIFESPAN</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56735" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-assertion"></a> <span class="property-path"><a href="#quarkus-oidc-client_quarkus-oidc-client-credentials-jwt-assertion"><code>quarkus.oidc-client.credentials.jwt.assertion</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client.credentials.jwt.assertion' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc-client."id".credentials.jwt.assertion</code>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.oidc-client."id".credentials.jwt.assertion' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-62" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If true then the client authentication token is a JWT bearer grant assertion. Instead of producing 'client_assertion' and 'client_assertion_type' form properties, only 'assertion' is produced. This option is only supported by the OIDC client extension.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56736">QUARKUS_OIDC_CLIENT_CREDENTIALS_JWT_ASSERTION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56736" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div id="duration-note-anchor-quarkus-oidc-client_quarkus-oidc-client" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">期間フォーマットについて</div>
<div class="paragraph">
<p>期間の値を書くには、標準の <code>java.time.Duration</code> フォーマットを使います。
詳細は <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html#parse(java.lang.CharSequence)">Duration#parse() Java API documentation</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>数字で始まる簡略化した書式を使うこともできます:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数値のみの場合は、秒単位の時間を表します。</p>
</li>
<li>
<p>数値の後に <code>ms</code> が続く場合は、ミリ秒単位の時間を表します。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>その他の場合は、簡略化されたフォーマットが解析のために <code>java.time.Duration</code> フォーマットに変換されます：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数値の後に <code>h</code> 、 <code>m</code> 、 <code>s</code> が続く場合は、その前に <code>PT</code> が付けられます。</p>
</li>
<li>
<p>数値の後に <code>d</code> が続く場合は、その前に <code>P</code> が付けられます。</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="oidc-token-propagation"><a class="anchor" href="#oidc-token-propagation"></a>OIDCトークンの伝搬</h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span> ビルド時に固定される設定プロパティ - 他のすべての設定プロパティは、実行時にオーバーライド可能 <input type="search" id="config-search-1" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-enabled"></a> <span class="property-path"><a href="#quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-enabled"><code>quarkus.rest-client-oidc-token-propagation.enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.rest-client-oidc-token-propagation.enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-63" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If the OIDC Token Reactive Propagation is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56737">QUARKUS_REST_CLIENT_OIDC_TOKEN_PROPAGATION_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56737" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-enabled-during-authentication"></a> <span class="property-path"><a href="#quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-enabled-during-authentication"><code>quarkus.rest-client-oidc-token-propagation.enabled-during-authentication</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.rest-client-oidc-token-propagation.enabled-during-authentication' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-64" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether the token propagation is enabled during the <code>SecurityIdentity</code> augmentation.</p>
</div>
<div class="paragraph">
<p>For example, you may need to use a REST client from <code>SecurityIdentityAugmentor</code>
to propagate the current token to acquire additional roles for the <code>SecurityIdentity</code>.</p>
</div>
<div class="paragraph">
<p>Note, this feature relies on a duplicated context. More information about Vert.x duplicated
context can be found in <a href="duplicated-context">this guide</a>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56738">QUARKUS_REST_CLIENT_OIDC_TOKEN_PROPAGATION_ENABLED_DURING_AUTHENTICATION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56738" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-exchange-token"></a> <span class="property-path"><a href="#quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-exchange-token"><code>quarkus.rest-client-oidc-token-propagation.exchange-token</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.rest-client-oidc-token-propagation.exchange-token' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-65" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Exchange the current token with OpenId Connect Provider for a new token using either "urn:ietf:params:oauth:grant-type:token-exchange" or "urn:ietf:params:oauth:grant-type:jwt-bearer" token grant before propagating it.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56739">QUARKUS_REST_CLIENT_OIDC_TOKEN_PROPAGATION_EXCHANGE_TOKEN</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56739" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-client-name"></a> <span class="property-path"><a href="#quarkus-rest-client-oidc-token-propagation_quarkus-rest-client-oidc-token-propagation-client-name"><code>quarkus.rest-client-oidc-token-propagation.client-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.rest-client-oidc-token-propagation.client-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-66" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Name of the configured OidcClient. Note this property is only used if the <code>exchangeToken</code> property is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-56740">QUARKUS_REST_CLIENT_OIDC_TOKEN_PROPAGATION_CLIENT_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-56740" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>リファレンス</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="security-openid-connect-client">OpenID Connect クライアントとトークンの伝搬クイックスタート</a></p>
</li>
<li>
<p><a href="security-oidc-bearer-token-authentication">OIDCベアラートークン認証</a></p>
</li>
<li>
<p><a href="security-oidc-code-flow-authentication">ウェブアプリケーションを保護するOIDCコードフローメカニズム</a></p>
</li>
<li>
<p><a href="security-overview">Quarkus Securityの概要</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#oidcclient">OidcClient</a>
<ul class="sectlevel2">
<li><a href="#token-endpoint-configuration">トークンのエンドポイント設定</a></li>
<li><a href="#supported-token-grants">サポートされるトークングラント</a></li>
<li><a href="#use-oidc-client-directly">OidcClient を直接使用する</a></li>
<li><a href="#inject-tokens">トークンの注入</a></li>
<li><a href="#use-oidc-clients">OidcClientsの使用</a></li>
<li><a href="#named-oidc-clients">名前の付いた OidcClient とトークンの注入</a></li>
<li><a href="#rest-client-oidc-filter">RestClient の Reactive ClientFilter で OidcClient を使用する</a></li>
<li><a href="#resteasy-client-oidc-filter">RestClient の ClientFilter で OidcClient を使用する</a></li>
<li><a href="#use-a-custom-restclient-clientfilter">カスタムの RestClient ClientFilter を使用する</a></li>
<li><a href="#refresh-access-tokens">アクセストークンを更新する</a></li>
<li><a href="#revoke-access-tokens">アクセストークンを失効する</a></li>
<li><a href="#oidc-client-authentication">OidcClient 認証</a></li>
<li><a href="#oidc-client-spi">OIDC クライアント SPI</a></li>
<li><a href="#integration-testing-oidc-client">テスト</a></li>
<li><a href="#how-to-check-the-errors-in-the-logs">ログでエラーを確認する方法</a></li>
</ul>
</li>
<li><a href="#oidc-client-ref-oidc-request-filters">OIDCリクエストフィルター</a></li>
<li><a href="#oidc-client-ref-oidc-response-filters">OIDC レスポンスフィルター</a></li>
<li><a href="#token-propagation-rest">Quarkus REST のトークン伝播</a></li>
<li><a href="#token-propagation-resteasy">RESTEasy Classic のトークン伝播</a>
<ul class="sectlevel2">
<li><a href="#restclient-accesstokenrequestfilter">RestClient AccessTokenRequestFilter</a></li>
<li><a href="#restclient-jsonwebtokenrequestfilter">RestClient JsonWebTokenRequestFilter</a></li>
<li><a href="#integration-testing-token-propagation">テスト</a></li>
</ul>
</li>
<li><a href="#quarkus-oidc-client-graphql">GraphQL クライアントインテグレーション</a></li>
<li><a href="#configuration-reference">設定リファレンス</a>
<ul class="sectlevel2">
<li><a href="#oidc-client">OIDC クライアント</a></li>
<li><a href="#oidc-token-propagation">OIDCトークンの伝搬</a></li>
</ul>
</li>
<li><a href="#references">リファレンス</a></li>
</ul></div>
    </div>
  </div>
  <h2>関連コンテンツ</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じエクステンションについて</h3>
      <ul class="related-content">
      
        
        <li class="tutorial"><a href="/version/3.27/guides/security-openid-connect-client">OpenID Connectクライアントとトークン伝搬クイックスタート</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じトピックについて</h3>
      <ul class="related-content">
      
        
        <li class="reference"><a href="/version/3.27/guides/security-openid-connect-client-registration">OpenID Connect (OIDC) と OAuth2 の動的クライアント登録</a></li>
      
        
        <li class="tutorial"><a href="/version/3.27/guides/security-openid-connect-client">OpenID Connectクライアントとトークン伝搬クイックスタート</a></li>
      
        
        <li class="concepts"><a href="/version/3.27/guides/security-openid-connect-providers">よく知られたOpenID Connect プロバイダーの設定</a></li>
      
        
        <li class="howto"><a href="/version/3.27/guides/security-openid-connect-dev-services">OpenID Connect (OIDC)のDev ServicesとDev UI</a></li>
      
        
        <li class="tutorial"><a href="/version/3.27/guides/security-vertx-oidc-to-quarkus-oidc-migration">Migrate from Vert.x OIDC to Quarkus OIDC</a></li>
      
        
        <li class="concepts"><a href="/version/3.27/guides/security-oidc-bearer-token-authentication">OpenID Connect (OIDC) ベアラートークン認証</a></li>
      
        
        <li class="reference"><a href="/version/3.27/guides/security-oidc-configuration-properties-reference">OpenID Connect (OIDC) 設定プロパティ</a></li>
      
        
        <li class="concepts"><a href="/version/3.27/guides/security-oidc-code-flow-authentication">Web アプリケーションを保護するための OpenID Connect 認可コードフローメカニズム</a></li>
      
        
        <li class="tutorial"><a href="/version/3.27/guides/security-oidc-bearer-token-authentication-tutorial">OpenID Connect（OIDC）ベアラートークン認証によるサービスアプリケーションの保護</a></li>
      
        
        <li class="tutorial"><a href="/version/3.27/guides/security-oidc-code-flow-authentication-tutorial">Quarkus - 認可コードフローのOpenID Connectを使用してWebアプリケーションを保護</a></li>
      
        
        <li class="howto"><a href="/version/3.27/guides/security-keycloak-authorization">OpenID Connect (OIDC)とKeycloakを使用した認可の一元化</a></li>
      
        
        <li class="howto"><a href="/version/3.27/guides/security-openid-connect-multitenancy">OpenID Connect (OIDC)のマルチテナンシーの使用</a></li>
      
        
        <li class="concepts"><a href="/version/3.27/guides/security-authentication-mechanisms">Quarkusの認証メカニズム</a></li>
      
        
        <li class="reference"><a href="/version/3.27/guides/security-authorize-web-endpoints-reference">ウェブエンドポイントの認可</a></li>
      
        
        <li class="concepts"><a href="/version/3.27/guides/security-basic-authentication">Basic認証</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/security-jwt-build">JSON Web トークン (JWT) のビルド、署名、暗号化</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/security-csrf-prevention">クロスサイトリクエストフォージェリー対策</a></li>
      
        
        <li class="howto"><a href="/version/3.27/guides/security-basic-authentication-howto">ベーシック認証の有効化</a></li>
      
        
        <li class="tutorial"><a href="/version/3.27/guides/security-getting-started-tutorial">Basic認証とJakarta Persistenceを使用したセキュリティの入門</a></li>
      
        
        <li class="concepts"><a href="/version/3.27/guides/security-identity-providers">アイデンティティ・プロバイダー</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">ホーム</a></li>
          
          
          
            <li><a href="/about" target="_blank">Quarkusについて</a></li>
          
          
          
            <li><a href="/blog" target="_blank">ブログ</a></li>
          
          
          
            <li><a href="/insights" target="_blank">ポッドキャスト</a></li>
          
          
          
            <li><a href="/events" target="_blank">イベント</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">ニュースレター</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">ユーザーストーリー</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">ロードマップ</a></li>
          
          
          
            <li><a href="/security" target="_blank">セキュリティ&nbsp;ポリシー</a></li>
          
          
          
            <li><a href="/usage" target="_blank">使用方法</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォローする</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">サポート</a></li>
          
          
          
            <li><a href="/guides" target="_blank">ガイド</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">入門</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">ディスカッション</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">開発メーリングリスト</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>言語</span>
        <ul class="footer-links">
          
          
            <li><a href=" https://quarkus.io/ " target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href=" https://es.quarkus.io/ " target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href=" https://ja.quarkus.io/ " target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate ORM</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">その他多数...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
