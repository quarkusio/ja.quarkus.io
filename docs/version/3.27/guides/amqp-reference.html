<!DOCTYPE html>
<html lang="ja">







<head>
  <title>リアクティブメッセージング AMQP1.0 コネクターリファレンスドキュメント - 3.27 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com https://ajax.googleapis.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />

  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.27/guides/amqp-reference" />
  <meta property="og:title" content="リアクティブメッセージング AMQP1.0 コネクターリファレンスドキュメント - 3.27" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/amqp-reference">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/3.27/guides/amqp-reference">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/performance" class="">パフォーマンス</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
          <li><a href="/versatility" class="">多用途性</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ドキュメント</a></li>
          <li><a href="/userstories/" class="">ユーザーストーリー</a></li>  
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">エクステンションを探す</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">エクステンションの使用</a></li>
          <li><a href="/guides/writing-extensions" class="">エクステンションの作成</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">エクステンションの共有</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/working-groups" class="">ワーキンググループ</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ロードマップ</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.27/guides/amqp-reference" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.27/guides/amqp-reference">ポルトガル（BR）</a></li>
          <li><a href="https://es.quarkus.io/version/3.27/guides/amqp-reference">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.27/guides/amqp-reference">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.27/guides/amqp-reference">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.27/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>バージョン:</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.31.3 - Latest</option>
        
        
        
        <option value="3.27" selected>3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">リアクティブメッセージング AMQP1.0 コネクターリファレンスドキュメント </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このガイドは、<a href="amqp">AMQP 1.0 スタートガイド</a> のドキュメントです。リアクティブメッセージング用の AMQP コネクターの設定と使用法について詳しく説明します。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
このドキュメントは、コネクターのすべての詳細を網羅しているわけではありません。詳細については、 <a href="https://smallrye.io/smallrye-reactive-messaging">SmallRye Reactive Messaging website</a> サイトを参照してください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>AMQP コネクターを使用すると、Quarkus アプリケーションは AMQP1.0 プロトコルを使用してメッセージを送受信できます。プロトコルの詳細については、 <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-overview-v1.0-os.html">the AMQP 1.0 specification</a> を参照してください。AMQP 1.0 と AMQP 0.9.1 (RabbitMQ によって実装) には互換性がないことに注意することが重要です。詳細は、<a href="#using-rabbitmq">RabbitMQ の使用</a> を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="amqp-connector-extension"><a class="anchor" href="#amqp-connector-extension"></a>AMQP コネクターエクステンション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>コネクタを使用するには、 <code>quarkus-messaging-amqp</code> エクステンションを追加する必要があります。</p>
</div>
<div class="paragraph">
<p>次のコマンドでプロジェクトにエクステンションを追加することができます。</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">コマンドラインインタフェース</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus extension add quarkus-messaging-amqp</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextensions='quarkus-messaging-amqp'</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew addExtension --extensions='quarkus-messaging-amqp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは、以下の依存関係をプロジェクトに追加するだけです。</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-messaging-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-messaging-amqp")</code></pre>
</div>
</div>
<div class="paragraph">
<p>プロジェクトに追加したら、 <code>connector</code> 属性を設定することで、<em>channels</em> を AMQP アドレスにマッピングできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Inbound
mp.messaging.incoming.[channel-name].connector=smallrye-amqp

# Outbound
mp.messaging.outgoing.[channel-name].connector=smallrye-amqp</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">コネクターの自動取り付け</div>
<div class="paragraph">
<p>クラスパスに単一のコネクターがある場合は、 <code>connector</code> 属性の設定を省略できます。Quarkus は、<em>orphan</em> チャネルをクラスパスにある (一意の) コネクターに自動的に関連付けます。<em>Orphans</em> チャネルは、ダウンストリームコンシューマーのない outgoing チャネル、またはアップストリームプロデューサーのない incoming チャネルです。</p>
</div>
<div class="paragraph">
<p>この自動取り付けは、以下を使用して無効にできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.messaging.auto-connector-attachment=false</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-amqp-broker-access"><a class="anchor" href="#configuring-the-amqp-broker-access"></a>AMQP Broker のアクセス設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The AMQP connector connects to AMQP 1.0 brokers such as Apache&#8217;s ActiveMQ Classic or ActiveMQ Artemis.
To configure the location and credentials of the broker, add the following properties in the <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">amqp-host=amqp <i class="conum" data-value="1"></i><b>(1)</b>
amqp-port=5672 <i class="conum" data-value="2"></i><b>(2)</b>
amqp-username=my-username <i class="conum" data-value="3"></i><b>(3)</b>
amqp-password=my-password <i class="conum" data-value="4"></i><b>(4)</b>

mp.messaging.incoming.prices.connector=smallrye-amqp <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ブローカー/ルーターのホスト名を設定します。チャネルごとに (<code>host</code> 属性を使用して)、または <code>amqp-host</code> を使用してグローバルに実行できます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ブローカー/ルーターポートを設定します。チャネルごとに (<code>port</code> 属性を使用して)、または <code>amqp-port</code> を使用してグローバルに実行できます。デフォルトは <code>5672</code> です。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>必要に応じて、ブローカー/ルーターのユーザー名を設定します。チャネルごとに (<code>username</code> 属性を使用して)、または <code>amqp-username</code> を使用してグローバルに実行できます。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>必要に応じてブローカー/ルーターのパスワードを設定します。チャネルごとに (<code>password</code> 属性を使用して)、または <code>amqp-password</code> を使用してグローバルに実行できます。</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>価格チャネルに AMQP コネクターで管理するように指示します</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>開発モードでテストを実行すると、<a href="amqp-dev-services">Dev Services for AMQP</a> が自動的に AMQP ブローカーを開始します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="receiving-amqp-messages"><a class="anchor" href="#receiving-amqp-messages"></a>AMQP メッセージの受信</h2>
<div class="sectionbody">
<div class="paragraph">
<p>アプリケーションが <code>メッセージ &lt;Double&gt;</code> を受信すると想像してみましょう。ペイロードを直接消費できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package inbound;

import org.eclipse.microprofile.reactive.messaging.Incoming;

import jakarta.enterprise.context.ApplicationScoped;

@ApplicationScoped
public class AmqpPriceConsumer {

    @Incoming("prices")
    public void consume(double price) {
        // process your price.
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>または、メッセージ &lt;Double&gt; を取得できます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package inbound;

import org.eclipse.microprofile.reactive.messaging.Incoming;
import org.eclipse.microprofile.reactive.messaging.Message;

import jakarta.enterprise.context.ApplicationScoped;
import java.util.concurrent.CompletionStage;

@ApplicationScoped
public class AmqpPriceMessageConsumer {

    @Incoming("prices")
    public CompletionStage&lt;Void&gt; consume(Message&lt;Double&gt; price) {
        // process your price.

        // Acknowledge the incoming message, marking the AMQP message as `accepted`.
        return price.ack();
    }

}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="inbound-metadata"><a class="anchor" href="#inbound-metadata"></a>インバウンドメタデータ</h3>
<div class="paragraph">
<p>AMQP からのメッセージには、メタデータに <code>IncomingAmqpMetadata</code> のインスタンスが含まれています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Optional&lt;IncomingAmqpMetadata&gt; metadata = incoming.getMetadata(IncomingAmqpMetadata.class);
metadata.ifPresent(meta -&gt; {
    String address = meta.getAddress();
    String subject = meta.getSubject();
    boolean durable = meta.isDurable();
    // Use io.vertx.core.json.JsonObject
    JsonObject properties = meta.getProperties();
    // ...
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deserialization"><a class="anchor" href="#deserialization"></a>デシリアライズ</h3>
<div class="paragraph">
<p>このコネクターは、受信した AMQP Messages をリアクティブメッセージング <code>Message&lt;T&gt;</code> インスタンスに変換します。T` は受信した AMQP メッセージの <em>body</em> に依存します。</p>
</div>
<div class="paragraph">
<p><a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-types-v1.0-os.html">AMQP Type System</a> は、サポートされるタイプを定義します。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">AMQP ボディ型</th>
<th class="tableblock halign-left valign-top"><code>&lt;T&gt;</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-types-v1.0-os.html#section-primitive-type-definitions">AMQP Primitive Type</a> を含む AMQP 値</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">対応する Java の型</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Binary</code> タイプを使用した AMQP 値</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP シーケンス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP データ (バイナリーコンテンツ) で、 <code>content-type</code> が <code>application/json</code> に設定されている場合。</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://vertx.io/docs/apidocs/io/vertx/core/json/JsonObject.html"><code>JsonObject</code></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">異なる <code>content-type</code> を持つ AMQP データ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>この AMQP コネクター (アウトバウンドコネクター) を使用してオブジェクトを送信すると、JSON としてエンコードされ、バイナリーとして送信されます。 <code>content-type</code> は <code>application/json</code> に設定されます。したがって、次のようにオブジェクトを再構築できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.vertx.core.json.JsonObject;
//
@ApplicationScoped
public static class Consumer {

    List&lt;Price&gt; prices = new CopyOnWriteArrayList&lt;&gt;();

    @Incoming("from-amqp") <i class="conum" data-value="1"></i><b>(1)</b>
    public void consume(JsonObject p) {   <i class="conum" data-value="2"></i><b>(2)</b>
        Price price = p.mapTo(Price.class);  <i class="conum" data-value="3"></i><b>(3)</b>
        prices.add(price);
    }

    public List&lt;Price&gt; list() {
        return prices;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Price</code> インスタンスはコネクターによって自動的に JSON にエンコードされます</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>JsonObject</code> を使用して受け取ることができます</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>次に、 <code>mapTo</code> メソッドを使用してインスタンスを再構築できます</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>mapTo</code> メソッドは Quarkus Jackson マッパーを使用します。マッパーの設定の詳細については、<a href="rest-json#json">このガイド</a> を確認してください。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="acknowledgement"><a class="anchor" href="#acknowledgement"></a>謝辞</h3>
<div class="paragraph">
<p>AMQP メッセージに関連付けられたリアクティブメッセージングメッセージが確認されると、そのメッセージが <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-accepted">accepted</a> されたことをブローカーに通知します。</p>
</div>
</div>
<div class="sect2">
<h3 id="failure-management"><a class="anchor" href="#failure-management"></a>障害管理</h3>
<div class="paragraph">
<p>AMQP メッセージから生成されたメッセージが <em>nacked</em> の場合、障害戦略が適用されます。AMQP コネクターは、次の 6 つの戦略をサポートしています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fail</code> - アプリケーションに失敗します。これ以上 AMQP メッセージは処理されません (デフォルト)。AMQP メッセージは拒否済みとしてマークされます。</p>
</li>
<li>
<p><code>accept</code> - この戦略は、AMQP メッセージを <em>accepted</em> としてマークします。処理は失敗を無視して続行します。 <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-accepted">accepted delivery state documentation</a> を参照してください。</p>
</li>
<li>
<p><code>release</code> - この戦略は、AMQP メッセージを <em>released</em> としてマークします。処理は次のメッセージに進みます。ブローカーはメッセージを再配信できます。 <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-released">released delivery state documentation</a> を参照してください。</p>
</li>
<li>
<p><code>reject</code> - この戦略は、AMQP メッセージを拒否としてマークします。処理は次のメッセージに進みます。 <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-rejected">rejected delivery state documentation</a> を参照してください。</p>
</li>
<li>
<p><code>modified-failed</code> - この戦略は、AMQP メッセージを <em>modified</em> としてマークし、失敗したことを示します (<code>delivery-failed</code> 属性を使用)。処理は次のメッセージから続行されますが、ブローカーはメッセージの再配信を試みる可能性があります。 <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-modified">modified delivery state documentation</a> を参照してください</p>
</li>
<li>
<p><code>modified-failed-undeliverable-here</code> - この戦略は、AMQP メッセージを <em>modified</em> としてマークし、失敗したことを示します ( <code>delivery-failed</code> 属性を使用)。また、アプリケーションがメッセージを処理できないことも示しています。つまり、ブローカーはメッセージをこのノードに再配信しようとはしません。処理は次のメッセージに進みます。 <a href="https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#type-modified">modified delivery state documentation</a> を参照してください</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sending-amqp-messages"><a class="anchor" href="#sending-amqp-messages"></a>AMQP メッセージの送信</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="serialization"><a class="anchor" href="#serialization"></a>シリアル化</h3>
<div class="paragraph">
<p><code>Message&lt;T&gt;</code> を送信するとき、コネクターはメッセージを AMQP Message に変換します。ペイロードは AMQP Message の <em>body</em> に変換されます。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>T</code></th>
<th class="tableblock halign-left valign-top">AMQP メッセージボディ</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">プリミティブ型または <code>文字列</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ペイロードを含む AMQP 値</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Instant</code> または <code>UUID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">対応する AMQP タイプを使用した AMQP 値</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://vertx.io/docs/apidocs/io/vertx/core/json/JsonObject.html"><code>JsonObject</code></a> または <a href="https://vertx.io/docs/apidocs/io/vertx/core/json/JsonArray.html"><code>JsonArray</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バイナリーコンテンツを使用した AMQP データ。 <code>content-type</code> は <code>application/json</code> に設定されます</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.vertx.mutiny.core.buffer.Buffer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">バイナリーコンテンツを使用した AMQP データ。 <code>content-type</code> が設定されていません</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">その他のクラス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ペイロードは (Json Mapper を使用して) JSON に変換されます。結果は、<strong>バイナリー</strong>コンテンツを使用して AMQP データにラップされます。 <code>content-type</code> は <code>application/json</code> に設定されます</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>メッセージペイロードを JSON にシリアル化できない場合、メッセージは <em>nacked</em> されます。</p>
</div>
</div>
<div class="sect2">
<h3 id="outbound-metadata"><a class="anchor" href="#outbound-metadata"></a>アウトバウンドメタデータ</h3>
<div class="paragraph">
<p><code>Messages</code> を送信するときに、 <code>OutgoingAmqpMetadata</code> のインスタンスを追加して、メッセージが AMQP に送信される方法に影響を与えることができます。たとえば、サブジェクト、プロパティーを設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> OutgoingAmqpMetadata metadata = OutgoingAmqpMetadata.builder()
    .withDurable(true)
    .withSubject("my-subject")
    .build();

// Create a new message from the `incoming` message
// Add `metadata` to the metadata from the `incoming` message.
return incoming.addMetadata(metadata);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-address-names"><a class="anchor" href="#dynamic-address-names"></a>動的アドレス名</h3>
<div class="paragraph">
<p>メッセージの宛先を動的に選択することが望ましい場合があります。この場合、アプリケーション設定ファイル内でアドレスを設定するのではなく、アウトバウンドメタデータを使用してアドレスを設定する必要があります。</p>
</div>
<div class="paragraph">
<p>たとえば、incoming メッセージに基づいて動的アドレスに送信できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String addressName = selectAddressFromIncommingMessage(incoming);
OutgoingAmqpMetadata metadata = OutgoingAmqpMetadata.builder()
    .withAddress(addressName)
    .withDurable(true)
    .build();

// Create a new message from the `incoming` message
// Add `metadata` to the metadata from the `incoming` message.
return incoming.addMetadata(metadata);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
メッセージごとにアドレスを設定できるようにするために、コネクターは <em>anonymous sender</em> を使用しています。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="acknowledgement-2"><a class="anchor" href="#acknowledgement-2"></a>謝辞</h3>
<div class="paragraph">
<p>デフォルトでは、ブローカーがメッセージを確認したときに、リアクティブメッセージングの <code>Message</code> が確認されます。ルーターを使用する場合、この確認応答が有効にならない場合があります。この場合、メッセージがルーターに送信されるとすぐにメッセージを確認するように、 <code>auto-acknowledgement</code> 属性を設定します。</p>
</div>
<div class="paragraph">
<p>AMQP メッセージがブローカーによって拒否/解放/変更された場合 (または正常に送信できない場合)、メッセージはナックされます。</p>
</div>
</div>
<div class="sect2">
<h3 id="back-pressure-and-credits"><a class="anchor" href="#back-pressure-and-credits"></a>バックプレッシャーとクレジット</h3>
<div class="paragraph">
<p>バックプレッシャーは AMQP <em>credits</em> によって処理されます。アウトバウンドコネクターは、許可されたクレジットの量のみを要求します。クレジットの量が 0 に達すると、ブローカーが AMQP 送信者にさらにクレジットを付与するまで (非ブロッキング方式で) 待機します。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-amqp-address"><a class="anchor" href="#configuring-the-amqp-address"></a>AMQP アドレスの設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>address</code> 属性を使用して AMQP アドレスを設定できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.incoming.prices.connector=smallrye-amqp
mp.messaging.incoming.prices.address=my-queue

mp.messaging.outgoing.orders.connector=smallrye-amqp
mp.messaging.outgoing.orders.address=my-order-queue</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>address</code> 属性が設定されていない場合、コネクターはチャネル名を使用します。</p>
</div>
<div class="paragraph">
<p>To use an existing queue, you need to configure the <code>address</code>, <code>container-id</code> and, optionally, the <code>link-name</code> attributes.
For example, if you have an Apache ActiveMQ Artemis broker configured with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;addresses&gt;
    &lt;address name="people"&gt;
        &lt;anycast&gt;
            &lt;queue name="people"&gt;
                &lt;user&gt;artemis&lt;/user&gt;
            &lt;/queue&gt;
        &lt;/anycast&gt;
    &lt;/address&gt;
&lt;/addresses&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>次の設定が必要です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.outgoing.people.connector=smallrye-amqp
mp.messaging.outgoing.people.durable=true
mp.messaging.outgoing.people.address=people
mp.messaging.outgoing.people.container-id=people</code></pre>
</div>
</div>
<div class="paragraph">
<p>キュー名がチャネル名でない場合は、 <code>link-name</code> 属性を設定する必要がある場合があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.outgoing.people-out.connector=smallrye-amqp
mp.messaging.outgoing.people-out.durable=true
mp.messaging.outgoing.people-out.address=people
mp.messaging.outgoing.people-out.container-id=people
mp.messaging.outgoing.people-out.link-name=people</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>MULTICAST</code> キューを使用するには、キューの名前だけでなく、<em>FQQN</em>(完全修飾キュー名) を指定する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.outgoing.people-out.connector=smallrye-amqp
mp.messaging.outgoing.people-out.durable=true
mp.messaging.outgoing.people-out.address=foo
mp.messaging.outgoing.people-out.container-id=foo

mp.messaging.incoming.people-out.connector=smallrye-amqp
mp.messaging.incoming.people-out.durable=true
mp.messaging.incoming.people-out.address=foo::bar # Note the syntax: address-name::queue-name
mp.messaging.incoming.people-out.container-id=bar
mp.messaging.incoming.people-out.link-name=people</code></pre>
</div>
</div>
<div class="paragraph">
<p>More details about the AMQP Address model can be found in the <a href="https://activemq.apache.org/components/artemis/documentation/latest/address-model.html">ActiveMQ Artemis documentation</a>.</p>
</div>
<div class="sect2">
<h3 id="blocking-processing"><a class="anchor" href="#blocking-processing"></a>実行モデルとブロッキング処理</h3>
<div class="paragraph">
<p>リアクティブメッセージングは、I/O スレッドでメソッドを呼び出します。このトピックの詳細については、x<a href="quarkus-reactive-architecture">Quarkus リアクティブアーキテクチャーのドキュメント</a> を参照してください。ただし、多くの場合、リアクティブメッセージングとデータベースインタラクションなどのブロック処理を組み合わせる必要があります。このためには、処理が <em>ブロッキング</em> であり、呼び出し元のスレッドで実行するべきではないことを示す <code>@Blocking</code> アノテーションを使用する必要があります。</p>
</div>
<div class="paragraph">
<p>例えば、以下のコードは、Hibernate with Panacheを 使用してデータベースに受信ペイロードを格納する方法を示しています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.smallrye.reactive.messaging.annotations.Blocking;
import org.eclipse.microprofile.reactive.messaging.Incoming;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.transaction.Transactional;

@ApplicationScoped
public class PriceStorage {

    @Incoming("prices")
    @Transactional
    public void store(int priceInUsd) {
        Price price = new Price();
        price.value = priceInUsd;
        price.persist();
    }

}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>@Blocking</code> アノテーションは 2 つあります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>io.smallrye.reactive.messaging.annotations.Blocking</code></p>
</li>
<li>
<p><code>io.smallrye.common.annotation.Blocking</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>効果はどちらも同じです。したがって、両方を使うことができます。最初のものは、使用するワーカープールや順序を保持するかどうかなど、より細かい調整が可能です。2 番目のものは、Quarkus の他のリアクティブ機能でも使用され、デフォルトのワーカープールを使用し、順序を保持します。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">@RunOnVirtualThread</div>
<div class="paragraph">
<p>Java <em>仮想スレッドでの</em> ブロッキング処理の実行については、 <a href="messaging-virtual-threads">Quarkus Virtual Thread support with Reactive Messagingのドキュメント</a> を参照してください。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">@Transactional</div>
<div class="paragraph">
<p>メソッドに <code>@Transactional</code> アノテーションが付けられている場合、メソッドに <code>@Blocking</code> アノテーションが付けられていなくても、自動的に <em>blocking</em> と見なされます。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-the-underlying-amqp-client"><a class="anchor" href="#customizing-the-underlying-amqp-client"></a>基盤となる AMQP クライアントのカスタマイズ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>コネクターは、その下にある Vert.xAMQP クライアントを使用します。このクライアントの詳細については、 <a href="https://vertx.io/docs/vertx-amqp-client/java/">Vert.x website</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>次のように <code>AmqpClientOptions</code> のインスタンスを生成することにより、基盤となるクライアント設定をカスタマイズできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Produces
@Identifier("my-named-options")
public AmqpClientOptions getNamedOptions() {
  // You can use the produced options to configure the TLS connection
  PemKeyCertOptions keycert = new PemKeyCertOptions()
    .addCertPath("./tls/tls.crt")
    .addKeyPath("./tls/tls.key");
  PemTrustOptions trust = new PemTrustOptions().addCertPath("./tlc/ca.crt");
  return new AmqpClientOptions()
        .setSsl(true)
        .setPemKeyCertOptions(keycert)
        .setPemTrustOptions(trust)
        .addEnabledSaslMechanism("EXTERNAL")
        .setHostnameVerificationAlgorithm("") // Disables the hostname verification. Defaults is "HTTPS"
        .setConnectTimeout(30000)
        .setReconnectInterval(5000)
        .setContainerId("my-container");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このインスタンスが取得され、コネクターが使用するクライアントを設定するために使用されます。 <code>client-options-name</code> 属性を使用してクライアントの名前を指定する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.incoming.prices.client-options-name=my-named-options</code></pre>
</div>
</div>
<div class="paragraph">
<p>ブローカとの接続が頻繁に切断される場合、AMQP 接続を永続的に維持する必要があれば、 <code>AmqpClientOptions</code> を使用してハートビートを設定することもできます。
ブローカによっては、一定のアイドルタイムアウト後に AMQP 接続を終了する場合があります。ハートビート値を指定すると、Vert.x proton クライアントがリモートピアへのトランスポートを開始する際にアイドルタイムアウトを通知するために使用されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Produces
@Identifier("my-named-options")
public AmqpClientOptions getNamedOptions() {
  // set a heartbeat of 30s (in milliseconds)
  return new AmqpClientOptions()
        .setHeartbeat(30000);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tls-configuration"><a class="anchor" href="#tls-configuration"></a>TLS 設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AMQP 1.0 Messaging エクステンションは、 <a href="./tls-registry-reference">Quarkus TLSレジストリ</a> と統合され、Vert.x AMQPクライアントを設定します。</p>
</div>
<div class="paragraph">
<p>AMQP 1.0 チャネルの TLS を設定するには、 <code>application.properties</code> に TLS 設定を指定します：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.tls.your-tls-config.trust-store.pem.certs=ca.crt,ca2.pem
# ...
mp.messaging.incoming.prices.tls-configuration-name=your-tls-config</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="health-reporting"><a class="anchor" href="#health-reporting"></a>ヘルスレポート</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>quarkus-smallrye-health</code> エクステンションを備えた AMQP コネクターを使用すると、readiness と liveness のプローブに役立ちます。AMQP コネクターは、コネクターによって管理される各チャネルの readiness と liveness を報告します。現時点では、AMQP コネクターは readiness と liveness のチェックに同じロジックを使用しています。</p>
</div>
<div class="paragraph">
<p>ヘルスレポートを無効にするには、チャネルの <code>health-enabled</code> 属性を false に設定します。インバウンド側 (AMQP からのメッセージの受信) では、チェックは受信者がブローカーに接続されていることを確認します。アウトバウンド側 (AMQP へのレコードの送信) では、チェックにより、送信者がブローカーに接続されていることが確認されます。</p>
</div>
<div class="paragraph">
<p>メッセージ処理の失敗はメッセージをnackし、 <code>failure-strategy</code> で処理されることに注意してください。失敗を報告し、チェックの結果に影響を与えるのは <code>failure-strategy</code> です。失敗戦略の <code>fail</code> は失敗を報告し、チェックも失敗を報告します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-rabbitmq"><a class="anchor" href="#using-rabbitmq"></a>RabbitMQ の使用</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このコネクターは AMQP 1.0 用です。RabbitMQ は AMQP 0.9.1 を実装します。RabbitMQ はデフォルトで AMQP 1.0 を提供していませんが、そのためのプラグインがあります。このコネクターで RabbitMQ を使用するには、AMQP 1.0 プラグインを有効にして設定します。</p>
</div>
<div class="paragraph">
<p>プラグインが存在するにもかかわらず、一部の AMQP 1.0 機能は RabbitMQ では機能しません。したがって、次の設定をお勧めします。</p>
</div>
<div class="paragraph">
<p>RabbitMQ からのメッセージを受信する場合。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>耐久性を false に設定</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.incoming.prices.connector=smallrye-amqp
mp.messaging.incoming.prices.durable=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>RabbitMQ にメッセージを送信する場合。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>宛先アドレスの設定 (匿名送信はサポートされていません)</p>
</li>
<li>
<p><code>use-anonymous-sender</code> を false に設定します</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">mp.messaging.outgoing.generated-price.connector=smallrye-amqp
mp.messaging.outgoing.generated-price.address=prices
mp.messaging.outgoing.generated-price.use-anonymous-sender=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>結果として、RabbitMQ を使用する場合、(メッセージメタデータを使用して) 宛先を動的に変更することはできません。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="receiving-cloud-events"><a class="anchor" href="#receiving-cloud-events"></a>クラウドイベントの受信</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AMQP コネクターは <a href="https://cloudevents.io/">Cloud Events</a> をサポートします。コネクターは、<em>structured</em> または <em>binary</em> Cloud Events を検出すると、 <code>IncomingCloudEventMetadata&lt;T&gt;</code> を <code>Message</code> のメタデータに追加します。 <code>IncomingCloudEventMetadata</code> は必須であり、オプションのクラウドイベントの属性へのアクセサを含みます。</p>
</div>
<div class="paragraph">
<p>コネクターがクラウドイベントメタデータを抽出できない場合、コネクターはメタデータなしでメッセージを送信します。</p>
</div>
<div class="paragraph">
<p>クラウドイベントの受信の詳細は、SmallRye リアクティブメッセージングのドキュメントの <a href="https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.12/amqp/amqp.html#_receiving_cloud_events">Receiving Cloud Events</a> を参照してください。</p>
</div>
<div class="sect2">
<h3 id="sending-cloud-events"><a class="anchor" href="#sending-cloud-events"></a>クラウドイベントの送信</h3>
<div class="paragraph">
<p>AMQP コネクターは <a href="https://cloudevents.io/">Cloud Events</a> をサポートします。コネクターは、次の場合にアウトバウンドレコードをクラウドイベントとして送信します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>メッセージメタデータには、 <code>io.smallrye.reactive.messaging.ce.OutgoingCloudEventMetadata</code> インスタンスが含まれています。</p>
</li>
<li>
<p>チャネル設定は、 <code>cloud-events-type</code> および <code>cloud-events-source</code> 属性を定義します。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>クラウドイベントの送信の詳細については、SmallRye リアクティブメッセージングのドキュメントの <a href="https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.12/amqp/amqp.html#_sending_cloud_events">Sending Cloud Events</a> を参照してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>AMQP コネクター設定リファレンス</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="quarkus-specific-configuration"><a class="anchor" href="#quarkus-specific-configuration"></a>Quarkus 固有の設定</h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span>ビルド時に固定される設定プロパティ - 他のすべての設定プロパティは実行時にオーバーライド可能 <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-messaging-amqp_section_quarkus-amqp-devservices"></a> <span class="section-name section-level0"><a href="#quarkus-messaging-amqp_section_quarkus-amqp-devservices">Dev Services</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">型</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-enabled"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-enabled"><code>quarkus.amqp.devservices.enabled</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.enabled' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If Dev Services for AMQP has been explicitly enabled or disabled. Dev Services are generally enabled by default, unless there is an existing configuration present. For AMQP, Dev Services starts a broker unless <code>amqp-host</code> or <code>amqp-port</code> are set or if all the Reactive Messaging AMQP channel are configured with <code>host</code> or <code>port</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52692">QUARKUS_AMQP_DEVSERVICES_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52692" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-port"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-port"><code>quarkus.amqp.devservices.port</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.port' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Optional fixed port the dev service will listen to.</p>
</div>
<div class="paragraph">
<p>If not defined, the port will be chosen randomly.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52693">QUARKUS_AMQP_DEVSERVICES_PORT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52693" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-image-name"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-image-name"><code>quarkus.amqp.devservices.image-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.image-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The image to use. Note that only ActiveMQ Artemis images are supported. Specifically, the image repository must end with <code>artemiscloud/activemq-artemis-broker</code>.</p>
</div>
<div class="paragraph">
<p>Check the <a href="https://quay.io/repository/artemiscloud/activemq-artemis-broker">activemq-artemis-broker on Quay page</a> to find the available versions.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52694">QUARKUS_AMQP_DEVSERVICES_IMAGE_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52694" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>quay.io/artemiscloud/activemq-artemis-broker:1.0.25</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-extra-args"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-extra-args"><code>quarkus.amqp.devservices.extra-args</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.extra-args' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The value of the <code>AMQ_EXTRA_ARGS</code> environment variable to pass to the container. For ActiveMQ Artemis Broker &#8656; 1.0.21, set this property to <code>--no-autotune --mapped --no-fsync --relax-jolokia --http-host 0.0.0.0</code></p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52695">QUARKUS_AMQP_DEVSERVICES_EXTRA_ARGS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52695" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>--no-autotune --mapped --no-fsync --relax-jolokia</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-shared"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-shared"><code>quarkus.amqp.devservices.shared</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.shared' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Indicates if the AMQP broker managed by Quarkus Dev Services is shared. When shared, Quarkus looks for running containers using label-based service discovery. If a matching container is found, it is used, and so a second one is not started. Otherwise, Dev Services for AMQP starts a new container.</p>
</div>
<div class="paragraph">
<p>The discovery uses the <code>quarkus-dev-service-amqp</code> label. The value is configured using the <code>service-name</code> property.</p>
</div>
<div class="paragraph">
<p>Container sharing is only used in dev mode.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52696">QUARKUS_AMQP_DEVSERVICES_SHARED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52696" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-service-name"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-service-name"><code>quarkus.amqp.devservices.service-name</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.service-name' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The value of the <code>quarkus-dev-service-aqmp</code> label attached to the started container. This property is used when <code>shared</code> is set to <code>true</code>. In this case, before starting a container, Dev Services for AMQP looks for a container with the <code>quarkus-dev-service-amqp</code> label set to the configured value. If found, it will use this container instead of starting a new one. Otherwise, it starts a new container with the <code>quarkus-dev-service-amqp</code> label set to the specified value.</p>
</div>
<div class="paragraph">
<p>This property is used when you need multiple shared AMQP brokers.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52697">QUARKUS_AMQP_DEVSERVICES_SERVICE_NAME</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52697" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>amqp</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-messaging-amqp_quarkus-amqp-devservices-container-env-environment-variable-name"></a> <span class="property-path"><a href="#quarkus-messaging-amqp_quarkus-amqp-devservices-container-env-environment-variable-name"><code>quarkus.amqp.devservices.container-env."environment-variable-name"</code></a></span>
<button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-text='quarkus.amqp.devservices.container-env."environment-variable-name"' title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Environment variables that are passed to the container.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52698">QUARKUS_AMQP_DEVSERVICES_CONTAINER_ENV__ENVIRONMENT_VARIABLE_NAME_</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52698" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Map&lt;String,String&gt;</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="incoming-channel-configuration"><a class="anchor" href="#incoming-channel-configuration"></a>受信チャネルの設定</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7777%;">
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 22.2224%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">属性 (<em>alias</em>)</th>
<th class="tableblock halign-left valign-top">説明</th>
<th class="tableblock halign-left valign-top">必須</th>
<th class="tableblock halign-left valign-top">デフォルト</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>address</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP アドレス。設定されていない場合、チャネル名が使用されます</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>auto-acknowledgement</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">受信した AMQP メッセージを受信時に確認する必要があるかどうか</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>broadcast</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">受信した AMQP メッセージを複数の <em>subscribers</em> にディスパッチする必要があるかどうか</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>capabilities</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">送信側または受信側のクライアントが提案する能力のカンマ区切りのリスト。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>client-options-name</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-client-options-name)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP クライアント設定をカスタマイズするために使用される AMQP クライアントオプション Bean の名前</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラウド イベント サポートを有効（デフォルト）または無効にします。 <em>incoming</em> チャネルで有効にすると、コネクタは受信レコードを分析し、Cloud Event メタデータの作成を試みます。 <em>outgoing</em> 側で有効にすると、メッセージに Cloud Event Metadata が含まれている場合、コネクタはoutgoingメッセージを Cloud Event として送信します。</p>
<p class="tableblock">Type: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>connect-timeout</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-connect-timeout)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ミリ秒単位の接続タイムアウト</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>container-id</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP コンテナー ID</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>durable</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP サブスクリプションが永続的であるかどうか</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>failure-strategy</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP メッセージから生成されたメッセージがナックされたときに適用する失敗の戦略を指定します。指定できる値は <code>fail</code> (デフォルト)、 <code>accept</code>、 <code>release</code>、 <code>reject</code>、 <code>modified-failed</code>、 <code>modified-failed-undeliverable-here</code> です。</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fail</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>health-timeout</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">readiness チェックのためにブローカーとの接続がまだ確立されているかどうかを判別するために待機する最大秒数。そのしきい値を超えると、チェックは失敗したと見なされます。</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>host</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-host)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーのホスト名</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localhost</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>link-name</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">リンクの名前。設定されていない場合、チャネル名が使用されます。</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>password</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-password)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーへの認証に使用されるパスワード</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>port</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-port)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーポート</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5672</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>reconnect-attempts</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-reconnect-attempts)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">再接続の試行回数</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>reconnect-interval</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-reconnect-interval)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 回の再接続試行の間隔 (秒)</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>sni-server-name</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-sni-server-name)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">設定されている場合、TLS SNI サーバー名に使用するホスト名を明示的にオーバーライドします</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>selector</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">メッセージセレクタを設定する。この属性は、送信元端末に <code>apache.org:selector-filter:string</code> フィルタを定義するために使用されます。SQL ベースの構文を使用して、受信者に配信されるメッセージをサーバフィルタに要求します（該当するサーバでサポートされている場合）。サポートされる機能や必要な構文は、サーバーによって異なる場合があります。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>tracing-enabled</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">トレースを有効（デフォルト）にするか、無効にするか</p>
<p class="tableblock">Type: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>use-ssl</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-use-ssl)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP 接続が SSL/TLS を使用するかどうか</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>username</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-username)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーへの認証に使用されるユーザー名</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>virtual-host</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-virtual-host)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">設定されている場合は、接続に使用されるホスト名の値を設定します AMQP オープンフレームと TLS SNI サーバー名 (TLS が使用されている場合)</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="outgoing-channel-configuration"><a class="anchor" href="#outgoing-channel-configuration"></a>発信チャネル設定</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 27.7777%;">
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 22.2224%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">属性 (<em>alias</em>)</th>
<th class="tableblock halign-left valign-top">説明</th>
<th class="tableblock halign-left valign-top">必須</th>
<th class="tableblock halign-left valign-top">デフォルト</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>address</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP アドレス。設定されていない場合、チャネル名が使用されます</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>capabilities</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">送信側または受信側のクライアントが提案する能力のカンマ区切りのリスト。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>client-options-name</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-client-options-name)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP クライアント設定をカスタマイズするために使用される AMQP クライアントオプション Bean の名前</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">クラウド イベント サポートを有効（デフォルト）または無効にします。 <em>incoming</em> チャネルで有効にすると、コネクタは受信レコードを分析し、Cloud Event メタデータの作成を試みます。 <em>outgoing</em> 側で有効にすると、メッセージに Cloud Event Metadata が含まれている場合、コネクタはoutgoingメッセージを Cloud Event として送信します。</p>
<p class="tableblock">Type: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-data-content-type</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(cloud-events-default-data-content-type)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">outgoing Cloud Eventのデフォルトの <code>datacontenttype</code> 属性を設定します。 <code>cloud-events</code> に <code>true</code> を設定する必要があります。この値は、メッセージが <code>datacontenttype</code> 属性を設定していない場合に使用されます。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-data-schema</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(cloud-events-default-data-schema)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">outgoing Cloud Eventのデフォルトの <code>dataschema</code> 属性を設定します。 <code>cloud-events</code> に <code>true</code> を設定する必要があります。この値は、メッセージが <code>dataschema</code> 属性を設定していない場合に使用されます。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-insert-timestamp</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(cloud-events-default-timestamp)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">コネクターが、送信するクラウドイベントに自動的に <code>time</code> 属性を挿入するかどうかを指定します。 <code>cloud-events</code> が <code>true</code> に設定されていることが必要です。この値は、メッセージに <code>time</code> 属性が設定されていない場合に使用されます。</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-mode</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloud Eventのモード（ <code>structured</code> または <code>binary</code> （デフォルト））。outgoing レコードにCloud Eventをどのように書き込むかを示します</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-source</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(cloud-events-default-source)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">outgoing Cloud Eventのデフォルトの <code>source</code> 属性を設定します。 <code>cloud-events</code> に <code>true</code> を設定する必要があります。この値は、メッセージが <code>source</code> 属性を設定していない場合に使用されます。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-subject</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(cloud-events-default-subject)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">outgoing Cloud Eventのデフォルトの <code>subject</code> 属性を設定します。 <code>cloud-events</code> に <code>true</code> を設定する必要があります。この値は、メッセージが <code>subject</code> 属性を設定していない場合に使用されます。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>cloud-events-type</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(cloud-events-default-type)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">outgoing Cloud Eventのデフォルトの <code>type</code> 属性を設定します。 <code>cloud-events</code> に <code>true</code> を設定する必要があります。この値は、メッセージが <code>type</code> 属性を設定していない場合に使用されます。</p>
<p class="tableblock">Type: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>connect-timeout</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-connect-timeout)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ミリ秒単位の接続タイムアウト</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>container-id</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP コンテナー ID</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>credit-retrieval-period</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーによって付与されたクレジットを取得する 2 つの試行の間の期間 (ミリ秒単位)。この時間は、送信者がクレジットを使い果たしたときに使用されます。</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>durable</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">送信された AMQP メッセージが耐久性があるとマークされているかどうか</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>health-timeout</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">readiness チェックのためにブローカーとの接続がまだ確立されているかどうかを判別するために待機する最大秒数。そのしきい値を超えると、チェックは失敗したと見なされます。</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>host</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-host)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーのホスト名</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localhost</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>link-name</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">リンクの名前。設定されていない場合、チャネル名が使用されます。</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>merge</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">コネクタが複数のアップストリームを許可するかどうか</p>
<p class="tableblock">Type: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>password</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-password)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーへの認証に使用されるパスワード</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>port</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-port)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーポート</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5672</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>reconnect-attempts</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-reconnect-attempts)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">再接続の試行回数</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>reconnect-interval</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-reconnect-interval)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 回の再接続試行の間隔 (秒)</p>
<p class="tableblock">タイプ: <em>int</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>sni-server-name</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-sni-server-name)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">設定されている場合、TLS SNI サーバー名に使用するホスト名を明示的にオーバーライドします</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>tracing-enabled</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">トレースを有効（デフォルト）にするか、無効にするか</p>
<p class="tableblock">Type: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>ttl</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">送信した AMQP メッセージの TTL (time-to-live)。TTL を無効にする場合は 0</p>
<p class="tableblock">タイプ: <em>long</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>use-anonymous-sender</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">コネクターが匿名送信者を使用するかどうか。デフォルト値は、ブローカーがサポートしている場合は <code>true</code> で、それ以外の場合は <code>false</code> です。サポートしていない場合は、宛先アドレスを動的に変更することができません。
タイプです。</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>use-ssl</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-use-ssl)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMQP 接続が SSL/TLS を使用するかどうか</p>
<p class="tableblock">タイプ: <em>boolean</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>username</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-username)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ブローカーへの認証に使用されるユーザー名</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="no-hyphens"><strong>virtual-host</strong></span></p>
<p class="tableblock"><span class="no-hyphens"><em>(amqp-virtual-host)</em></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">設定されている場合は、接続に使用されるホスト名の値を設定します AMQP オープンフレームと TLS SNI サーバー名 (TLS が使用されている場合)</p>
<p class="tableblock">タイプ: <em>string</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="conditionally-configure-channels"><a class="anchor" href="#conditionally-configure-channels"></a>条件付きでチャンネルを設定する</h3>
<div class="paragraph">
<p>特定のプロファイルを使用してチャンネルを設定できます。
そのため、指定したプロファイルが有効な場合にのみ、チャンネルが設定されます（アプリケーションに追加されます）。</p>
</div>
<div class="paragraph">
<p>これを実現するには、以下を実行する必要があります。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>mp.messaging.[incoming|outgoing].$channel</code> エントリーに <code>%my-profile</code> を接頭辞として付け、たとえば、 <code>%my-profile.mp.messaging.[incoming|outgoing].$channel.key=value</code> のようにします。</p>
</li>
<li>
<p>プロファイルが有効な場合にのみ有効にする必要がある <code>@Incoming(channel)</code> と <code>@Outgoing(channel)</code> アノテーションを含む CDI Bean で、 <code>@IfBuildProfile("my-profile")</code> を使用します。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>リアクティブメッセージングでは、グラフが完全であることを確認することに注意してください。
したがって、このような条件付き設定を使用する場合は、プロファイルの有効化の有無に関係なく、アプリケーションが動作することを確認してください。</p>
</div>
<div class="paragraph">
<p>このアプローチは、プロファイルに基づいてチャネル設定を変更する場合にも使用できることに注意してください。</p>
</div>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#amqp-connector-extension">AMQP コネクターエクステンション</a></li>
<li><a href="#configuring-the-amqp-broker-access">AMQP Broker のアクセス設定</a></li>
<li><a href="#receiving-amqp-messages">AMQP メッセージの受信</a>
<ul class="sectlevel2">
<li><a href="#inbound-metadata">インバウンドメタデータ</a></li>
<li><a href="#deserialization">デシリアライズ</a></li>
<li><a href="#acknowledgement">謝辞</a></li>
<li><a href="#failure-management">障害管理</a></li>
</ul>
</li>
<li><a href="#sending-amqp-messages">AMQP メッセージの送信</a>
<ul class="sectlevel2">
<li><a href="#serialization">シリアル化</a></li>
<li><a href="#outbound-metadata">アウトバウンドメタデータ</a></li>
<li><a href="#dynamic-address-names">動的アドレス名</a></li>
<li><a href="#acknowledgement-2">謝辞</a></li>
<li><a href="#back-pressure-and-credits">バックプレッシャーとクレジット</a></li>
</ul>
</li>
<li><a href="#configuring-the-amqp-address">AMQP アドレスの設定</a>
<ul class="sectlevel2">
<li><a href="#blocking-processing">実行モデルとブロッキング処理</a></li>
</ul>
</li>
<li><a href="#customizing-the-underlying-amqp-client">基盤となる AMQP クライアントのカスタマイズ</a></li>
<li><a href="#tls-configuration">TLS 設定</a></li>
<li><a href="#health-reporting">ヘルスレポート</a></li>
<li><a href="#using-rabbitmq">RabbitMQ の使用</a></li>
<li><a href="#receiving-cloud-events">クラウドイベントの受信</a>
<ul class="sectlevel2">
<li><a href="#sending-cloud-events">クラウドイベントの送信</a></li>
</ul>
</li>
<li><a href="#configuration-reference">AMQP コネクター設定リファレンス</a>
<ul class="sectlevel2">
<li><a href="#quarkus-specific-configuration">Quarkus 固有の設定</a></li>
<li><a href="#incoming-channel-configuration">受信チャネルの設定</a></li>
<li><a href="#outgoing-channel-configuration">発信チャネル設定</a></li>
<li><a href="#conditionally-configure-channels">条件付きでチャンネルを設定する</a></li>
</ul>
</li>
</ul></div>
    </div>
  </div>
  <h2>関連コンテンツ</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じエクステンションについて</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.27/guides/amqp-dev-services">Dev Services for AMQP</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/amqp">AMQP 1.0を使用したQuarkusのメッセージング入門</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じトピックについて</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.27/guides/amqp-dev-services">Dev Services for AMQP</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/amqp">AMQP 1.0を使用したQuarkusのメッセージング入門</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka">Apache Kafka リファレンスガイド</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/pulsar">Apache Pulsar リファレンス・ガイド</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/apicurio-registry-dev-services">Dev Services for Apicurio Registry</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka-dev-services">Dev Services for Kafka</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/pulsar-dev-services">Dev Services for Pulsar</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/rabbitmq-dev-services">Dev Services for RabbitMQ</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka-getting-started">Apache Kafkaを使用したQuarkusメッセージング入門</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/pulsar-getting-started">Apache PulsarによるQuarkusメッセージングの開始</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/rabbitmq">RabbitMQを使用したQuarkusメッセージング入門</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka-dev-ui">Kafka Dev UI</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/messaging">Quarkus Messagingエクステンション</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/messaging-virtual-threads">Reactive MessagingによるQuarkus仮想スレッドのサポート</a></li>
      
        
        <li class="reference"><a href="/version/3.27/guides/rabbitmq-reference">リアクティブメッセージング RabbitMQ コネクターのリファレンスドキュメント</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka-streams">Apache Kafka ストリームの使用</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka-schema-registry-avro"> Schema RegistryとAvroと共にApache Kafkaを使用</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/kafka-schema-registry-json-schema">スキーマレジストリとJSONスキーマと共にApache Kafkaを使用する</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/jms">JMSの使用</a></li>
      
        
        <li class="guide"><a href="/version/3.27/guides/reactive-event-bus">イベントバスの使用</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">ホーム</a></li>
          
          
          
            <li><a href="/about" target="_blank">Quarkusについて</a></li>
          
          
          
            <li><a href="/blog" target="_blank">ブログ</a></li>
          
          
          
            <li><a href="/insights" target="_blank">ポッドキャスト</a></li>
          
          
          
            <li><a href="/events" target="_blank">イベント</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">ニュースレター</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">ユーザーストーリー</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">ロードマップ</a></li>
          
          
          
            <li><a href="/security" target="_blank">セキュリティ&nbsp;ポリシー</a></li>
          
          
          
            <li><a href="/usage" target="_blank">使用方法</a></li>
          
          
          
            <li><a href="https://github.com/commonhaus/artwork/tree/main/projects/quarkus" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォローする</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">サポート</a></li>
          
          
          
            <li><a href="/guides" target="_blank">ガイド</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">入門</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">ディスカッション</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">開発メーリングリスト</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>言語</span>
        <ul class="footer-links">
          
          
            <li><a href=" https://quarkus.io/ " target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href=" https://es.quarkus.io/ " target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href=" https://ja.quarkus.io/ " target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate ORM</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">その他多数...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
