<!DOCTYPE html>
<html lang="ja">







<head>
  <title>gRPCコード生成リファレンスガイド - 3.15 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com https://ajax.googleapis.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />

  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.15/guides/grpc-generation-reference" />
  <meta property="og:title" content="gRPCコード生成リファレンスガイド - 3.15" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/grpc-generation-reference">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/3.15/guides/grpc-generation-reference">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/performance" class="">パフォーマンス</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
          <li><a href="/versatility" class="">多用途性</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ドキュメント</a></li>
          <li><a href="/userstories/" class="">ユーザーストーリー</a></li>  
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">エクステンションを探す</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">エクステンションの使用</a></li>
          <li><a href="/guides/writing-extensions" class="">エクステンションの作成</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">エクステンションの共有</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/working-groups" class="">ワーキンググループ</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ロードマップ</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.15/guides/grpc-generation-reference" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.15/guides/grpc-generation-reference">ポルトガル（BR）</a></li>
          <li><a href="https://es.quarkus.io/version/3.15/guides/grpc-generation-reference">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.15/guides/grpc-generation-reference">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.15/guides/grpc-generation-reference">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.15/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>バージョン:</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.31.3 - Latest</option>
        
        
        
        <option value="3.27" >3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" selected>3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">gRPCコード生成リファレンスガイド </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このリファレンスガイドでは、gRPC コード生成を設定する方法について説明します。最初に <a href="grpc">gRPC 公式ガイド</a> を読むことを推奨します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-grpc-code-generation"><a class="anchor" href="#enabling-grpc-code-generation"></a>gRPC コード生成の有効化</h2>
<div class="sectionbody">
<div class="paragraph">
<p>デフォルトでは、 <code>src/main/proto</code> ディレクトリーにある <code>\*.proto</code> ファイルは、ビルドプロセス中に Java ソースにコンパイルされます。</p>
</div>
<div class="sect2">
<h3 id="using-maven"><a class="anchor" href="#using-maven"></a>Maven の使用</h3>
<div class="paragraph">
<p>gRPC コード生成を有効化するには、プロジェクトに以下の依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-grpc&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>次に、Quarkus Maven プラグインで <code>generate-code</code> フェーズが有効化されていることを確認します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;build&lt;/goal&gt;
                &lt;goal&gt;generate-code&lt;/goal&gt;
                &lt;goal&gt;generate-code-tests&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-gradle"><a class="anchor" href="#using-gradle"></a>Gradle の使用</h3>
<div class="paragraph">
<p>Gradle の場合、プロジェクトに以下の依存関係を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation 'io.quarkus:quarkus-grpc'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-the-proto-directory"><a class="anchor" href="#customizing-the-proto-directory"></a><em>proto</em> ディレクトリーのカスタマイズ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>デフォルトでは、 <code>\*.proto</code> ファイルは <code>src/main/proto</code> ディレクトリーにあると想定されます。
この場所は、<strong>ビルド記述子</strong> の <code>quarkus.grpc.codegen.proto-directory</code> プロパティーを使用して設定できます。</p>
</div>
<div class="paragraph">
<p>Maven では、以下の設定を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;build&lt;/goal&gt;
                &lt;goal&gt;generate-code&lt;/goal&gt;
                &lt;goal&gt;generate-code-tests&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;properties&gt;
                    &lt;quarkus.grpc.codegen.proto-directory&gt;${project.basedir}/ext/proto&lt;/quarkus.grpc.codegen.proto-directory&gt;
                &lt;/properties&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gradle では、以下の設定を使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">quarkus {
    quarkusBuildProperties.put("quarkus.grpc.codegen.proto-directory", "${project.projectDir}/ext/proto")
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generating-descriptor-set"><a class="anchor" href="#generating-descriptor-set"></a>記述子セットの生成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Protocol Buffers には、独自の型の説明は含まれていません。したがって、型が定義された対応する .proto ファイルがない raw メッセージのみが指定された場合、有用なデータを抽出することは困難です。ただし、.proto ファイルの内容自体は、 <a href="https://protobuf.dev/programming-guides/techniques/#self-description">プロトコルバッファーを使用して表現</a> できます。</p>
</div>
<div class="paragraph">
<p>デフォルトでは、Quarkus はこれらの記述子を生成しません。Quarkus は、これらを生成するためのいくつかの設定オプションを提供します。これらは、 <code>application.properties</code> または <code>application.yml</code> ファイルに追加されます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>quarkus.generate-code.grpc.descriptor-set.generate</code></p>
<div class="ulist">
<ul>
<li>
<p>生成を有効にするには <code>true</code> に設定します。</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>quarkus.generate-code.grpc.descriptor-set.output-dir</code></p>
<div class="ulist">
<ul>
<li>
<p>これをプロジェクトのビルドディレクトリーを基準とした相対値に設定します (Maven の場合は <code>target</code>、Gradle の場合は <code>build</code>)。</p>
</li>
<li>
<p>Maven のデフォルト値: <code>target/generated-sources/grpc</code></p>
</li>
<li>
<p>Gradle のデフォルト値: <code>$buildDir/classes/java/quarkus-generated-sources/grpc</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>quarkus.generate-code.grpc.descriptor-set.name</code></p>
<div class="ulist">
<ul>
<li>
<p>生成する記述子セットファイルの名前</p>
</li>
<li>
<p>デフォルト値: <code>descriptor_set.dsc</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-grpc-code-generation-for-dependencies"><a class="anchor" href="#configuring-grpc-code-generation-for-dependencies"></a>依存関係の gRPC コード生成の設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Java ソースにコンパイルする <code>*.proto</code> ファイルを含む依存関係がある可能性があります。
このセクションでは、コード生成中にこれらの <code>\*.proto</code> ファイルを含めるようにコード生成を設定する方法について説明します。</p>
</div>
<div class="sect2">
<h3 id="proto-files-for-imports"><a class="anchor" href="#proto-files-for-imports"></a>インポート用の Proto ファイル</h3>
<div class="paragraph">
<p>Protocol Buffers 仕様では、 <code>proto</code> ファイルをインポートする方法が提供されています。
Quarkus コード生成メカニズムを使用すると、 <code>application.properties</code> で <code>quarkus.generate-code.grpc.scan-for-imports</code> プロパティーを設定することで、可能なインポートをスキャンする依存関係の範囲を制御できます。
以下のいずれかの値に設定できます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>all</code> - すべての依存関係をスキャンします。</p>
</li>
<li>
<p><code>none</code> - 依存関係をスキャンせず、 <code>src/main/proto</code> または <code>src/test/proto</code> で定義されているもののみを使用します。</p>
</li>
<li>
<p><code>groupId1:artifactId1,groupId2:artifactId2</code> - グループ ID とアーティファクト ID で指定された依存関係のみをスキャンします。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>指定されていない場合、プロパティーはデフォルトで <code>com.google.protobuf:protobuf-java</code> になります。
これをオーバーライドするには、 <code>application.properties</code> で <code>quarkus.generate-code.grpc.scan-for-imports</code> プロパティーを設定します。
以下に例を示します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.generate-code.grpc.scan-for-imports=all</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scan-for-proto"><a class="anchor" href="#scan-for-proto"></a>依存関係の Proto ファイル</h3>
<div class="paragraph">
<p>場合によっては、別のプロジェクトの <code>proto</code> ファイルを使用して gRPC スタブを生成する必要があるかもしれません。
その場合は、以下を実行します。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>proto ファイルを含むアーティファクトへの依存関係をプロジェクトに追加します。</p>
</li>
<li>
<p><code>application.properties</code> で、proto ファイルをスキャンしたい依存関係を指定します。</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.generate-code.grpc.scan-for-proto=&lt;groupId&gt;:&lt;artifactId&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>プロパティーの値は、デフォルト値である <code>none</code>、または <code>groupId:artifactId</code> 座標のコンマ区切りリストになります。</p>
</div>
<div class="paragraph">
<p>依存関係に多数の proto ファイルが含まれており、それらのサブセットのみのクラスを生成する場合は、依存関係ごとに glob パターンを指定できます。
一致させるパスは、依存関係内の <code>src/main/resources</code> パスからの相対パスです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.generate-code.grpc.scan-for-proto-include."&lt;groupId&gt;:&lt;artifactId&gt;"=foo/**,bar/**,banana/a-proto.proto
quarkus.generate-code.grpc.scan-for-proto-exclude."&lt;groupId&gt;:&lt;artifactId&gt;"=foo/private/**,bar/another-proto.proto</code></pre>
</div>
</div>
<div class="paragraph">
<p>プロパティーキー内の <code>:</code> 文字は、エスケープする必要があることに注意してください。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipping-code-generation"><a class="anchor" href="#skipping-code-generation"></a>コード生成をスキップする</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次を使用して gRPC コード生成をスキップできます。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>grpc.codegen.skip</code> システムプロパティー: <code>-Dgrpc.codegen.skip=true</code></p>
</li>
<li>
<p><code>application.properties</code> ファイルの <code>quarkus.grpc.codegen.skip</code> プロパティー: <code>quarkus.grpc.codegen.skip=true</code></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="protobuf-maven-plugin"><a class="anchor" href="#protobuf-maven-plugin"></a>proto から protobuf-maven-plugin で Java ファイルを生成する</h3>
<div class="paragraph">
<p>または、 <code>proto</code> ファイルのスタブを生成するには、 <code>protobuf-maven-plugin</code> を使用できます。
ただし、特別なニーズがない限り、Quarkus サポートを使用することを推奨します。</p>
</div>
<div class="paragraph">
<p>これを行うには、 <code>&lt;properties&gt;</code> セクションの以下のプロパティーを定義します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;grpc.version&gt;1.65.1&lt;/grpc.version&gt;
&lt;protoc.version&gt;3.25.5&lt;/protoc.version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>これらのプロパティーは、gRPC バージョンと <code>protoc</code> バージョンを設定します。</p>
</div>
<div class="paragraph">
<p>次に、 <code>os-maven-plugin</code> エクステンションと <code>protobuf-maven-plugin</code> 設定を <code>build</code> セクションに追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
    &lt;extensions&gt;
        &lt;extension&gt;
            &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;
            &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;${os-maven-plugin-version}&lt;/version&gt;
        &lt;/extension&gt;
    &lt;/extensions&gt;

    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;   <i class="conum" data-value="1"></i><b>(1)</b>
            &lt;version&gt;${protobuf-maven-plugin-version}&lt;/version&gt;
            &lt;configuration&gt;
                &lt;protocArtifact&gt;com.google.protobuf:protoc:${protoc.version}:exe:${os.detected.classifier}&lt;/protocArtifact&gt;  <i class="conum" data-value="2"></i><b>(2)</b>
                &lt;pluginId&gt;grpc-java&lt;/pluginId&gt;
                &lt;pluginArtifact&gt;io.grpc:protoc-gen-grpc-java:${grpc.version}:exe:${os.detected.classifier}&lt;/pluginArtifact&gt;
                &lt;protocPlugins&gt;
                    &lt;protocPlugin&gt;
                        &lt;id&gt;quarkus-grpc-protoc-plugin&lt;/id&gt;
                        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
                        &lt;artifactId&gt;quarkus-grpc-protoc-plugin&lt;/artifactId&gt;
                        &lt;version&gt;{quarkus-version}&lt;/version&gt;
                        &lt;mainClass&gt;io.quarkus.grpc.protoc.plugin.MutinyGrpcGenerator&lt;/mainClass&gt;
                    &lt;/protocPlugin&gt;
                &lt;/protocPlugins&gt;
            &lt;/configuration&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;compile&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;compile&lt;/goal&gt;
                        &lt;goal&gt;compile-custom&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
                &lt;execution&gt;
                    &lt;id&gt;test-compile&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;test-compile&lt;/goal&gt;
                        &lt;goal&gt;test-compile-custom&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;

        &lt;!-- ... --&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>protobuf-maven-plugin</code> は、gRPC サービス定義 (<code>proto</code> ファイル) からスタブクラスを生成します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>クラス生成では、OS 固有のツール <code>protoc</code> が使用されます。このため、オペレーティングシステムと互換性のある実行可能ファイルをターゲットにするには、 <code>os-maven-plugin</code> を使用します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>注記: この設定は、Quarkus 開発エクスペリエンスに適合するように、 <code>protobuf-maven-plugin</code> にデフォルトの gRPC クラスと Mutiny を使用するクラスを生成するように指示します。</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>quarkus-maven-plugin</code> の代わりに <code>protobuf-maven-plugin</code> を使用する場合は、 <code>proto</code> ファイルを更新するたびに (<code>mvn compile</code> を使用して) クラスを再生成する必要があります。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-generated-grpc-classes-from-dependencies"><a class="anchor" href="#using-generated-grpc-classes-from-dependencies"></a>依存関係から生成された gRPC クラスを使用する</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>proto</code> ファイルから生成されたクラスである gRPC クラスがアプリケーションの依存関係にある場合、依存関係には Jandex インデックスが必要です。
<code>jandex-maven-plugin</code> を使用して Jandex インデックスを作成できます。
このトピックの詳細は、CDI ガイドの <a href="cdi-reference#bean_discovery">Bean の検出</a> セクションを参照してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;
            &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.2.3&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                &lt;id&gt;make-index&lt;/id&gt;
                &lt;goals&gt;
                    &lt;goal&gt;jandex&lt;/goal&gt;
                &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gradle を使用している場合は、以下の設定を使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">plugins {
    id 'org.kordamp.gradle.jandex' version '1.1.0'
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Quarkus が最適化されたクラスを生成できるように、生成されたクラスではなく依存関係で <code>proto</code> ファイルをパッケージ化することを推奨します。
詳細は、&lt;&lt;scan-for-proto, dedicated section&gt; を参照してください。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="argument-files"><a class="anchor" href="#argument-files"></a>引数ファイル</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>protoc</code> コマンドラインが最大コマンド長を超える場合、引数ファイルを使用して引数を <code>protoc</code> コマンドに渡すように Quarkus に要求できます。</p>
</div>
<div class="paragraph">
<p>この機能を有効にするには、 <code>application.properties</code> ファイル内の <code>quarkus.generate-code.grpc.use-arg-file</code> プロパティーを <code>true</code> に設定します。</p>
</div>
<div class="paragraph">
<p>Windows でコマンドラインが 8190 文字を超える場合、Quarkus は自動的に引数ファイルを使用して引数を <code>protoc</code> コマンドに渡します。</p>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#enabling-grpc-code-generation">gRPC コード生成の有効化</a>
<ul class="sectlevel2">
<li><a href="#using-maven">Maven の使用</a></li>
<li><a href="#using-gradle">Gradle の使用</a></li>
</ul>
</li>
<li><a href="#customizing-the-proto-directory"><em>proto</em> ディレクトリーのカスタマイズ</a></li>
<li><a href="#generating-descriptor-set">記述子セットの生成</a></li>
<li><a href="#configuring-grpc-code-generation-for-dependencies">依存関係の gRPC コード生成の設定</a>
<ul class="sectlevel2">
<li><a href="#proto-files-for-imports">インポート用の Proto ファイル</a></li>
<li><a href="#scan-for-proto">依存関係の Proto ファイル</a></li>
</ul>
</li>
<li><a href="#skipping-code-generation">コード生成をスキップする</a>
<ul class="sectlevel2">
<li><a href="#protobuf-maven-plugin">proto から protobuf-maven-plugin で Java ファイルを生成する</a></li>
</ul>
</li>
<li><a href="#using-generated-grpc-classes-from-dependencies">依存関係から生成された gRPC クラスを使用する</a></li>
<li><a href="#argument-files">引数ファイル</a></li>
</ul></div>
    </div>
  </div>
  <h2>関連コンテンツ</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じエクステンションについて</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-service-consumption">gRPC サービスを消費する</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-kubernetes">KubernetesでgRPCサービスをデプロイする</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-getting-started">gRPCを始めるには</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc">gRPC</a></li>
      
        
        <li class="reference"><a href="/version/3.15/guides/grpc-reference">gRPCリファレンスガイド</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-service-implementation">gRPCサービスの実装</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-virtual-threads">Quarkusの仮想スレッドによるgRPCサービスのサポート</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じトピックについて</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-service-consumption">gRPC サービスを消費する</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-kubernetes">KubernetesでgRPCサービスをデプロイする</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-getting-started">gRPCを始めるには</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc">gRPC</a></li>
      
        
        <li class="reference"><a href="/version/3.15/guides/grpc-reference">gRPCリファレンスガイド</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-service-implementation">gRPCサービスの実装</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-virtual-threads">Quarkusの仮想スレッドによるgRPCサービスのサポート</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-cli">gRPC CLIの使用</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-xds">xDS gRPCの使用</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">ホーム</a></li>
          
          
          
            <li><a href="/about" target="_blank">Quarkusについて</a></li>
          
          
          
            <li><a href="/blog" target="_blank">ブログ</a></li>
          
          
          
            <li><a href="/insights" target="_blank">ポッドキャスト</a></li>
          
          
          
            <li><a href="/events" target="_blank">イベント</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">ニュースレター</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">ユーザーストーリー</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">ロードマップ</a></li>
          
          
          
            <li><a href="/security" target="_blank">セキュリティ&nbsp;ポリシー</a></li>
          
          
          
            <li><a href="/usage" target="_blank">使用方法</a></li>
          
          
          
            <li><a href="https://github.com/commonhaus/artwork/tree/main/projects/quarkus" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォローする</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">サポート</a></li>
          
          
          
            <li><a href="/guides" target="_blank">ガイド</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">入門</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">ディスカッション</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">開発メーリングリスト</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>言語</span>
        <ul class="footer-links">
          
          
            <li><a href=" https://quarkus.io/ " target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href=" https://es.quarkus.io/ " target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href=" https://ja.quarkus.io/ " target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate ORM</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">その他多数...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
