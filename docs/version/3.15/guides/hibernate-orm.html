<!DOCTYPE html>
<html lang="ja">







<head>
  <title>Hibernate ORMとJakarta Persistenceの使用 - 3.15 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.15/guides/hibernate-orm" />
  <meta property="og:title" content="Hibernate ORMとJakarta Persistenceの使用 - 3.15" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/hibernate-orm">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/3.15/guides/hibernate-orm">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/performance" class="">パフォーマンス</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
          <li><a href="/versatility" class="">多用途性</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ドキュメント</a></li>
          <li><a href="/userstories/" class="">ユーザーストーリー</a></li>  
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">エクステンションを探す</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">エクステンションの使用</a></li>
          <li><a href="/guides/writing-extensions" class="">エクステンションの作成</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">エクステンションの共有</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/working-groups" class="">ワーキンググループ</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ロードマップ</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.15/guides/hibernate-orm" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.15/guides/hibernate-orm">ポルトガル（BR）</a></li>
          <li><a href="https://es.quarkus.io/version/3.15/guides/hibernate-orm">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.15/guides/hibernate-orm">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.15/guides/hibernate-orm">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.15/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>バージョン:</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.28.4 - Latest</option>
        
        
        
        <option value="3.27" >3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" selected>3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Hibernate ORMとJakarta Persistenceの使用 </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hibernate ORMは、Jakarta Persistence（旧称JPA）のデファクトスタンダード実装であり、Object Relational Mapperの完全な実装を提供します。Quarkusで見事に機能します。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>ソリューション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次の章で紹介する手順に沿って、ステップを踏んでアプリを作成することをお勧めします。ただし、完成した例にそのまま進んでも構いません。</p>
</div>
<div class="paragraph">
<p>Gitレポジトリをクローンするか <code>git clone -b 3.15 <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code> 、 <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/3.15.zip">アーカイブ</a> をダウンロードします。</p>
</div>
<div class="paragraph">
<p>ソリューションは <code>hibernate-orm-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/3.15/hibernate-orm-quickstart">ディレクトリ</a> にあります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up-and-configuring-hibernate-orm"><a class="anchor" href="#setting-up-and-configuring-hibernate-orm"></a>Hibernate ORMのセットアップと設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>QuarkusでHibernate ORMを使用する場合は、 設定の為に <code>persistence.xml</code> リソースは必要ありません。</p>
</div>
<div class="paragraph">
<p>このような古典的な設定ファイルを使用することは選択しとしてありますが、特定の高度なニーズがない限り不要です。そのため、まずはHibernate ORMを <code>persistence.xml</code> リソース無しで設定できることをみていきましょう。</p>
</div>
<div class="paragraph">
<p>Quarkusでは、次のことを行うだけです:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application.properties</code> に設定を追加します。</p>
</li>
<li>
<p>エンティティーに <code>@Entity</code> やその他のマッピングアノテーションを通常通りにアノテーションします。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>その他の設定の必要性は自動化されています。Quarkusは、いくつかの定見に基づいた選択と経験に基づいた推測を行います。</p>
</div>
<div class="paragraph">
<p>以下の依存関係をプロジェクトに追加してください:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hibernate ORM エクステンション: <code>io.quarkus:quarkus-hibernate-orm</code></p>
</li>
<li>
<p>JDBC ドライバーエクステンション。以下のオプションを使用できます。</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.ibm.com/products/db2-database">IBM DB2</a> のための <code>quarkus-jdbc-db2</code></p>
</li>
<li>
<p><a href="https://db.apache.org/derby/">アパッチダービー</a> のための <code>quarkus-jdbc-derby</code></p>
</li>
<li>
<p><a href="https://www.h2database.com/html/main.html">H2</a> のための <code>quarkus-jdbc-h2</code></p>
</li>
<li>
<p><a href="https://mariadb.com/">MariaDB</a> のための <code>quarkus-jdbc-mariadb</code></p>
</li>
<li>
<p><a href="https://www.microsoft.com/en-gb/sql-server/">Microsoft SQL Server</a> のための <code>quarkus-jdbc-mssql</code></p>
</li>
<li>
<p><a href="https://www.mysql.com/">MySQL</a> のための <code>quarkus-jdbc-mysql</code></p>
</li>
<li>
<p><a href="https://www.oracle.com/database/">Oracle Database</a> のための <code>quarkus-jdbc-oracle</code></p>
</li>
<li>
<p><a href="https://www.postgresql.org/">PostgreSQL</a> のための <code>quarkus-jdbc-postgresql</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>例えば</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- Hibernate ORM specific dependencies --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- JDBC driver dependencies --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">// Hibernate ORM specific dependencies
implementation("io.quarkus:quarkus-hibernate-orm")

// JDBC driver dependencies
implementation("io.quarkus:quarkus-jdbc-postgresql")</code></pre>
</div>
</div>
<div class="paragraph">
<p> persistent オブジェクトに <code>@Entity</code> アノテーションを付けてから、 <code>application.properties</code> で関連する設定プロパティーを追加します。</p>
</div>
<div class="listingblock">
<div class="title">例 <code>application.properties</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.db-kind = postgresql <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.datasource.username = hibernate
quarkus.datasource.password = hibernate
quarkus.datasource.jdbc.url = jdbc:postgresql://localhost:5432/hibernate_db

quarkus.hibernate-orm.database.generation=drop-and-create <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="datasource">データソースを設定します</a>。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>起動時にデータベースを削除して作成します (スキーマのみを更新するには <code>update</code> を使用します)。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>これらの設定プロパティは、通常のHibernate ORMの設定ファイルにあるものとは異なることに注意してください。多くの場合はHibernate ORMの設定のプロパティに対応していますが、名前が異なる場合もあり、必ずしも1対1で対応しているわけではありません。</p>
</div>
<div class="paragraph">
<p>また、Quarkusは多くのHibernate ORMの設定を自動的に設定し、多くの場合、より現代的なデフォルト値を使用します。</p>
</div>
<div class="paragraph">
<p><code>application.properties</code> で設定できる項目のリストについては、<a href="#hibernate-configuration-properties">Hibernate ORM configuration properties</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>Hibernate ORM エクステンションがプロジェクトの依存関係の中に入っていればQuarkus の <code>datasource</code> の設定に基づいて <code>EntityManagerFactory</code> が作成されます。</p>
</div>
<div class="paragraph">
<p>ダイアレクトはデータソースに基づいて自動的に選択および設定されます。
<a href="#hibernate-dialect">configure it to more precisely match your database</a> (データベースにより正確に一致するように設定) することを推奨します。</p>
</div>
<div class="paragraph">
<p>その後、 <code>EntityManager</code> をうまくインジェクションすることができます:</p>
</div>
<div class="listingblock">
<div class="title">Hibernateを使用したアプリケーションBeanの例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class SantaClausService {
    @Inject
    EntityManager em; <i class="conum" data-value="1"></i><b>(1)</b>

    @Transactional <i class="conum" data-value="2"></i><b>(2)</b>
    public void createGift(String giftDescription) {
        Gift gift = new Gift();
        gift.setName(giftDescription);
        em.persist(gift);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>エンティティーマネージャーを注入して楽しむ</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>CDI Beanメソッドに <code>@Transactional</code> を付けると <code>EntityManager</code> がトランザクション境界内に入りコミット時にフラッシュします。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">エンティティーの例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Gift {
    private Long id;
    private String name;

    @Id
    @SequenceGenerator(name = "giftSeq", sequenceName = "gift_id_seq", allocationSize = 1, initialValue = 1)
    @GeneratedValue(generator = "giftSeq")
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hibernate ORMの起動時にSQL文をロードするには、 <code>import.sql</code> ファイルをresourcesディレクトリーのルートに追加します。このスクリプトには、任意のSQL DML文を含めることができます。各ステートメントは必ずセミコロンで終了させてください。</p>
</div>
<div class="paragraph">
<p>テストやデモ用のデータセットを用意しておくと便利です。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
データベースを変更するメソッド (例: <code>entity.persist()</code> ) をトランザクション内でラップするようにしてください。CDI Beanメソッド <code>@Transactional</code> をマークすることで、それを実現出来、そのメソッドをトランザクションの境界に出来ます。REST エンドポイントコントローラーのように、アプリケーションのエントリーポイントの境界でこれを行うことをお勧めします。
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="hibernate-dialect"><a class="anchor" href="#hibernate-dialect"></a>Dialect</h3>
<div class="sect3">
<h4 id="hibernate-dialect-supported-databases"><a class="anchor" href="#hibernate-dialect-supported-databases"></a>サポートされるデータベース</h4>
<div class="paragraph">
<p><a href="datasource#extensions-and-database-drivers-reference">サポートされているデータベース</a> では、 <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#database-dialect">Hibernate ORM ダイアレクト</a> は明示的に設定する必要はありません。</p>
</div>
<div class="paragraph">
<p>デフォルトでは、データベースの最小サポートバージョンをターゲットとするようにdialectが設定されています。</p>
</div>
<div class="paragraph">
<p>Hibernate ORMがより効率的なSQLを生成し、ワークアラウンドを回避し、より多くのデータベース機能を活用するために、データベースバージョンを明示的に設定することができます:</p>
</div>
<div class="listingblock">
<div class="title"><code>db-version</code> を明示した <code>application.properties</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.db-kind = postgresql
quarkus.datasource.db-version = 14.0 <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.datasource.username = hibernate
quarkus.datasource.password = hibernate
quarkus.datasource.jdbc.url = jdbc:postgresql://localhost:5432/hibernate_db</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>データベースのバージョンを設定します。Hibernate ORM dialectはそのバージョンをターゲットにします。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>原則として、ここで設定するバージョンはできるだけ高くする必要がありますが、アプリケーションが接続するデータベースのバージョン以下である必要があります。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>上述したように、このバージョンは <code>quarkus.datasource.db-version</code> 設定プロパティーを介して明示的に事前設定されるか、
または、Quarkus ビルドプロセスによって、データベースのサポートされている最小バージョンに暗黙的に設定されます。
Quarkus は起動時にこの事前設定されたバージョンと実際のデータベースバージョンを比較しようとします。
これにより、実際のバージョンが低い場合に起動に失敗します。</p>
</div>
<div class="paragraph">
<p>これは安全策です。設定されたバージョンよりも古いデータベースを使用すると、
Hibernate ORM が無効な SQL を生成し、実行時例外が発生する可能性があります。</p>
</div>
<div class="paragraph">
<p>データベースにアクセスできない場合は警告が記録されますが、起動は続行されます。
起動時にデータベースにアクセスできないことがわかっている場合は、
<a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-version-check-enabled"><code>quarkus.hibernate-orm.database.version-check.enabled=false</code></a> を使用して、オプションでバージョンチェックを無効化できます。</p>
</div>
<div class="paragraph">
<p>ダイアレクトが明示的に設定されている場合、バージョンチェックはデフォルトで無効化されています。
これは <a href="https://github.com/quarkusio/quarkus/issues/42255">#42255</a>/<a href="https://github.com/quarkusio/quarkus/issues/43703">#43703</a> の回避策です。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="hibernate-dialect-other-databases"><a class="anchor" href="#hibernate-dialect-other-databases"></a>その他のデータベース</h4>
<div class="paragraph">
<p><a href="datasource#other-databases">データベースに対応するQuarkusエクステンションモジュールがない</a> 場合や、何らかの理由でデフォルトがニーズに合わない場合は、明示的に <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#database-dialect">Hibernate ORMダイアレクト</a> を設定する必要があります：</p>
</div>
<div class="listingblock">
<div class="title"><code>dialect</code> を明示した <code>application.properties</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.db-kind = postgresql
quarkus.datasource.username = hibernate
quarkus.datasource.password = hibernate
quarkus.datasource.jdbc.url = jdbc:postgresql://localhost:26257/hibernate_db

quarkus.hibernate-orm.dialect=Cockroach <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Hibernate ORM dialectを設定します。
<div class="paragraph">
<p>組み込みダイアレクトの場合、指定できる値は <a href="https://docs.jboss.org/hibernate/orm/6.6/dialect/dialect.html">ダイアレクトの公式リスト</a> 
にある名前のいずれかで、 <code>Dialect</code> の接尾辞を <strong>除いた</strong> ものです。
たとえば、 <code>CockroachDialect</code> の場合は <code>Cockroach</code> となります。</p>
</div>
<div class="paragraph">
<p>サードパーティーのダイアレクトの場合、期待される値は完全修飾クラス名です。
たとえば <code>com.acme.hibernate.AcmeDbDialect</code> などです。</p>
</div></td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>この場合、JDBCドライバやHibernate ORM dialectがGraalVMネイティブ実行可能ファイルでは正しく動作しない可能性があることに留意してください。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#hibernate-dialect-supported-databases">supported databases</a> と同様に、
Hibernate ORM を最大限に活用するために、DB バージョンを明示的に設定できます。</p>
</div>
<div class="listingblock">
<div class="title"><code>dialect</code> と <code>db-version</code> を明示した <code>application.properties</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.db-kind = postgresql
quarkus.datasource.db-version = 22.2 <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.datasource.username = hibernate
quarkus.datasource.password = hibernate
quarkus.datasource.jdbc.url = jdbc:postgresql://localhost:26257/hibernate_db

quarkus.hibernate-orm.dialect=Cockroach <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>データベースのバージョンを設定します。Hibernate ORM dialectはそのバージョンをターゲットにします。ここではCockroachDBをターゲットにしているので、PostgreSQLのバージョンではなく、CockroachDBのバージョンを渡しています。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Hibernate ORM dialectを設定します。</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="hibernate-dialect-varying-database"><a class="anchor" href="#hibernate-dialect-varying-database"></a>データベースの切り替え</h4>
<div class="paragraph">
<p><a href="#database-approach">database multi-tenancy</a> を有効にすると、
Hibernate ORM は実行時に同じ永続化ユニットに対して複数のデータソースを使用します。
デフォルトでは Quarkus はどのデータソースが使用されるかを判断できません。
そのため、Hibernate ORM で使用するダイアレクトを検出できなくなります。</p>
</div>
<div class="paragraph">
<p>このような理由から、<a href="#database-approach">database multi-tenancy</a> を有効化する場合は、
実行時に使用されるデータソースの中から 1 つを Hibernate ORM の設定で明示的に
指定することを推奨します。たとえば、 <code>quarkus.hibernate-orm.datasource=base</code> (<code>base</code> はデータソースの名前) 
などのように指定します。</p>
</div>
<div class="paragraph">
<p>これを実行すると、Quarkus はそのデータソースからデータベースのバージョンと (可能な場合) ダイアレクトを推測します。
サポートされていないデータベースの場合は、<a href="#hibernate-dialect-other-databases">this section</a> で説明したように、
Hibernate ORM ダイアレクトを明示的に設定する必要がある場合があります。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hibernate-configuration-properties"><a class="anchor" href="#hibernate-configuration-properties"></a>Hibernate ORMの設定プロパティ</h3>
<div class="paragraph">
<p><code>EntityManagerFactory</code> を改良したり、Quarkusの推測を導くのに便利な様々なオプションのプロパティがあります。</p>
</div>
<div class="paragraph">
<p>デフォルトのデータソースが設定されていれば、それ以外に必須のプロパティはありません。</p>
</div>
<div class="paragraph">
<p>プロパティが設定されていない場合、Quarkusは通常はHibernate ORMのセットアップに必要な値を推測し、デフォルトのデータソースを使用するようにします。</p>
</div>
<div class="paragraph">
<p>ここに記載されている設定プロパティーでは、このようなデフォルトを上書きしたり、様々な面をカスタマイズしたり調整したりすることができます。</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span>ビルド時に固定される設定プロパティ - 他のすべての設定プロパティは実行時にオーバーライド可能 <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-enabled"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-enabled"><code>quarkus.hibernate-orm.enabled</code></a></span></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether Hibernate ORM is enabled <strong>during the build</strong>.</p>
</div>
<div class="paragraph">
<p>If Hibernate ORM is disabled during the build, all processing related to Hibernate ORM will be skipped,
but it will not be possible to activate Hibernate ORM at runtime:
<code>quarkus.hibernate-orm.active</code> will default to <code>false</code> and setting it to <code>true</code> will lead to an error.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29282">QUARKUS_HIBERNATE_ORM_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29282" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-persistence-xml-ignore"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-persistence-xml-ignore"><code>quarkus.hibernate-orm.persistence-xml.ignore</code></a></span></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If <code>true</code>, Quarkus will ignore any <code>persistence.xml</code> file in the classpath and rely exclusively on the Quarkus configuration.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29283">QUARKUS_HIBERNATE_ORM_PERSISTENCE_XML_IGNORE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29283" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-statistics"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-statistics"><code>quarkus.hibernate-orm.statistics</code></a></span></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether statistics collection is enabled. If 'metrics.enabled' is true, then the default here is considered true, otherwise the default is false.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29284">QUARKUS_HIBERNATE_ORM_STATISTICS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29284" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-session-metrics"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-session-metrics"><code>quarkus.hibernate-orm.log-session-metrics</code></a></span></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether session metrics should be appended into the server log for each Hibernate session. This only has effect if statistics are enabled (<code>quarkus.hibernate-orm.statistics</code>). The default is false (which means both <code>statistics</code> and <code>log-session-metrics</code> need to be enabled for the session metrics to appear in the log).</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29285">QUARKUS_HIBERNATE_ORM_LOG_SESSION_METRICS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29285" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-metrics-enabled"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-metrics-enabled"><code>quarkus.hibernate-orm.metrics.enabled</code></a></span></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether metrics are published if a metrics extension is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29286">QUARKUS_HIBERNATE_ORM_METRICS_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29286" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-datasource"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-datasource"><code>quarkus.hibernate-orm.datasource</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".datasource</code></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The name of the datasource which this persistence unit uses.</p>
</div>
<div class="paragraph">
<p>If undefined, it will use the default datasource.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29287">QUARKUS_HIBERNATE_ORM_DATASOURCE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29287" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-packages"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-packages"><code>quarkus.hibernate-orm.packages</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".packages</code></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The packages in which the entities affected to this persistence unit are located.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29288">QUARKUS_HIBERNATE_ORM_PACKAGES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29288" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-sql-load-script"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-sql-load-script"><code>quarkus.hibernate-orm.sql-load-script</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".sql-load-script</code></p>
</div>
<div id="conf-collapsible-desc-8" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Paths to files containing the SQL statements to execute when Hibernate ORM starts.</p>
</div>
<div class="paragraph">
<p>The files are retrieved from the classpath resources,
so they must be located in the resources directory (e.g. <code>src/main/resources</code>).</p>
</div>
<div class="paragraph">
<p>The default value for this setting differs depending on the Quarkus launch mode:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In dev and test modes, it defaults to <code>import.sql</code>.
Simply add an <code>import.sql</code> file in the root of your resources directory
and it will be picked up without having to set this property.
Pass <code>no-file</code> to force Hibernate ORM to ignore the SQL import file.</p>
</li>
<li>
<p>In production mode, it defaults to <code>no-file</code>.
It means Hibernate ORM won&#8217;t try to execute any SQL import file by default.
Pass an explicit value to force Hibernate ORM to execute the SQL import file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you need different SQL statements between dev mode, test (<code>@QuarkusTest</code>) and in production, use Quarkus
<a href="https://quarkus.io/guides/config#configuration-profiles">configuration profiles facility</a>.</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-property hljs" data-lang="property">%dev.quarkus.hibernate-orm.sql-load-script = import-dev.sql
%test.quarkus.hibernate-orm.sql-load-script = import-test.sql
%prod.quarkus.hibernate-orm.sql-load-script = no-file</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Quarkus supports <code>.sql</code> file with SQL statements or comments spread over multiple lines.
Each SQL statement must be terminated by a semicolon.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29289">QUARKUS_HIBERNATE_ORM_SQL_LOAD_SCRIPT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29289" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>import.sql in dev and test modes ; no-file otherwise</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-physical-naming-strategy"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-physical-naming-strategy"><code>quarkus.hibernate-orm.physical-naming-strategy</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".physical-naming-strategy</code></p>
</div>
<div id="conf-collapsible-desc-9" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Pluggable strategy contract for applying physical naming rules for database object names. Class name of the Hibernate PhysicalNamingStrategy implementation</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29290">QUARKUS_HIBERNATE_ORM_PHYSICAL_NAMING_STRATEGY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29290" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-implicit-naming-strategy"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-implicit-naming-strategy"><code>quarkus.hibernate-orm.implicit-naming-strategy</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".implicit-naming-strategy</code></p>
</div>
<div id="conf-collapsible-desc-10" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Pluggable strategy for applying implicit naming rules when an explicit name is not given. Class name of the Hibernate ImplicitNamingStrategy implementation</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29291">QUARKUS_HIBERNATE_ORM_IMPLICIT_NAMING_STRATEGY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29291" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-metadata-builder-contributor"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-metadata-builder-contributor"><code>quarkus.hibernate-orm.metadata-builder-contributor</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".metadata-builder-contributor</code></p>
</div>
<div id="conf-collapsible-desc-11" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Class name of a custom
<a href="https://docs.jboss.org/hibernate/stable/orm/javadocs/org/hibernate/boot/spi/MetadataBuilderContributor.html"><code>org.hibernate.boot.spi.MetadataBuilderContributor</code></a>
implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Not all customization options exposed by
<a href="https://docs.jboss.org/hibernate/stable/orm/javadocs/org/hibernate/boot/MetadataBuilder.html"><code>org.hibernate.boot.MetadataBuilder</code></a>
will work correctly. Stay clear of options related to classpath scanning in particular.</p>
</div>
<div class="paragraph">
<p>This setting is exposed mainly to allow registration of types, converters and SQL functions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29292">QUARKUS_HIBERNATE_ORM_METADATA_BUILDER_CONTRIBUTOR</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29292" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-files"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-files"><code>quarkus.hibernate-orm.mapping-files</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".mapping-files</code></p>
</div>
<div id="conf-collapsible-desc-12" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>XML files to configure the entity mapping, e.g. <code>META-INF/my-orm.xml</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>META-INF/orm.xml</code> if it exists. Pass <code>no-file</code> to force Hibernate ORM to ignore <code>META-INF/orm.xml</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29293">QUARKUS_HIBERNATE_ORM_MAPPING_FILES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29293" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>META-INF/orm.xml if it exists; no-file otherwise</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-quote-identifiers-strategy"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-quote-identifiers-strategy"><code>quarkus.hibernate-orm.quote-identifiers.strategy</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".quote-identifiers.strategy</code></p>
</div>
<div id="conf-collapsible-desc-13" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Identifiers can be quoted using one of the available strategies.</p>
</div>
<div class="paragraph">
<p>Set to <code>none</code> by default, meaning no identifiers will be quoted. If set to <code>all</code>, all identifiers and column definitions will be quoted. Additionally, setting it to <code>all-except-column-definitions</code> will skip the column definitions, which can usually be required when they exist, or else use the option <code>only-keywords</code> to quote only identifiers deemed SQL keywords by the Hibernate ORM dialect.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29294">QUARKUS_HIBERNATE_ORM_QUOTE_IDENTIFIERS_STRATEGY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29294" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>none</code>, <code>all</code>, <code>all-except-column-definitions</code>, <code>only-keywords</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>none</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-second-level-caching-enabled"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-second-level-caching-enabled"><code>quarkus.hibernate-orm.second-level-caching-enabled</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".second-level-caching-enabled</code></p>
</div>
<div id="conf-collapsible-desc-14" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The default in Quarkus is for 2nd level caching to be enabled, and a good implementation is already integrated for you.</p>
</div>
<div class="paragraph">
<p>Just cherry-pick which entities should be using the cache.</p>
</div>
<div class="paragraph">
<p>Set this to false to disable all 2nd level caches.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29295">QUARKUS_HIBERNATE_ORM_SECOND_LEVEL_CACHING_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29295" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-validation-enabled"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-validation-enabled"><code>quarkus.hibernate-orm.validation.enabled</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".validation.enabled</code></p>
</div>
<div id="conf-collapsible-desc-15" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Enables the Bean Validation integration.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29296">QUARKUS_HIBERNATE_ORM_VALIDATION_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29296" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-multitenant"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-multitenant"><code>quarkus.hibernate-orm.multitenant</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".multitenant</code></p>
</div>
<div id="conf-collapsible-desc-16" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Defines the method for multi-tenancy (DATABASE, NONE, SCHEMA). The complete list of allowed values is available in the
<a href="https://javadoc.io/doc/org.hibernate/hibernate-core/5.6.10.Final/org/hibernate/MultiTenancyStrategy.html">Hibernate ORM
JavaDoc</a>.
The type DISCRIMINATOR is currently not supported. The default value is NONE (no multi-tenancy).</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29297">QUARKUS_HIBERNATE_ORM_MULTITENANT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29297" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-validate-in-dev-mode"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-validate-in-dev-mode"><code>quarkus.hibernate-orm.validate-in-dev-mode</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".validate-in-dev-mode</code></p>
</div>
<div id="conf-collapsible-desc-17" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If hibernate is not auto generating the schema, and Quarkus is running in development mode then Quarkus will attempt to validate the database after startup and print a log message if there are any problems.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29298">QUARKUS_HIBERNATE_ORM_VALIDATE_IN_DEV_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29298" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-active"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-active"><code>quarkus.hibernate-orm.active</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".active</code></p>
</div>
<div id="conf-collapsible-desc-18" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether this persistence unit should be active at runtime.</p>
</div>
<div class="paragraph">
<p>See <a href="#persistence-unit-active">this section of the documentation</a>.</p>
</div>
<div class="paragraph">
<p>If the persistence unit is not active, it won&#8217;t start with the application,
and accessing the corresponding EntityManagerFactory/EntityManager or SessionFactory/Session
will not be possible.</p>
</div>
<div class="paragraph">
<p>Note that if Hibernate ORM is disabled (i.e. <code>quarkus.hibernate-orm.enabled</code> is set to <code>false</code>),
all persistence units are deactivated, and setting this property to <code>true</code> will fail.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29299">QUARKUS_HIBERNATE_ORM_ACTIVE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29299" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>'true' if Hibernate ORM is enabled; 'false' otherwise</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-unsupported-properties-full-property-key"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-unsupported-properties-full-property-key"><code>quarkus.hibernate-orm.unsupported-properties."full-property-key"</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".unsupported-properties."full-property-key"</code></p>
</div>
<div id="conf-collapsible-desc-19" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Properties that should be passed on directly to Hibernate ORM.
Use the full configuration property key here,
for instance <code>quarkus.hibernate-orm.unsupported-properties."hibernate.order_inserts" = true</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Properties set here are completely unsupported:
as Quarkus doesn&#8217;t generally know about these properties and their purpose,
there is absolutely no guarantee that they will work correctly,
and even if they do, that may change when upgrading to a newer version of Quarkus
(even just a micro/patch version).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Consider using a supported configuration property before falling back to unsupported ones.
If none exists, make sure to file a feature request so that a supported configuration property can be added to Quarkus,
and more importantly so that the configuration property is tested regularly.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29300">QUARKUS_HIBERNATE_ORM_UNSUPPORTED_PROPERTIES__FULL_PROPERTY_KEY_</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29300" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Map&lt;String,String&gt;</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-database"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-database">Database related configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-orm-compatibility-version"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-orm-compatibility-version"><code>quarkus.hibernate-orm.database.orm-compatibility.version</code></a></span></p>
</div>
<div id="conf-collapsible-desc-20" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>When set, attempts to exchange data with the database
as the given version of Hibernate ORM would have,
<strong>on a best-effort basis</strong>.</p>
</div>
<div class="paragraph">
<p>Please note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>schema validation may still fail in some cases:
this attempts to make Hibernate ORM 6+ behave correctly at runtime,
but it may still expect a different (but runtime-compatible) schema.</p>
</li>
<li>
<p>robust test suites are still useful and recommended:
you should still check that your application behaves as intended with your legacy schema.</p>
</li>
<li>
<p>this feature is inherently unstable:
some aspects of it may stop working in future versions of Quarkus,
and older versions will be dropped as Hibernate ORM changes pile up
and support for those older versions becomes too unreliable.</p>
</li>
<li>
<p>you should still plan a migration of your schema to a newer version of Hibernate ORM.
For help with migration, refer to
<a href="https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0:-Hibernate-ORM-5-to-6-migration">the Quarkus 3
migration guide from Hibernate ORM 5 to 6</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29301">QUARKUS_HIBERNATE_ORM_DATABASE_ORM_COMPATIBILITY_VERSION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29301" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>5.6</code>, <code>latest</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>latest</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-charset"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-charset"><code>quarkus.hibernate-orm.database.charset</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.charset</code></p>
</div>
<div id="conf-collapsible-desc-21" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The charset of the database.</p>
</div>
<div class="paragraph">
<p>Used for DDL generation and also for the SQL import scripts.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29302">QUARKUS_HIBERNATE_ORM_DATABASE_CHARSET</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29302" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/Charset.html">Charset</a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>UTF-8</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-generation"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-generation"><code>quarkus.hibernate-orm.database.generation</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.generation</code></p>
</div>
<div id="conf-collapsible-desc-22" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Select whether the database schema is generated or not. <code>drop-and-create</code> is awesome in development mode. This defaults to 'none', however if Dev Services is in use and no other extensions that manage the schema are present this will default to 'drop-and-create'. Accepted values: <code>none</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop</code>, <code>update</code>, <code>validate</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29303">QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29303" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>none</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-generation-create-schemas"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-generation-create-schemas"><code>quarkus.hibernate-orm.database.generation.create-schemas</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.generation.create-schemas</code></p>
</div>
<div id="conf-collapsible-desc-23" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If Hibernate ORM should create the schemas automatically (for databases supporting them).</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29304">QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION_CREATE_SCHEMAS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29304" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-generation-halt-on-error"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-generation-halt-on-error"><code>quarkus.hibernate-orm.database.generation.halt-on-error</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.generation.halt-on-error</code></p>
</div>
<div id="conf-collapsible-desc-24" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether we should stop on the first error when applying the schema.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29305">QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION_HALT_ON_ERROR</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29305" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-default-catalog"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-default-catalog"><code>quarkus.hibernate-orm.database.default-catalog</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.default-catalog</code></p>
</div>
<div id="conf-collapsible-desc-25" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The default catalog to use for the database objects.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29306">QUARKUS_HIBERNATE_ORM_DATABASE_DEFAULT_CATALOG</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29306" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-default-schema"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-default-schema"><code>quarkus.hibernate-orm.database.default-schema</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.default-schema</code></p>
</div>
<div id="conf-collapsible-desc-26" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The default schema to use for the database objects.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29307">QUARKUS_HIBERNATE_ORM_DATABASE_DEFAULT_SCHEMA</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29307" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-database-version-check-enabled"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-database-version-check-enabled"><code>quarkus.hibernate-orm.database.version-check.enabled</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".database.version-check.enabled</code></p>
</div>
<div id="conf-collapsible-desc-27" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether Hibernate ORM should check on startup
that the version of the database matches the version configured on the dialect
(either the default version, or the one set through <code>quarkus.datasource.db-version</code>).</p>
</div>
<div class="paragraph">
<p>This should be set to <code>false</code> if the database is not available on startup.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29308">QUARKUS_HIBERNATE_ORM_DATABASE_VERSION_CHECK_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29308" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>`true</code> if the dialect was set automatically by Quarkus, <code>false</code> if it was set explicitly`</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-dialect"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-dialect">Dialect related configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-dialect"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-dialect"><code>quarkus.hibernate-orm.dialect</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".dialect</code></p>
</div>
<div id="conf-collapsible-desc-28" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Name of the Hibernate ORM dialect.</p>
</div>
<div class="paragraph">
<p>For <a href="datasource#extensions-and-database-drivers-reference">supported databases</a>,
this property does not need to be set explicitly:
it is selected automatically based on the datasource,
and configured using the <a href="datasource#quarkus-datasource_quarkus.datasource.db-version">DB version set on the
datasource</a>
to benefit from the best performance and latest features.</p>
</div>
<div class="paragraph">
<p>If your database does not have a corresponding Quarkus extension,
you <strong>will</strong> need to set this property explicitly.
In that case, keep in mind that the JDBC driver and Hibernate ORM dialect
may not work properly in GraalVM native executables.</p>
</div>
<div class="paragraph">
<p>For built-in dialects, the expected value is one of the names
in the <a href="https://docs.jboss.org/hibernate/orm/6.6/dialect/dialect.html">official list of dialects</a>,
<strong>without</strong> the <code>Dialect</code> suffix,
for example <code>Cockroach</code> for <code>CockroachDialect</code>.</p>
</div>
<div class="paragraph">
<p>For third-party dialects, the expected value is the fully-qualified class name,
for example <code>com.acme.hibernate.AcmeDbDialect</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29309">QUARKUS_HIBERNATE_ORM_DIALECT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29309" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>selected automatically for most popular databases</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-dialect-storage-engine"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-dialect-storage-engine"><code>quarkus.hibernate-orm.dialect.storage-engine</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".dialect.storage-engine</code></p>
</div>
<div id="conf-collapsible-desc-29" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The storage engine to use when the dialect supports multiple storage engines.</p>
</div>
<div class="paragraph">
<p>E.g. <code>MyISAM</code> or <code>InnoDB</code> for MySQL.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29310">QUARKUS_HIBERNATE_ORM_DIALECT_STORAGE_ENGINE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29310" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-mapping"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-mapping">Mapping configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-timezone-default-storage"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-timezone-default-storage"><code>quarkus.hibernate-orm.mapping.timezone.default-storage</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".mapping.timezone.default-storage</code></p>
</div>
<div id="conf-collapsible-desc-30" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>How to store timezones in the database by default
for properties of type <code>OffsetDateTime</code> and <code>ZonedDateTime</code>.</p>
</div>
<div class="paragraph">
<p>This default may be overridden on a per-property basis using <code>@TimeZoneStorage</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties of type <code>OffsetTime</code> are <a href="https://hibernate.atlassian.net/browse/HHH-16287">not affected by this
setting</a>.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>default</code></dt>
<dd>
<p>Equivalent to <code>native</code> if supported, <code>normalize-utc</code> otherwise.</p>
</dd>
<dt class="hdlist1"><code>auto</code></dt>
<dd>
<p>Equivalent to <code>native</code> if supported, <code>column</code> otherwise.</p>
</dd>
<dt class="hdlist1"><code>native</code></dt>
<dd>
<p>Stores the timestamp and timezone in a column of type <code>timestamp with time zone</code>.</p>
<div class="paragraph">
<p>Only available on some databases/dialects;
if not supported, an exception will be thrown during static initialization.</p>
</div>
</dd>
<dt class="hdlist1"><code>column</code></dt>
<dd>
<p>Stores the timezone in a separate column next to the timestamp column.</p>
<div class="paragraph">
<p>Use <code>@TimeZoneColumn</code> on the relevant entity property to customize the timezone column.</p>
</div>
</dd>
<dt class="hdlist1"><code>normalize-utc</code></dt>
<dd>
<p>Does not store the timezone, and loses timezone information upon persisting.</p>
<div class="paragraph">
<p>Instead, normalizes the value to a timestamp in the UTC timezone.</p>
</div>
</dd>
<dt class="hdlist1"><code>normalize</code></dt>
<dd>
<p>Does not store the timezone, and loses timezone information upon persisting.</p>
<div class="paragraph">
<p>Instead, normalizes the value:
* upon persisting to the database, to a timestamp in the JDBC timezone
set through <code>quarkus.hibernate-orm.jdbc.timezone</code>,
or the JVM default timezone if not set.
* upon reading back from the database, to the JVM default timezone.</p>
</div>
<div class="paragraph">
<p>+
Use this to get the legacy behavior of Quarkus 2 / Hibernate ORM 5 or older.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29311">QUARKUS_HIBERNATE_ORM_MAPPING_TIMEZONE_DEFAULT_STORAGE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29311" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>native</code>, <code>normalize</code>, <code>normalize-utc</code>, <code>column</code>, <code>auto</code>, <code>default</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>default</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-id-optimizer-default"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-id-optimizer-default"><code>quarkus.hibernate-orm.mapping.id.optimizer.default</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".mapping.id.optimizer.default</code></p>
</div>
<div id="conf-collapsible-desc-31" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The optimizer to apply to identifier generators
whose optimizer is not configured explicitly.</p>
</div>
<div class="paragraph">
<p>Only relevant for table- and sequence-based identifier generators.
Other generators, such as UUID-based generators, will ignore this setting.</p>
</div>
<div class="paragraph">
<p>The optimizer is responsible for pooling new identifier values,
in order to reduce the frequency of database calls to retrieve those values
and thereby improve performance.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29312">QUARKUS_HIBERNATE_ORM_MAPPING_ID_OPTIMIZER_DEFAULT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29312" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><span class="asciidoc-tooltip-wrapper"><code>pooled-lo</code><span class="asciidoc-tooltip">Assumes the value retrieved from the table/sequence is the lower end of the pool.  Upon retrieving value <code>N</code>, the new pool of identifiers will go from <code>N</code> to <code>N + &lt;allocation size&gt; - 1</code>, inclusive.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>pooled</code><span class="asciidoc-tooltip">Assumes the value retrieved from the table/sequence is the higher end of the pool.  Upon retrieving value <code>N</code>, the new pool of identifiers will go from <code>N - &lt;allocation size&gt;</code> to <code>N + &lt;allocation size&gt; - 1</code>, inclusive.  The first value, <code>1</code>, is handled differently to avoid negative identifiers.  Use this to get the legacy behavior of Quarkus 2 / Hibernate ORM 5 or older.</span></span>, <span class="asciidoc-tooltip-wrapper"><code>none</code><span class="asciidoc-tooltip">No optimizer, resulting in a database call each and every time an identifier value is needed from the generator.  Not recommended in production environments\: may result in degraded performance and/or frequent gaps in identifier values.</span></span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><span class="asciidoc-tooltip-wrapper"><code>pooled-lo</code><span class="asciidoc-tooltip">Assumes the value retrieved from the table/sequence is the lower end of the pool.  Upon retrieving value <code>N</code>, the new pool of identifiers will go from <code>N</code> to <code>N + &lt;allocation size&gt; - 1</code>, inclusive.</span></span></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-query"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-query">Query related configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-query-query-plan-cache-max-size"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-query-query-plan-cache-max-size"><code>quarkus.hibernate-orm.query.query-plan-cache-max-size</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".query.query-plan-cache-max-size</code></p>
</div>
<div id="conf-collapsible-desc-32" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum size of the query plan cache. see #<code>org.hibernate.cfg.AvailableSettings#QUERY_PLAN_CACHE_MAX_SIZE</code></p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29313">QUARKUS_HIBERNATE_ORM_QUERY_QUERY_PLAN_CACHE_MAX_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29313" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2048</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-query-default-null-ordering"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-query-default-null-ordering"><code>quarkus.hibernate-orm.query.default-null-ordering</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".query.default-null-ordering</code></p>
</div>
<div id="conf-collapsible-desc-33" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Default precedence of null values in <code>ORDER BY</code> clauses.</p>
</div>
<div class="paragraph">
<p>Valid values are: <code>none</code>, <code>first</code>, <code>last</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29314">QUARKUS_HIBERNATE_ORM_QUERY_DEFAULT_NULL_ORDERING</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29314" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>none</code>, <code>first</code>, <code>last</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>none</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-query-in-clause-parameter-padding"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-query-in-clause-parameter-padding"><code>quarkus.hibernate-orm.query.in-clause-parameter-padding</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".query.in-clause-parameter-padding</code></p>
</div>
<div id="conf-collapsible-desc-34" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Enables IN clause parameter padding which improves statement caching.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29315">QUARKUS_HIBERNATE_ORM_QUERY_IN_CLAUSE_PARAMETER_PADDING</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29315" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-jdbc"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-jdbc">JDBC related configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-jdbc-timezone"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-jdbc-timezone"><code>quarkus.hibernate-orm.jdbc.timezone</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".jdbc.timezone</code></p>
</div>
<div id="conf-collapsible-desc-35" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The time zone pushed to the JDBC driver. See <code>quarkus.hibernate-orm.mapping.timezone.default-storage</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29316">QUARKUS_HIBERNATE_ORM_JDBC_TIMEZONE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29316" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-jdbc-statement-fetch-size"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-jdbc-statement-fetch-size"><code>quarkus.hibernate-orm.jdbc.statement-fetch-size</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".jdbc.statement-fetch-size</code></p>
</div>
<div id="conf-collapsible-desc-36" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>How many rows are fetched at a time by the JDBC driver.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29317">QUARKUS_HIBERNATE_ORM_JDBC_STATEMENT_FETCH_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29317" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-jdbc-statement-batch-size"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-jdbc-statement-batch-size"><code>quarkus.hibernate-orm.jdbc.statement-batch-size</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".jdbc.statement-batch-size</code></p>
</div>
<div id="conf-collapsible-desc-37" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The number of updates (inserts, updates and deletes) that are sent by the JDBC driver at one time for execution.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29318">QUARKUS_HIBERNATE_ORM_JDBC_STATEMENT_BATCH_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29318" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-fetch"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-fetch">Fetching logic configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-fetch-batch-size"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-fetch-batch-size"><code>quarkus.hibernate-orm.fetch.batch-size</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".fetch.batch-size</code></p>
</div>
<div id="conf-collapsible-desc-38" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The size of the batches used when loading entities and collections.</p>
</div>
<div class="paragraph">
<p><code>-1</code> means batch loading is disabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29319">QUARKUS_HIBERNATE_ORM_FETCH_BATCH_SIZE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29319" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>16</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-fetch-max-depth"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-fetch-max-depth"><code>quarkus.hibernate-orm.fetch.max-depth</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".fetch.max-depth</code></p>
</div>
<div id="conf-collapsible-desc-39" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum depth of outer join fetch tree for single-ended associations (one-to-one, many-to-one).</p>
</div>
<div class="paragraph">
<p>A <code>0</code> disables default outer join fetching.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29320">QUARKUS_HIBERNATE_ORM_FETCH_MAX_DEPTH</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29320" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-cache"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-cache">Caching configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-cache-cache-expiration-max-idle"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-cache-cache-expiration-max-idle"><code>quarkus.hibernate-orm.cache."cache".expiration.max-idle</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".cache."cache".expiration.max-idle</code></p>
</div>
<div id="conf-collapsible-desc-40" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum time before an object of the cache is considered expired.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29321">QUARKUS_HIBERNATE_ORM_CACHE__CACHE__EXPIRATION_MAX_IDLE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29321" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html">Duration</a> <a href="#duration-note-anchor-{summaryTableId}"><span class="icon"><i class="fa fa-question-circle" title="More information about the Duration format"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-cache-cache-memory-object-count"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-cache-cache-memory-object-count"><code>quarkus.hibernate-orm.cache."cache".memory.object-count</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".cache."cache".memory.object-count</code></p>
</div>
<div id="conf-collapsible-desc-41" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maximum number of objects kept in memory in the cache.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29322">QUARKUS_HIBERNATE_ORM_CACHE__CACHE__MEMORY_OBJECT_COUNT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29322" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-discriminator"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-discriminator">Discriminator related configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-discriminator-ignore-explicit-for-joined"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-discriminator-ignore-explicit-for-joined"><code>quarkus.hibernate-orm.discriminator.ignore-explicit-for-joined</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".discriminator.ignore-explicit-for-joined</code></p>
</div>
<div id="conf-collapsible-desc-42" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Existing applications rely (implicitly or explicitly) on Hibernate ignoring any DiscriminatorColumn declarations on joined inheritance hierarchies. This setting allows these applications to maintain the legacy behavior of DiscriminatorColumn annotations being ignored when paired with joined inheritance.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29323">QUARKUS_HIBERNATE_ORM_DISCRIMINATOR_IGNORE_EXPLICIT_FOR_JOINED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29323" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-log"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-log">Logging configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-bind-parameters"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-bind-parameters"><code>quarkus.hibernate-orm.log.bind-parameters</code></a></span></p>
</div>
<div id="conf-collapsible-desc-43" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Logs SQL bind parameters.</p>
</div>
<div class="paragraph">
<p>Setting it to true is obviously not recommended in production.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29324">QUARKUS_HIBERNATE_ORM_LOG_BIND_PARAMETERS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29324" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-sql"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-sql"><code>quarkus.hibernate-orm.log.sql</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".log.sql</code></p>
</div>
<div id="conf-collapsible-desc-44" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Show SQL logs and format them nicely.</p>
</div>
<div class="paragraph">
<p>Setting it to true is obviously not recommended in production.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29325">QUARKUS_HIBERNATE_ORM_LOG_SQL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29325" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-format-sql"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-format-sql"><code>quarkus.hibernate-orm.log.format-sql</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".log.format-sql</code></p>
</div>
<div id="conf-collapsible-desc-45" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Format the SQL logs if SQL log is enabled</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29326">QUARKUS_HIBERNATE_ORM_LOG_FORMAT_SQL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29326" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-highlight-sql"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-highlight-sql"><code>quarkus.hibernate-orm.log.highlight-sql</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".log.highlight-sql</code></p>
</div>
<div id="conf-collapsible-desc-46" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Highlight the SQL logs if SQL log is enabled</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29327">QUARKUS_HIBERNATE_ORM_LOG_HIGHLIGHT_SQL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29327" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-jdbc-warnings"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-jdbc-warnings"><code>quarkus.hibernate-orm.log.jdbc-warnings</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".log.jdbc-warnings</code></p>
</div>
<div id="conf-collapsible-desc-47" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether JDBC warnings should be collected and logged.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29328">QUARKUS_HIBERNATE_ORM_LOG_JDBC_WARNINGS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29328" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>depends on dialect</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-log-queries-slower-than-ms"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-log-queries-slower-than-ms"><code>quarkus.hibernate-orm.log.queries-slower-than-ms</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".log.queries-slower-than-ms</code></p>
</div>
<div id="conf-collapsible-desc-48" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set, Hibernate will log queries that took more than specified number of milliseconds to execute.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29329">QUARKUS_HIBERNATE_ORM_LOG_QUERIES_SLOWER_THAN_MS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29329" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-scripts"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-scripts">Database scripts related configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-scripts-generation"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-scripts-generation"><code>quarkus.hibernate-orm.scripts.generation</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".scripts.generation</code></p>
</div>
<div id="conf-collapsible-desc-49" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Select whether the database schema DDL files are generated or not. Accepted values: <code>none</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop</code>, <code>update</code>, <code>validate</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29330">QUARKUS_HIBERNATE_ORM_SCRIPTS_GENERATION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29330" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>none</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-scripts-generation-create-target"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-scripts-generation-create-target"><code>quarkus.hibernate-orm.scripts.generation.create-target</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".scripts.generation.create-target</code></p>
</div>
<div id="conf-collapsible-desc-50" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Filename or URL where the database create DDL file should be generated.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29331">QUARKUS_HIBERNATE_ORM_SCRIPTS_GENERATION_CREATE_TARGET</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29331" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-scripts-generation-drop-target"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-scripts-generation-drop-target"><code>quarkus.hibernate-orm.scripts.generation.drop-target</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".scripts.generation.drop-target</code></p>
</div>
<div id="conf-collapsible-desc-51" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Filename or URL where the database drop DDL file should be generated.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29332">QUARKUS_HIBERNATE_ORM_SCRIPTS_GENERATION_DROP_TARGET</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29332" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-orm_section_quarkus-hibernate-orm-flush"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-orm_section_quarkus-hibernate-orm-flush">Flush configuration</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc row-hidden">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><a id="quarkus-hibernate-orm_quarkus-hibernate-orm-flush-mode"></a> <span class="property-path"><a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-flush-mode"><code>quarkus.hibernate-orm.flush.mode</code></a></span></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."persistence-unit-name".flush.mode</code></p>
</div>
<div id="conf-collapsible-desc-52" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The default flushing strategy, or when to flush entities to the database in a Hibernate session:
before every query, on commit, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>This default can be overridden on a per-session basis with <code>Session#setHibernateFlushMode()</code>
or on a per-query basis with the hint <code>HibernateHints#HINT_FLUSH_MODE</code>.</p>
</div>
<div class="paragraph">
<p>See the javadoc of <code>org.hibernate.FlushMode</code> for details.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-29333">QUARKUS_HIBERNATE_ORM_FLUSH_MODE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-29333" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>manual</code>, <code>commit</code>, <code>auto</code>, <code>always</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>auto</code></p></td>
</tr>
</tbody>
</table>
<div id="duration-note-anchor-quarkus-hibernate-orm_quarkus-hibernate-orm" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">期間フォーマットについて</div>
<div class="paragraph">
<p>期間の値を書くには、標準の <code>java.time.Duration</code> フォーマットを使います。
詳細は <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html#parse(java.lang.CharSequence)">Duration#parse() Java API documentation</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>数字で始まる簡略化した書式を使うこともできます:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数値のみの場合は、秒単位の時間を表します。</p>
</li>
<li>
<p>数値の後に <code>ms</code> が続く場合は、ミリ秒単位の時間を表します。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>その他の場合は、簡略化されたフォーマットが解析のために <code>java.time.Duration</code> フォーマットに変換されます：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数値の後に <code>h</code> 、 <code>m</code> 、 <code>s</code> が続く場合は、その前に <code>PT</code> が付けられます。</p>
</li>
<li>
<p>数値の後に <code>d</code> が続く場合は、その前に <code>P</code> が付けられます。</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>application.properties</code> 内で <a href="#persistence-xml"><code>persistence.xml</code></a> と <code>quarkus.hibernate-orm.*</code> プロパティーを混在させないでください。
Quarkus は例外をスローします。
どちらの方法を採用するか決めてください。</p>
</div>
<div class="paragraph">
<p>クラスパスに無視したい <code>persistence.xml</code> がある場合は、次の設定プロパティを設定してください:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.persistence-xml.ignore=true</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>PostgreSQLサーバをDockerで起動したいですか？</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --rm=true --name postgres-quarkus-hibernate -e POSTGRES_USER=hibernate \
           -e POSTGRES_PASSWORD=hibernate -e POSTGRES_DB=hibernate_db \
           -p 5432:5432 postgres:14.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは、永続化されない空のデータベースを起動します。簡単な実験に最適です!</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="multiple-persistence-units"><a class="anchor" href="#multiple-persistence-units"></a>複数の永続性ユニット</h3>
<div class="sect3">
<h4 id="setting-up-multiple-persistence-units"><a class="anchor" href="#setting-up-multiple-persistence-units"></a>複数の永続化ユニットの設定</h4>
<div class="paragraph">
<p>Quarkusの設定プロパティーを使用して、複数の永続化ユニットを定義することができます。</p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm.</code> 名前空間のルートにあるプロパティで、デフォルトの永続化ユニットを定義します。例えば、次のスニペットではデフォルトのデータソースとデフォルトの永続化ユニットを定義しています:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:default;DB_CLOSE_DELAY=-1

quarkus.hibernate-orm.database.generation=drop-and-create</code></pre>
</div>
</div>
<div class="paragraph">
<p>マップをベースにした方法で名前付きの永続化ユニットを定義することができます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource."users".db-kind=h2 <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.datasource."users".jdbc.url=jdbc:h2:mem:users;DB_CLOSE_DELAY=-1

quarkus.datasource."inventory".db-kind=h2 <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.datasource."inventory".jdbc.url=jdbc:h2:mem:inventory;DB_CLOSE_DELAY=-1

quarkus.hibernate-orm."users".database.generation=drop-and-create <i class="conum" data-value="3"></i><b>(3)</b>
quarkus.hibernate-orm."users".datasource=users <i class="conum" data-value="4"></i><b>(4)</b>
quarkus.hibernate-orm."users".packages=org.acme.model.user <i class="conum" data-value="5"></i><b>(5)</b>

quarkus.hibernate-orm."inventory".database.generation=drop-and-create <i class="conum" data-value="6"></i><b>(6)</b>
quarkus.hibernate-orm."inventory".datasource=inventory
quarkus.hibernate-orm."inventory".packages=org.acme.model.inventory</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>users</code> という名前のデータソースを定義します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>inventory</code> という名前のデータソースを定義します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>users</code> という永続化ユニットを定義します。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>永続性ユニットが使用するデータソースを定義します。</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>この設定プロパティは重要ですが、説明は少し後になります。</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><code>users</code> という永続化ユニットを定義します。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>デフォルトデータソースと名前付きデータソースを混在させることも、どちらか一方だけにすることもできます。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>デフォルトの永続化ユニットは、デフォルトでデフォルトデータソースを使用します。名前付きの永続化ユニットの場合は <code>datasource</code> プロパティが必須です。 <code>&lt;default&gt;</code> （デフォルトのデータソースの内部名）に設定することで、永続化ユニットをデフォルトデータソースに向けることができます。</p>
</div>
<div class="paragraph">
<p>複数の永続化ユニットが同じデータソースを使用することもできます。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="multiple-persistence-units-attaching-model-classes"><a class="anchor" href="#multiple-persistence-units-attaching-model-classes"></a>モデルクラスを永続化ユニットにアタッチする</h4>
<div class="paragraph">
<p>モデルクラスを永続化ユニットにアタッチする方法は2つあり、混在してはいけません。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>packages</code> 設定プロパティーを使用します。</p>
</li>
<li>
<p><code>@io.quarkus.hibernate.orm.PersistenceUnit</code> パッケージレベルのアノテーションを使用します。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>両方が混在している場合はアノテーションが無視され、 <code>packages</code> の設定プロパティのみが考慮されます。</p>
</div>
<div class="paragraph">
<p><code>packages</code> 設定プロパティは簡単です:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.packages=org.acme.model.defaultpu

quarkus.hibernate-orm."users".database.generation=drop-and-create
quarkus.hibernate-orm."users".datasource=users
quarkus.hibernate-orm."users".packages=org.acme.model.user</code></pre>
</div>
</div>
<div class="paragraph">
<p>この設定スニペットは、2つの永続化ユニットを作成します。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>デフォルトでは、 <code>org.acme.model.defaultpu</code> パッケージのすべてのモデルクラスが含まれ、サブパッケージも含まれます。</p>
</li>
<li>
<p><code>users</code> という名前の永続化ユニットで、 <code>org.acme.model.user</code> パッケージのすべてのモデルクラスを含み、サブパッケージも含まれています。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>複数のpackageを永続化ユニットにアタッチできます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm."users".packages=org.acme.model.shared,org.acme.model.user</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>org.acme.model.shared</code> と <code>org.acme.model.user</code> パッケージの下にあるすべてのモデル・クラスは、 <code>users</code> 永続化ユニットにアタッチされます。</p>
</div>
<div class="paragraph">
<p>モデルクラスを複数の永続化ユニットにアタッチすることもサポートされます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>モデルクラスは与えられた永続化ユニットに一貫して追加される必要があります。つまり、与えられたエンティティのすべての依存するモデルクラス（ <code>@MappedSuperClass</code> 、 <code>@Embeddable</code> &#8230;&#8203;）はすべて同じ永続化ユニットにアタッチされる必要があります。パッケージレベルで永続化ユニットを扱っているので簡単なことでしょう。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Panacheエンティティーは、1つの永続化ユニットにのみアタッチできます。</p>
</div>
<div class="paragraph">
<p>複数の永続化ユニットに接続されたエンティティではPanacheを使用することはできません。しかし、この2つのアプローチを混在させることは可能で、Panacheエンティティと複数の永続化ユニットが必要な従来のエンティティを混在させることはできます。</p>
</div>
<div class="paragraph">
<p>もし、そのようなユースケースがあり、シンプルなPanacheのアプローチを乱すことなく実装する方法について素晴らしいアイデアがあれば、 <a href="https://groups.google.com/d/forum/quarkus-dev">quarkus-dev メーリングリスト</a>までご連絡ください。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>モデルクラスを永続化ユニットにアタッチする2つ目の方法は、パッケージレベルの <code>@io.quarkus.hibernate.orm.PersistenceUnit</code> アノテーションを使用することです。繰り返しになりますが、この2つのアプローチを混在させることはできません。</p>
</div>
<div class="paragraph">
<p>上記のような構成を <code>packages</code> の設定プロパティで取得するには、以下の内容の <code>package-info.java</code> ファイルを作成します:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PersistenceUnit("users") <i class="conum" data-value="1"></i><b>(1)</b>
package org.acme.model.user;

import io.quarkus.hibernate.orm.PersistenceUnit;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Jakarta Persistenceのアノテーションではなく、 <code>@io.quarkus.hibernate.orm.PersistenceUnit</code> アノテーションを使用することに注意してください。</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>モデルクラスの <code>@PersistenceUnit</code> はパッケージレベルで定義することのみサポートしています。この場合、クラスレベルで <code>@PersistenceUnit</code> アノテーションを使用することはサポートされていません。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>設定プロパティで行うのと同様で、アノテーションのつけられたパッケージだけでなく、そのすべてのサブパッケージも入れていることに注意してください。</p>
</div>
</div>
<div class="sect3">
<h4 id="cdi-integration"><a class="anchor" href="#cdi-integration"></a>CDI統合</h4>
<div class="paragraph">
<p>QuarkusでHibernate ORMを使用することに慣れている方は、CDIを使用して <code>EntityManager</code> をインジェクションしたことがあると思います:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
EntityManager entityManager;</code></pre>
</div>
</div>
<div class="paragraph">
<p>これは、デフォルトの永続化ユニットの <code>EntityManager</code> を注入します。</p>
</div>
<div class="paragraph">
<p>名前付き永続化ユニット ( この例では <code>users</code> ) の <code>EntityManager</code> をインジェクトするのは簡単です:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@PersistenceUnit("users") <i class="conum" data-value="1"></i><b>(1)</b>
EntityManager entityManager;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ここでも同じ <code>@io.quarkus.hibernate.orm.PersistenceUnit</code> アノテーションを使用しています。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>全く同じ仕組みで名前付き永続化ユニットの <code>EntityManagerFactory</code> をインジェクトすることができます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject
@PersistenceUnit("users")
EntityManagerFactory entityManagerFactory;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="persistence-unit-active"><a class="anchor" href="#persistence-unit-active"></a>永続化ユニットのアクティブ化/非アクティブ化</h3>
<div class="paragraph">
<p>ビルド時に永続化ユニットが設定されている場合、
デフォルトでは実行時にもアクティブになります。
つまり、Quarkus はアプリケーションの起動時に対応する Hibernate ORM の <code>SessionFactory</code> を開始します。</p>
</div>
<div class="paragraph">
<p>To deactivate a persistence unit at runtime, set <code>quarkus.hibernate-orm[.optional name].active</code> to <code>false</code>.
Then Quarkus will not start the corresponding Hibernate ORM <code>SessionFactory</code> on application startup.
Any attempt to use the corresponding persistence unit at runtime will fail with a clear error message.</p>
</div>
<div class="paragraph">
<p>これは特に、アプリケーションが <a href="datasource#datasource-active">実行時に事前に決められたデータソースのセットの中から 1 つを使用</a> できるようにしたい場合に便利です。</p>
</div>
<div class="paragraph">
<p>例えば、次のような設定です:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm."pg".packages=org.acme.model.shared
quarkus.hibernate-orm."pg".datasource=pg
quarkus.hibernate-orm."pg".database.generation=drop-and-create
quarkus.hibernate-orm."pg".active=false
quarkus.datasource."pg".db-kind=h2
quarkus.datasource."pg".active=false
quarkus.datasource."pg".jdbc.url=jdbc:postgresql:///your_database

quarkus.hibernate-orm."oracle".packages=org.acme.model.shared
quarkus.hibernate-orm."oracle".datasource=oracle
quarkus.hibernate-orm."oracle".database.generation=drop-and-create
quarkus.hibernate-orm."oracle".active=false
quarkus.datasource."oracle".db-kind=oracle
quarkus.datasource."oracle".active=false
quarkus.datasource."oracle".jdbc.url=jdbc:oracle:///your_database</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm."pg".active=true</code> と <code>quarkus.datasource."pg".active=true</code> を実行時に <a href="config-reference#configuration-sources">設定</a> すると、
PostgreSQL の永続化ユニットとデータソースのみが利用可能になり、
<code>quarkus.hibernate-orm."oracle".active=true</code> と <code>quarkus.datasource."oracle".active=true</code> を実行時に設定すると、
Oracle の永続化ユニットとデータソースのみが利用可能になります。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="config-reference#custom-profiles">カスタム設定プロファイル</a> を使用すると、このような設定を簡素化できます。
以下のプロファイル固有の設定を上記の設定に追加することで、 
<a href="config-reference#multiple-profiles"><code>quarkus.profile</code> 設定</a>: を
<code>quarkus.profile=prod,pg</code> または <code>quarkus.profile=prod,oracle</code> にするだけで、実行時に永続化ユニット/データソースを選択できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">%pg.quarkus.hibernate-orm."pg".active=true
%pg.quarkus.datasource."pg".active=true
# Add any pg-related runtime configuration here, prefixed with "%pg."

%oracle.quarkus.hibernate-orm."oracle".active=true
%oracle.quarkus.datasource."oracle".active=true
# Add any pg-related runtime configuration here, prefixed with "%pg."</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It can also be useful to define a <a href="cdi#ok-you-said-that-there-are-several-kinds-of-beans">CDI bean producer</a> redirecting to the currently active persistence unit,
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyProducer {
    @Inject
    DataSourceSupport dataSourceSupport;

    @Inject
    @PersistenceUnit("pg")
    Session pgSessionBean;

    @Inject
    @PersistenceUnit("oracle")
    Session oracleSessionBean;

    @Produces
    @ApplicationScoped
    public Session session() {
        if (dataSourceSupport.getInactiveNames().contains("pg")) {
            return oracleSessionBean;
        } else {
            return pgSessionBean;
        }
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="persistence-xml"><a class="anchor" href="#persistence-xml"></a><code>persistence.xml</code> を使用した場合のHibernate ORMのセットアップと設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hibernate ORM をセットアップして設定するには、<a href="#hibernate-configuration-properties">using <code>application.properties</code></a> が推奨されます。
ただし、代わりに <code>META-INF/persistence.xml</code> ファイルを使用することもできます。
これは主に、既存のコードを Quarkus に移行する場合に役立ちます。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>persistence.xml</code> ファイルを使用する場合は、いくつかの制約が伴います。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>persistence.xml</code> で定義された永続化ユニットは、常に <a href="datasource#configure-a-single-datasource">デフォルトのデータソース</a> を使用します。</p>
</li>
<li>
<p><code>persistence.xml</code> で定義された永続化ユニットは明示的に設定する必要があります。
Quarkus は環境関連の設定の注入を最小限に抑えます。</p>
<div class="paragraph">
<p>特に、Quarkus はデータソースに基づいてダイアレクトやデータベースのバージョンを自動設定しません。
そのため、Hibernate ORM のデフォルト設定がニーズに合わない場合は、
<code>persistence.xml</code> に
 <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#settings-hibernate.dialect"><code>hibernate.dialect</code></a>/<a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#settings-jakarta.persistence.database-product-name"><code>jakarta.persistence.database-product-name</code></a>
 や <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#settings-jakarta.persistence.database-product-version"><code>jakarta.persistence.database-product-version</code></a> などの設定を含める必要があります。</p>
</div>
</li>
<li>
<p><code>persistence.xml</code> を使用することは、 <code>application.properties</code> における <code>quarkus.hibernate-orm.*</code> プロパティーの使用とは互換性がありません。
これらを混在させると、Quarkus は例外をスローします。</p>
</li>
<li>
<p><code>persistence.xml</code> を使用する場合、<a href="#hibernate-configuration-properties">using <code>application.properties</code></a> を使用する場合と比較して、利用できない機能、Quarkus ドキュメントでの限られたガイダンス、解決策を提供するエラーメッセージが適用できないこと (例: <code>quarkus.hibernate-orm.*</code> プロパティーの使用) などにより、開発者エクスペリエンスが悪影響を受ける可能性があります。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>クラスパスに無視したい <code>persistence.xml</code> がある場合は、次の設定プロパティを設定してください:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.persistence-xml.ignore=true</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>pom.xml</code> の依存関係と Java コードは先の例と同じになります。唯一の違いは <code>META-INF/persistence.xml</code> で Hibernate ORM の設定を行うことだけです:</p>
</div>
<div class="listingblock">
<div class="title">persistence.xml リソースの例</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence
             http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"
             version="2.1"&gt;

    &lt;persistence-unit name="CustomerPU" transaction-type="JTA"&gt;

        &lt;description&gt;My customer entities&lt;/description&gt;

        &lt;properties&gt;
            &lt;!-- Connection specific --&gt;
            &lt;property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/&gt;

            &lt;property name="hibernate.show_sql" value="true"/&gt;
            &lt;property name="hibernate.format_sql" value="true"/&gt;

            &lt;!--
                Optimistically create the tables;
                will cause background errors being logged if they already exist,
                but is practical to retain existing data across runs (or create as needed) --&gt;
            &lt;property name="jakarta.persistence.schema-generation.database.action" value="drop-and-create"/&gt;

            &lt;property name="jakarta.persistence.validation.mode" value="NONE"/&gt;
        &lt;/properties&gt;

    &lt;/persistence-unit&gt;
&lt;/persistence&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>persistence.xml</code> 設定を使用する場合は、Hibernate ORM を直接設定することになるので、
この場合は <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#configurations">hibernate.org のドキュメント</a> を参照するのが適切です。</p>
</div>
<div class="paragraph">
<p>Quarkusの <code>application.properties</code> で使用されているものと同じプロパティ名ではなく、同じデフォルト値が適用されるわけではありませんのでご注意ください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xml-mapping"><a class="anchor" href="#xml-mapping"></a>XMLマッピング</h2>
<div class="sectionbody">
<div class="paragraph">
<p>QuarkusのHibernate ORMは、XMLマッピングをサポートしています。 <a href="https://jakarta.ee/specifications/persistence/3.0/jakarta-persistence-spec-3.0.html#a16944">orm.xml 形式（Jakarta Persistence）</a> または <a href="http://hibernate.org/dtd/hibernate-mapping-3.0.dtd">hbm.xml 形式（Hibernate ORM専用、非推奨 ）</a>に従ってマッピングファイルを追加することができます:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application.properties</code> で (ビルド時に) <a href="#quarkus-hibernate-orm_quarkus-hibernate-orm-mapping-files"><code>quarkus.hibernate-orm.mapping-files</code></a> プロパティーを使用して追加する方法。</p>
</li>
<li>
<p><a href="#persistence-xml"><code>persistence.xml</code></a> の <code>&lt;mapping-file&gt;</code> の要素を使用して。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>XMLマッピングファイルは、ビルド時に解析されます。</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>META-INF/orm.xml</code> ファイルがクラスパスに存在する場合は、常にデフォルトでインクルードされます。</p>
</div>
<div class="paragraph">
<p>そうしたくない場合は、 <code>quarkus.hibernate-orm.mapping-files = no-file</code> や <code>&lt;mapping-file&gt;no-file&lt;/mapping-file&gt;</code> を使用してください。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-entities-in-external-projects-or-jars"><a class="anchor" href="#defining-entities-in-external-projects-or-jars"></a>外部プロジェクトや jar でエンティティーを定義する</h2>
<div class="sectionbody">
<div class="paragraph">
<p>QuarkusのHibernate ORMは、エンティティーに対するコンパイル時のバイトコード強化に依存しています。Quarkusアプリケーションを構築するのと同じプロジェクトでエンティティーを定義すれば、すべてがうまく動作します。</p>
</div>
<div class="paragraph">
<p>エンティティーが外部のプロジェクトやジャーから来ている場合は、空の <code>META-INF/beans.xml</code> ファイルを追加することで、jarがQuarkusアプリケーションライブラリのように扱われるようにすることができます。</p>
</div>
<div class="paragraph">
<p>これにより、Quarkusは、エンティティーが現在のプロジェクトの内部にあるかのようにインデックスを作成し、強化することができます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-mode"><a class="anchor" href="#dev-mode"></a>開発モードでのHibernate ORM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkusの開発モードはフロントエンドやサービス、データベースアクセスが混在するアプリケーションにとても便利です。</p>
</div>
<div class="paragraph">
<p>それを生かすためにはいくつかの共通したアプローチがあります。</p>
</div>
<div class="paragraph">
<p>1つ目の選択肢は、 <code>quarkus.hibernate-orm.database.generation=drop-and-create</code> と <code>import.sql</code> を併用することです。</p>
</div>
<div class="paragraph">
<p>そうすることで、アプリケーション、特にエンティティに変更があるたびに、データベーススキーマが適切に再作成され、データフィクスチャ（ <code>import.sql</code> に保存）がゼロから再投入されます。これは環境を完全にコントロールするための最良の方法であり、Quarkusのライブリロードモードでは魔法のように機能します。エンティティの変更や <code>import.sql</code> へのあらゆる変更が即座に反映され、アプリケーションを再起動しなくてもスキーマが更新されます！</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>dev</code> および <code>test</code> モードのデフォルトでは、Hibernate ORM は起動時に <code>/import.sql</code> ファイル内の SQL 文を読み込んで実行します（存在する場合）。 <code>application.properties</code> のプロパティ <code>quarkus.hibernate-orm.sql-load-script</code> を変更することで、ファイル名を変更することができます。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>2つ目の選択肢は <code>quarkus.hibernate-orm.database.generation=update</code> を使用することです。 この方法は、多くのエンティティを変更するが本番データのコピーで作業する必要がある場合や、特定のデータベースのデータエントリーに基づくバグを再現する場合に最適です。 <code>update</code> は Hibernate ORM によってベストエフォートで実行され、データ損失につながるデータベース構造の変更を含む特定の状況では失敗します。 例えば、外部キー制約に違反する構造を変更する場合、Hibernate ORM の挙動を助けてあげなければならないかもしれません。 しかし、開発中だとこれらの制限は許容範囲内です。</p>
</div>
<div class="paragraph">
<p>3つ目の選択肢は <code>quarkus.hibernate-orm.database.generation=none</code> を使用することです。この方法は、本番データのコピーで作業しており、スキーマの変更を完全にコントロールしたい場合に最適です。あるいは、 <a href="flyway">Flyway</a> や <a href="liquibase">Liquibase</a>のようなデータベーススキーマ移行ツールを使用している場合です。</p>
</div>
<div class="paragraph">
<p>この方法では、エンティティに変更を加える時にデータベーススキーマに確実に適合させる必要があります。また、 <code>validate</code> を使用して、Hibernateにスキーマが期待どおりかを確認させることもできます。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
本番環境では、 <code>quarkus.hibernate-orm.database.generation</code> で <code>drop-and-create</code> と <code>update</code> は使用しないでください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>これらの方法は、Quarkusの設定プロファイルと組み合わせることで非常に強力になります。異なる <a href="config-reference#profiles">設定プロファイル</a>を定義して、環境に応じて異なる動作を選択することができます。これは、現在必要としている開発スタイルに合わせて、Hibernate ORMのプロパティの異なる組み合わせを定義できるという点で素晴らしいことです。</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">%dev.quarkus.hibernate-orm.database.generation = drop-and-create
%dev.quarkus.hibernate-orm.sql-load-script = import-dev.sql

%dev-with-data.quarkus.hibernate-orm.database.generation = update
%dev-with-data.quarkus.hibernate-orm.sql-load-script = no-file

%prod.quarkus.hibernate-orm.database.generation = none
%prod.quarkus.hibernate-orm.sql-load-script = no-file</code></pre>
</div>
</div>
<div class="paragraph">
<p>カスタムプロファイルを使用して開発モードを開始することができます:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">コマンドラインインタフェース</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus dev -Dquarkus.profile=dev-with-data</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:dev -Dquarkus.profile=dev-with-data</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew --console=plain quarkusDev -Dquarkus.profile=dev-with-data</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hibernate-orm-in-production-mode"><a class="anchor" href="#hibernate-orm-in-production-mode"></a>本番モードでのHibernate ORM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkusにはデフォルトのプロファイルが付属しています ( <code>dev</code> , <code>test</code> と <code>prod</code> )。また、様々な環境を記述するために独自のカスタムプロファイルを追加することができます ( <code>staging</code> , <code>prod-us</code> , など )。</p>
</div>
<div class="paragraph">
<p>Hibernate ORM Quarkusエクステンションでは、いくつかのデフォルト設定が、開発モードとテストモードで他の環境とは異なるように設定されています。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dev</code> と <code>test</code> 以外のプロフィールは <code>quarkus.hibernate-orm.sql-load-script</code> が <code>no-file</code> に設定されています。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ユーザーが <code>application.properties</code> で明示的にオーバーライドすることもできますが (例: <code>%prod.quarkus.hibernate-orm.sql-load-script = import.sql</code> )、prod で誤ってデータベースをオーバーライドしないようにしたいと思いました :)</p>
</div>
<div class="paragraph">
<p>そういえば、本番ではデータベーススキーマを落とさないようにしましょう!プロパティーファイルに以下を追加します。</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">%prod.quarkus.hibernate-orm.database.generation = none
%prod.quarkus.hibernate-orm.sql-load-script = no-file</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="flyway"><a class="anchor" href="#flyway"></a>スキーマを管理するためのFlywayへの自動移行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>開発モードでで実行している際に <a href="flyway">Flyway エクステンション</a> をインストールしている場合、
Quarkus は Hibernate ORM によって自動的に生成されたスキーマを使用して
 Flyway の設定を簡単に初期化する方法を提供します。
これは、Hibernate を使ってスキーマを迅速にセットアップできる初期開発段階から、
Flyway を使ってスキーマの変更を管理する実稼働段階への移行を
容易にすることを目的としています。</p>
</div>
<div class="paragraph">
<p>この機能を使用するには、 <code>quarkus-flyway</code> エクステンションがインストールされている状態で Dev UI を開き、Flyway ペインの <code>Datasources</code> リンクをクリックします。 <code>Create Initial Migration</code> ボタンを押すと、次のようになります:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>スキーマを生成するためにHibernateが実行するSQLを含んだ <code>db/migration/V1.0.0__{appname}.sql</code> ファイルが作成されます</p>
</li>
<li>
<p><code>quarkus.flyway.baseline-on-migrate</code> が設定され、Flywayがベースラインとなるテーブルを自動的に作成するようになります</p>
</li>
<li>
<p><code>quarkus.flyway.migrate-at-start</code> が設定され、アプリケーションの起動時にFlywayが自動的にマイグレーションを適用するようになります</p>
</li>
<li>
<p>dev/test モードでリロードした後、DB をクリーンにするために <code>%dev.quarkus.flyway.clean-at-start</code> と <code>`%test.quarkus.flyway.clean-at-start</code> が設定されます</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
このボタンはFlywayを素早く使い始めるためのものであり、本番環境でデータベーススキーマをどのように管理するかはユーザー次第です。特に <code>migrate-at-start</code> の設定はすべての環境に適しているとは限りません。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="caching"><a class="anchor" href="#caching"></a>キャッシング</h2>
<div class="sectionbody">
<div class="paragraph">
<p>同じエンティティを頻繁に読み込むアプリケーションでは、Hibernate ORMのL2キャッシュを有効にするとパフォーマンスが向上します。</p>
</div>
<div class="sect2">
<h3 id="caching-of-entities"><a class="anchor" href="#caching-of-entities"></a>エンティティーのキャッシュ</h3>
<div class="paragraph">
<p>セカンドレベルキャッシュを有効にするには、キャッシュさせたいエンティティを <code>@jakarta.persistence.Cacheable</code> でマークします:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@Cacheable
public class Country {
    int dialInCode;
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>エンティティーが <code>@Cacheable</code> でアノテーションされているときは、コレクションと他のエンティティーとの関係を除いて、そのすべてのフィールド値がキャッシュされます。</p>
</div>
<div class="paragraph">
<p>これは、データベースに問い合わせることなくエンティティをロードできることを意味しますが、ロードされたエンティティがデータベースの最近の変更を反映していない可能性があることを意味するので注意が必要です。</p>
</div>
</div>
<div class="sect2">
<h3 id="caching-of-collections-and-relations"><a class="anchor" href="#caching-of-collections-and-relations"></a>コレクションとリレーションのキャッシング</h3>
<div class="paragraph">
<p>コレクションとリレーションはキャッシュするために個別にアノテーションする必要があります。この場合、Hibernate固有の <code>@org.hibernate.annotations.Cache</code> を使用する必要があり、さらに <code>CacheConcurrencyStrategy</code> を指定する必要があります:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme;

@Entity
@Cacheable
public class Country {
    // ...

    @OneToMany
    @Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
    List&lt;City&gt; cities;

    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="caching-of-queries"><a class="anchor" href="#caching-of-queries"></a>クエリのキャッシュ</h3>
<div class="paragraph">
<p>クエリは、第二レベルのキャッシュの恩恵を受けることもできます。キャッシュされたクエリの結果は即座に呼び出し元に返すことができるので、データベース上でクエリを実行する必要がありません。</p>
</div>
<div class="paragraph">
<p>最近の変化を反映していない可能性があることを含意しているので注意が必要です。</p>
</div>
<div class="paragraph">
<p>クエリをキャッシュするには、 <code>Query</code> インスタンス上でキャッシュ可能なものとしてマークします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Query query = ...
query.setHint("org.hibernate.cacheable", Boolean.TRUE);</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>NamedQuery</code> があれば、その定義で直接キャッシュを有効にすることができます。これは通常、エンティティ上で行われます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@NamedQuery(name = "Fruits.findAll",
      query = "SELECT f FROM Fruit f ORDER BY f.name",
      hints = @QueryHint(name = "org.hibernate.cacheable", value = "true") )
public class Fruit {
   ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>以上です。キャッシュ技術はすでにQuarkusに統合されてデフォルトで有効になってるのでキャッシュしても問題ないものを設定するだけで十分です。</p>
</div>
</div>
<div class="sect2">
<h3 id="tuning-of-cache-regions"><a class="anchor" href="#tuning-of-cache-regions"></a>キャッシュ領域の調整</h3>
<div class="paragraph">
<p>キャッシュはデータの異なる部分を分離するために別々の領域にデータを保存します。このような領域には名前が付けられ、各領域を独立して設定したり、統計を監視したりするのに役立ちます。</p>
</div>
<div class="paragraph">
<p>デフォルトでは、エンティティは、その完全修飾名を冠した領域（例えば、 <code>org.acme.Country</code>）にキャッシュされます。</p>
</div>
<div class="paragraph">
<p><code>org.acme.Country#cities</code> コレクションは保持するエンティティの完全修飾名とコレクションのフィールド名を <code>#</code> 文字で区切った名前の領域にキャッシュされます。</p>
</div>
<div class="paragraph">
<p>すべてのキャッシュされたクエリは、デフォルトでは、 <code>default-query-results-region</code> と呼ばれる一つの専用の領域に保存されます。</p>
</div>
<div class="paragraph">
<p>すべてのリージョンは、デフォルトではサイズと時間で制限されています。デフォルトでは、最大で <code>10000</code> のエントリ数、最大で <code>100</code> 秒のアイドル時間が設定されています。</p>
</div>
<div class="paragraph">
<p>各領域のサイズは、 <code>quarkus.hibernate-orm.cache."&lt;region_name&gt;".memory.object-count</code> プロパティ（ <em>&lt;region_name&gt;</em> を実際の領域名に置き換えてください）でカスタマイズできます。</p>
</div>
<div class="paragraph">
<p>最大アイドル時間を設定するには、 <code>quarkus.hibernate-orm.cache."&lt;region_name&gt;".expiration.max-idle</code> プロパティ （<em>&lt;region_name&gt;</em> を実際のリージョン名に置き換えてください）で時間（下記の時間のフォーマットに関する注意を参照）を指定します。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>領域名にドットが含まれている場合は二重引用符が必須です。次のようになります:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.cache."org.acme.MyEntity".memory.object-count=1000</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>期間の値を書くには、標準の <code>java.time.Duration</code> フォーマットを使います。
詳細は <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Duration.html#parse(java.lang.CharSequence)">Duration#parse() javadoc</a> を参照してください。</p>
</div>
<div class="paragraph">
<p>数字で始まる簡略化した書式を使うこともできます:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数値のみの場合は、秒単位の時間を表します。</p>
</li>
<li>
<p>数値の後に <code>ms</code> が続く場合は、ミリ秒単位の時間を表します。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>その他の場合は、簡略化されたフォーマットが解析のために <code>java.time.Duration</code> フォーマットに変換されます：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数値の後に <code>h</code> 、 <code>m</code> 、 <code>s</code> が続く場合は、その前に <code>PT</code> が付けられます。</p>
</li>
<li>
<p>数値の後に <code>d</code> が続く場合は、その前に <code>P</code> が付けられます。</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="limitations-of-caching"><a class="anchor" href="#limitations-of-caching"></a>キャッシングの制限</h3>
<div class="paragraph">
<p>Quarkusで提供されているキャッシング技術は、現在のところ非常に初歩的で限られています。</p>
</div>
<div class="paragraph">
<p>Quarkusの開発チームは最初から <em>ある程度の</em> キャッシュ機能があった方が何もないよりは良いと考えました。将来のリリースではより良いキャッシュソリューションが統合されることを期待しています。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>これらのキャッシュはローカルに保持されているため、他のアプリケーションによって永続ストアに変更が加えられても無効化されたり更新されたりすることはありません。</p>
</div>
<div class="paragraph">
<p>また、同じアプリケーションの複数のコピーを（Kubernetes/OpenShiftなどのクラスタで）実行している場合、アプリケーションの別々のコピーのキャッシュは同期されません。</p>
</div>
<div class="paragraph">
<p>これらの理由から、ある種の仮定が成り立つ場合にのみキャッシュを有効にすることが適しています。私たちは、変化しないエンティティ、コレクション、およびクエリのみをキャッシュすることを強く推奨します。あるいは、そのようなエンティティが実際に変更され、古くなった（stale）ものを読み取ったとしても、アプリケーションの期待値に影響を与えないようにする必要があります。</p>
</div>
<div class="paragraph">
<p>このアドバイスに従うことで、アプリケーションがL2キャッシュから最高のパフォーマンスを引き出し、かつ予期せぬ動作を避けることができます。</p>
</div>
<div class="paragraph">
<p>不変のデータだけでなく、ある文脈では、可変のデータに対してもキャッシュを有効にすることが許容されるかもしれません。これは、頻繁に読み込まれ、ある程度の陳腐化を許容できるようなエンティティを選択した場合、必要なトレードオフとなり得ます。この「許容される陳腐化の度合い」は、eviction プロパティを設定することで調整できます。しかし、これは推奨されておらず、データに予期せぬ影響を与える可能性があるため、細心の注意を払って行う必要があります。</p>
</div>
<div class="paragraph">
<p>理想的には、変更可能なデータでキャッシュを有効にするのではなく、クラスタ化されたキャッシュを使用することがより良い解決策です。しかし、現時点では、Quarkusはそのような実装を提供していません：この必要性を知らせれば、チームがこれを考慮することができますので、お気軽にご連絡ください。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>最後に、 <code>hibernate.cache.use_second_level_cache</code> を <code>false</code> に設定することで、L2キャッシュをグローバルで無効化できます。この設定は、 <code>persistence.xml</code> 設定ファイルで指定する必要があります。</p>
</div>
<div class="paragraph">
<p>L2キャッシュを無効にすると、すべてのキャッシュアノテーションは無視され、すべてのクエリはキャッシュを無視して実行されます。これは通常、問題を診断する場合にのみ有効です。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="envers"><a class="anchor" href="#envers"></a>Hibernate Envers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hibernate ORMのEnversエクステンションは、エンティティークラスのための簡単な監査/バージョン管理ソリューションを提供することを目的としています。</p>
</div>
<div class="paragraph">
<p>Quarkusでは、Enversには専用のQuarkus Extensionがあります。 <code>io.quarkus:quarkus-hibernate-envers</code> ; これをプロジェクトに追加して使用を開始する必要があります。</p>
</div>
<div class="listingblock">
<div class="title">Hibernate Enversを有効にするための追加の依存関係</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;!-- Add the Hibernate Envers extension --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-hibernate-envers&lt;/artifactId&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkusの設定プロパティを使用して、複数の永続化ユニットを定義することができます。</p>
</div>
<div class="paragraph">
<p>Hibernate Enversの詳細については、 <a href="https://hibernate.org/orm/envers/">hibernate.org/orm/envers/</a>を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metrics"><a class="anchor" href="#metrics"></a>メトリクス</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="telemetry-micrometer">Micrometer</a> または <a href="smallrye-metrics">SmallRye Metrics</a> は、
Hibernate ORM が実行時に収集するメトリクスを公開できます。Hibernate のメトリクスを <code>/q/metrics</code> エンドポイントで公開するには、
プロジェクトがメトリクスエクステンションに依存しており、設定プロパティー <code>quarkus.hibernate-orm.metrics.enabled</code> を <code>true</code> に設定していることを確認します。
<a href="smallrye-metrics">SmallRye Metrics</a> を使用している場合、メトリクスは <code>vendor</code> スコープ内で利用可能になります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="limitations-and-other-things-you-should-know"><a class="anchor" href="#limitations-and-other-things-you-should-know"></a>制限事項など知っておくべきこと</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkusは使用するライブラリを変更しません。このルールはHibernate ORMにも適用されます。このエクステンションを使用すると、元のライブラリを使用した場合とほとんど同じエクスペリエンスが得られます。</p>
</div>
<div class="paragraph">
<p>しかし、両者は同じコードを共有していますが、Quarkusはいくつかのコンポーネントを自動的に設定し、いくつかの拡張ポイントにカスタム実装をインジェクションしています。</p>
</div>
<div class="sect2">
<h3 id="automatic-build-time-enhancement"><a class="anchor" href="#automatic-build-time-enhancement"></a>自動ビルド時間の強化</h3>
<div class="paragraph">
<p>Hibernate ORMでは、ビルド時に拡張されたエンティティを使用できます。通常、これは必須ではありませんが便利でアプリケーションのパフォーマンスを向上させることができます。</p>
</div>
<div class="paragraph">
<p>通常は、ビルドスクリプトにHibernate Enhancementプラグインを含める必要がありますが、QuarkusではEnhancementステップがQuarkusアプリケーションのビルドと分析に統合されているため、その必要はありません。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Enhancement を使用しているため、エンティティで <code>clone()</code> メソッドを使用することは現在サポートされていません。これは、エンティティにEnhancement 固有のフィールドもクローンされるためです。</p>
</div>
<div class="paragraph">
<p>この制限は将来的に削除される可能性があります。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="automatic-integration"><a class="anchor" href="#automatic-integration"></a>自動統合</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">トランザクション・マネージャーの統合</dt>
<dd>
<p>これを設定する必要はありません。Quarkusは自動的にNarayana Transaction Managerへの参照をインジェクションします。この依存関係は、Hibernate ORMエクステンションの推移的依存関係として自動的に含まれます。すべての設定はオプションです。詳細は、 <a href="transaction">Quarkusでのトランザクションの使用</a>を参照してください。</p>
</dd>
<dt class="hdlist1">接続プール</dt>
<dd>
<p>どちらかを選択する必要はありません。上記の例のようにデータソースを設定するだけで、Hibernate ORMがAgroalを使用するように設定されます。このコネクションプールの詳細については、 <a href="datasource">Quarkus - データソース</a>を参照してください。</p>
</dd>
<dt class="hdlist1">セカンドレベルキャッシュ</dt>
<dd>
<p>前述の <a href="#caching">Caching section</a> で説明したように、実装を選択する必要はありません。
<a href="https://infinispan.org/">Infinispan</a> と <a href="https://github.com/ben-manes/caffeine">Caffeine</a> の技術に基づく適切な実装が Hibernate ORM エクステンションの遷移依存関係として含まれており、ビルド時に自動的に統合されます。</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="limitations"><a class="anchor" href="#limitations"></a>制約事項</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">クラスパスに重複したファイルがある場合のXMLマッピング</dt>
<dd>
<p><a href="#xml-mapping">XML マッピング</a> ファイルは一意のパスを持つことが期待されます。</p>
<div class="paragraph">
<p>実際には、クラスパスに XML マッピングファイルを重複して配置するのは、非常に特殊なシナリオの場合のみです。たとえば、2つのJARに（まったく同じパスで異なるJARにある） <code>META-INF/orm.xml</code> ファイルが含まれている場合、マッピングファイルのパス <code>META-INF/orm.xml</code> は、 <strong>&lt;code&gt;META-INF/orm.xml&lt;/code&gt; ファイルと同じJAR</strong> の <code>persistence.xml</code> からしか参照できません。</p>
</div>
</dd>
<dt class="hdlist1">JMX</dt>
<dd>
<p>管理 Bean は GraalVM ネイティブイメージでは動作しません。したがって、ネイティブイメージにコンパイルすると、JMX Bean に統計と管理操作を登録する Hibernate の機能は無効になります。ネイティブ・イメージがJMXのサポートを実装することは目標ではないので、この制限は永久に続くと思われます。このようなメトリクスはすべて、他の方法でアクセスすることができます。</p>
</dd>
<dt class="hdlist1">JACCの統合</dt>
<dd>
<p>GraalVMのネイティブイメージを構築する際には、JACCと統合するHibernate ORMの機能は無効になります。なぜなら、JACCはネイティブ・モードでは利用できず、有用でもないからです。</p>
</dd>
<dt class="hdlist1">セッションをThreadLocalコンテキストにバインドする</dt>
<dd>
<p>Hibernate ORMの <code>ThreadLocalSessionContext</code> ヘルパーはサポートが実装されていないため、使用できません。QuarkusはCDIサポートを最初から提供しているので、インジェクションやプログラムによるCDIルックアップがより良いアプローチとなります。この機能は、リアクティブコンポーネントやより現代的なコンテキスト伝搬技術ともうまく統合できないため、このレガシーな機能には未来がないと考えました。ThreadLocalにバインドする必要がある場合は、容易に独自のコードで実装出来る筈です。</p>
</dd>
<dt class="hdlist1">JNDI</dt>
<dd>
<p>JNDI技術は、異なるコンポーネントを統合するために他のランタイムで一般的に使用されています。一般的な使用例は、Java EnterpriseサーバーでTransactionManagerとDatasourceコンポーネントを名前にバインドし、Hibernate ORMがこれらのコンポーネントを名前で検索するように設定することです。しかし、Quarkusでは、コンポーネントが直接注入されるため、このユースケースは適用されず、JNDIサポートは不要なレガシーとなります。JNDIの予期せぬ使用を避けるため、QuarkusのHibernate ORMエクステンションでは、JNDIの完全なサポートは無効になっています。これは、セキュリティ上の予防策であり、最適化でもあります。</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="other-notable-differences"><a class="anchor" href="#other-notable-differences"></a>その他の特記すべき相違点</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>import.sql</code> のフォーマット</dt>
<dd>
<p>データベースをセットアップするために <code>import.sql</code> をインポートする際、QuarkusはHibernate ORMを再構成し、各ステートメントの最後にセミコロン（ ';' ）を必要とすることに留意してください。Hibernateのデフォルトでは、改行以外の終端文字を必要とせず、1行に1つのステートメントがあります。既存のスクリプトを再利用する場合は、終端文字として「;」を使用するようにスクリプトを変換することを忘れないでください。これは、複数行のステートメントを可能にし、人間が使いやすいフォーマットにするために役立ちます。</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="simplifying-hibernate-orm-with-panache"><a class="anchor" href="#simplifying-hibernate-orm-with-panache"></a>Simplified Hibernate ORM with Panache</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="hibernate-orm-panache">Hibernate ORM with Panache</a> エクステンションはアクティブレコードスタイルのエンティティ（およびリポジトリ）を提供してHibernate ORMを簡単に使えるようにし、Quarkusでエンティティを簡単に楽しく書けるようにすることに重点を置いています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-your-datasource"><a class="anchor" href="#configure-your-datasource"></a>データソースの設定</h2>
<div class="sectionbody">
<div class="paragraph">
<p>データソースの設定は非常にシンプルですが、技術的にはQuarkus用のAgroal接続プールエクステンションによって実装されているため、別のガイドで説明します。</p>
</div>
<div class="paragraph">
<p>詳細は <a href="datasource">Quarkus - データソース</a>をご覧ください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multitenancy"><a class="anchor" href="#multitenancy"></a>マルチテナンシー</h2>
<div class="sectionbody">
<div class="paragraph">
<p>「マルチテナントという用語は、一般的にソフトウェア開発に適用され、アプリケーションの単一の実行インスタンスが同時に複数のクライアント（テナント）にサービスを提供するアーキテクチャを示す。これはSaaSソリューションでは非常に一般的です。このようなシステムでは、さまざまなテナントに関連する情報（データ、カスタマイズなど）を分離することが特に課題となります。これには、データベースに格納された各テナントが所有するデータも含まれます」（ <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#multitenacy">Hibernateユーザーガイド</a> ）。</p>
</div>
<div class="paragraph">
<p>Quarkusは現在、 <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#multitenacy-separate-database">分離データベース</a> アプローチ、 <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#multitenacy-separate-schema">分離スキーマ</a> アプローチ、 <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#multitenacy-discriminator">discriminator</a> アプローチをサポートしています。</p>
</div>
<div class="paragraph">
<p>マルチテナンシーの動作を確認するには、 <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/3.15/hibernate-orm-multi-tenancy-quickstart">hibernate-orm-multi-tenancy-quickstart</a> クイックスタートをご覧ください。</p>
</div>
<div class="sect2">
<h3 id="writing-the-application"><a class="anchor" href="#writing-the-application"></a>アプリケーションの記述</h3>
<div class="paragraph">
<p>まず、 <code>/{tenant}</code> のエンドポイントを実装することから始めましょう。以下のソースコードからわかるように、これは通常の Jakarta REST リソースです:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;
import jakarta.persistence.EntityManager;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@ApplicationScoped
@Path("/{tenant}")
public class FruitResource {

    @Inject
    EntityManager entityManager;

    @GET
    @Path("fruits")
    public Fruit[] getFruits() {
        return entityManager.createNamedQuery("Fruits.findAll", Fruit.class)
                .getResultList().toArray(new Fruit[0]);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>受信したリクエストからテナントを解決し、特定のテナント構成にマッピングするためには、 <code>io.quarkus.hibernate.orm.runtime.tenant.TenantResolver</code> インターフェースの実装を作成する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.enterprise.context.ApplicationScoped;

import io.quarkus.hibernate.orm.runtime.tenant.TenantResolver;
import io.vertx.ext.web.RoutingContext;

@PersistenceUnitExtension <i class="conum" data-value="1"></i><b>(1)</b>
@RequestScoped <i class="conum" data-value="2"></i><b>(2)</b>
public class CustomTenantResolver implements TenantResolver {

    @Inject
    RoutingContext context;

    @Override
    public String getDefaultTenantId() {
        return "base";
    }

    @Override
    public String resolveTenantId() {
        String path = context.request().path();
        String[] parts = path.split("/");

        if (parts.length == 0) {
            // resolve to default tenant config
            return getDefaultTenantId();
        }

        return parts[1];
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>TenantResolverの実装に <code>@PersistenceUnitExtension</code> という修飾語を付けて、Quarkusにデフォルトの永続化ユニットで使用することを伝えます。
<div class="paragraph">
<p><a href="#multiple-persistence-units">名前付きの永続化ユニット</a> には、 <code>@PersistenceUnitExtension("nameOfYourPU")</code> を使用します。</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Beanは、テナントの解決が入ってくるリクエストに依存するため <code>@RequestScoped</code> にします。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>上記の実装ではテナントはリクエストパスから解決されるので、テナントが推測できない場合はデフォルトのテナント識別子が返されます。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><a href="security-openid-connect-multitenancy">OIDCマルチテナンシー</a>も使用していて、OIDCとHibernate ORMの両方のテナントIDが同じで、Vert.xの <code>RoutingContext</code> から抽出する必要がある場合は、OIDCテナントリゾルバからHibernate ORMテナントリゾルバに、 <code>RoutingContext</code> 属性としてテナントIDを渡すことができます。例:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.hibernate.orm.runtime.tenant.TenantResolver;
import io.vertx.ext.web.RoutingContext;

@PersistenceUnitExtension
@RequestScoped
public class CustomTenantResolver implements TenantResolver {

    @Inject
    RoutingContext context;
    ...
    @Override
    public String resolveTenantId() {
        // OIDC TenantResolver has already calculated the tenant id and saved it as a RoutingContext `tenantId` attribute:
        return context.get("tenantId");
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuring-the-application"><a class="anchor" href="#configuring-the-application"></a>アプリケーションの設定</h3>
<div class="paragraph">
<p>一般的に、Hibernate ORMのデータベース生成機能をマルチテナンシーのセットアップと組み合わせて使用することはできません。そのため、この機能を無効にして、テーブルがスキーマごとに作成されるようにする必要があります。以下のセットアップでは、 <a href="flyway">Flyway</a> エクステンションを使用してこの目的を達成します。</p>
</div>
<div class="sect3">
<h4 id="schema-approach"><a class="anchor" href="#schema-approach"></a>SCHEMAアプローチ</h4>
<div class="paragraph">
<p>すべてのテナントに同じデータソースが使用され、そのデータソース内のすべてのテナントに対してスキーマを作成する必要があります。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
MariaDB/MySQL などの一部のデータベースはデータベーススキーマをサポートしていません。このような場合は、<a href="#database-approach">database approach</a> を使用する必要があります。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.database.generation=none <i class="conum" data-value="1"></i><b>(1)</b>

quarkus.hibernate-orm.multitenant=SCHEMA <i class="conum" data-value="2"></i><b>(2)</b>

quarkus.datasource.db-kind=postgresql <i class="conum" data-value="3"></i><b>(3)</b>
quarkus.datasource.username=quarkus_test
quarkus.datasource.password=quarkus_test
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkus_test

quarkus.flyway.schemas=base,mycompany <i class="conum" data-value="4"></i><b>(4)</b>
quarkus.flyway.locations=classpath:schema
quarkus.flyway.migrate-at-start=true</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>スキーママルチテナンシーでは Hibernate ORM によってサポートされていないため、スキーマ生成を無効にします。
代わりに Flyway を使用します。詳細は下記を参照してください。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>スキーマのマルチテナンシーを有効にします。
<div class="paragraph">
<p>ここではデフォルトのデータソースを使用していますが、<a href="#multiple-persistence-units">there</a> の指示に従って、名前付きのデータソースを使用することもできます。</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><a href="datasource">データソースを設定します</a>。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>この場合、Hibernate ORM によるスキーマ生成がサポートされていないため、
<a href="flyway">Flyway</a> をデータベースの初期化用に設定します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ここでは、設定されたフォルダー <code>src/main/resources/schema</code> に作成される Flyway SQL ( <code>V1.0.0__create_fruits.sql</code> ) の例を示します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE SEQUENCE base.known_fruits_id_seq;
SELECT setval('base."known_fruits_id_seq"', 3);
CREATE TABLE base.known_fruits
(
  id   INT,
  name VARCHAR(40)
);
INSERT INTO base.known_fruits(id, name) VALUES (1, 'Cherry');
INSERT INTO base.known_fruits(id, name) VALUES (2, 'Apple');
INSERT INTO base.known_fruits(id, name) VALUES (3, 'Banana');

CREATE SEQUENCE mycompany.known_fruits_id_seq;
SELECT setval('mycompany."known_fruits_id_seq"', 3);
CREATE TABLE mycompany.known_fruits
(
  id   INT,
  name VARCHAR(40)
);
INSERT INTO mycompany.known_fruits(id, name) VALUES (1, 'Avocado');
INSERT INTO mycompany.known_fruits(id, name) VALUES (2, 'Apricots');
INSERT INTO mycompany.known_fruits(id, name) VALUES (3, 'Blackberries');</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="database-approach"><a class="anchor" href="#database-approach"></a>データベースアプローチ</h4>
<div class="paragraph">
<p>すべてのテナントに対して、 <code>TenantResolver</code> が返すのと同じ識別子を持つ名前付きデータソースを作成する必要があります。</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>このアプローチでは、同じ永続化ユニットで使用されるすべてのデータソースが、
同じベンダー (同じ <code>db-kind</code>) およびバージョンのデータベースを指すと仮定されます。</p>
</div>
<div class="paragraph">
<p>不一致は検出されず、予期しない動作が発生する可能性があります。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.database.generation=none <i class="conum" data-value="1"></i><b>(1)</b>

quarkus.hibernate-orm.multitenant=DATABASE <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.hibernate-orm.datasource=base <i class="conum" data-value="3"></i><b>(3)</b>

# Default tenant 'base'
quarkus.datasource.base.db-kind=postgresql <i class="conum" data-value="4"></i><b>(4)</b>
quarkus.datasource.base.username=quarkus_test
quarkus.datasource.base.password=quarkus_test
quarkus.datasource.base.jdbc.url=jdbc:postgresql://localhost:5432/quarkus_test
quarkus.flyway.base.locations=classpath:database/base <i class="conum" data-value="5"></i><b>(5)</b>
quarkus.flyway.base.migrate-at-start=true

# Tenant 'mycompany'
quarkus.datasource.mycompany.db-kind=postgresql <i class="conum" data-value="6"></i><b>(6)</b>
quarkus.datasource.mycompany.username=mycompany
quarkus.datasource.mycompany.password=mycompany
quarkus.datasource.mycompany.jdbc.url=jdbc:postgresql://localhost:5433/mycompany
quarkus.flyway.mycompany.locations=classpath:database/mycompany <i class="conum" data-value="7"></i><b>(7)</b>
quarkus.flyway.mycompany.migrate-at-start=true</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>データベースのマルチテナンシーには Hibernate ORM によるスキーマ生成がサポートされていないため、スキーマ生成を無効にします。代わりに Flyway を使用します。詳細は下記を参照してください。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>データベースのマルチテナンシーを有効にします。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>永続化ユニットのデータソースを選択します。
<div class="paragraph">
<p>これは、Quarkus が使用する Hibernate ORM のダイアレクトを決定できるようにすることのみを目的としています。
詳細は、<a href="#hibernate-dialect-varying-database">this section</a> を参照してください。</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>1 つのテナント、 <code>base</code> 用に <a href="datasource">データソースを設定</a> します。</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>この場合、Hibernate ORM によるスキーマ生成はサポートされていないため、
テナント <code>base</code> のデータベース初期化用に <a href="flyway">Flyway</a> を設定します。</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>別のテナントの <a href="datasource">データソースを設定します</a>。
<div class="paragraph">
<p>他にもテナントがあるかもしれませんが、ここでは 2 つで止めています。</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>この場合、Hibernate ORM によるスキーマ生成はサポートされていないため、
テナント <code>mycompany</code> のデータベース初期化用に <a href="flyway">Flyway</a> を設定します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>以下は、設定されたフォルダー <code>src/main/resources/database</code> に作成する Flyway SQL ファイルの例です。</p>
</div>
<div class="paragraph">
<p>テナント <code>base</code> のスキーマ (<code>src/main/resources/database/base/V1.0.0__create_fruits.sql</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE SEQUENCE known_fruits_id_seq;
SELECT setval('known_fruits_id_seq', 3);
CREATE TABLE known_fruits
(
  id   INT,
  name VARCHAR(40)
);
INSERT INTO known_fruits(id, name) VALUES (1, 'Cherry');
INSERT INTO known_fruits(id, name) VALUES (2, 'Apple');
INSERT INTO known_fruits(id, name) VALUES (3, 'Banana');</code></pre>
</div>
</div>
<div class="paragraph">
<p>テナント <code>mycompany</code> のスキーマ (<code>src/main/resources/database/mycompany/V1.0.0__create_fruits.sql</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">CREATE SEQUENCE known_fruits_id_seq;
SELECT setval('known_fruits_id_seq', 3);
CREATE TABLE known_fruits
(
  id   INT,
  name VARCHAR(40)
);
INSERT INTO known_fruits(id, name) VALUES (1, 'Avocado');
INSERT INTO known_fruits(id, name) VALUES (2, 'Apricots');
INSERT INTO known_fruits(id, name) VALUES (3, 'Blackberries');</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="discriminator-approach"><a class="anchor" href="#discriminator-approach"></a>DISCRIMINATOR アプローチ</h4>
<div class="paragraph">
<p>デフォルトのデータソースがすべてのテナントに使用されます。 <code>@TenantId</code> でアノテーションされたフィールドを定義しているすべてのエンティティには、そのフィールドが自動的に入力され、クエリで自動的にフィルタリングされます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.hibernate-orm.multitenant=DISCRIMINATOR <i class="conum" data-value="1"></i><b>(1)</b>

quarkus.datasource.db-kind=postgresql <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.datasource.username=quarkus_test
quarkus.datasource.password=quarkus_test
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkus_test</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>discriminator マルチテナンシーを有効にします。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><a href="datasource">データソースを設定します</a>。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="programmatically-resolving-tenants-connections"><a class="anchor" href="#programmatically-resolving-tenants-connections"></a>テナント接続をプログラムで解決</h3>
<div class="paragraph">
<p>サポートするさまざまなテナントに対してより動的な設定が必要で、設定ファイルに複数のエントリを残したくない場合は、 <code>io.quarkus.hibernate.orm.runtime.tenant.TenantConnectionResolver</code> インターフェースを使用して接続を取得するための独自のロジックを実装することができます。このインターフェースを実装するアプリケーションスコープのBeanを作成し、 <code>@PersistenceUnitExtension</code> （または <a href="#multiple-persistence-units">名前付き永続化ユニット</a>の場合は <code>@PersistenceUnitExtension("nameOfYourPU")</code> ）アノテーションを付けることで、現在のQuarkusのデフォルトの実装である <code>io.quarkus.hibernate.orm.runtime.tenant.DataSourceTenantConnectionResolver</code> を置き換えることができます。カスタムコネクションリゾルバを使用すると、例えばデータベースからテナント情報を読みとった情報に基づいて実行時にテナントごとに接続を作成することができます。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="interceptors"><a class="anchor" href="#interceptors"></a>インターセプター</h2>
<div class="sectionbody">
<div class="paragraph">
<p>適切な修飾子を持つ CDI Bean を定義するだけで、 <code>SessionFactory</code> に <a href="https://docs.jboss.org/hibernate/orm/6.6/userguide/html_single/Hibernate_User_Guide.html#events-interceptors"><code>org.hibernate.Interceptor</code></a>を割り当てることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PersistenceUnitExtension <i class="conum" data-value="1"></i><b>(1)</b>
public static class MyInterceptor extends EmptyInterceptor { <i class="conum" data-value="2"></i><b>(2)</b>
    @Override
    public boolean onLoad(Object entity, Serializable id, Object[] state, <i class="conum" data-value="3"></i><b>(3)</b>
            String[] propertyNames, Type[] types) {
        // ...
        return false;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>インターセプターの実装に <code>@PersistenceUnitExtension</code> の修飾子を付けて、Quarkusにデフォルトの永続化ユニットで使用されるように伝えます。
<div class="paragraph">
<p><a href="#multiple-persistence-units">名前付きの永続化ユニット</a> には <code>@PersistenceUnitExtension("nameOfYourPU")</code> を使用する</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>org.hibernate.EmptyInterceptor</code> を拡張するか、 <code>org.hibernate.Interceptor</code> を直接実装する。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>必要に応じてメソッドを実装する。</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>デフォルトでは、 <code>@PersistenceUnitExtension</code> アノテーションの付けられたインターセプター Beanはアプリケーションスコープになります。つまり、アプリケーションごとにインターセプターのインスタンスが一つのみ作成され、すべてのエンティティマネージャーで再利用されます。このため、インターセプターの実装はスレッドセーフである必要があります。</p>
</div>
<div class="paragraph">
<p>エンティティマネージャーごとに1つのインターセプターのインスタンスを作成するには、Beanに <code>@Dependent</code> アノテーションを付けます。この場合はインターセプターの実装はスレッドセーフである必要はありません。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Hibernate ORM 自体の制限により、 <code>@Dependent</code> スコープのインターセプターの <code>@PreDestroy</code> メソッドは決して呼び出されません。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="statement_inspectors"><a class="anchor" href="#statement_inspectors"></a>ステートメントインスペクター</h2>
<div class="sectionbody">
<div class="paragraph">
<p>適切な修飾子を持つCDI Beanを定義するだけで、 <code>SessionFactory</code> に <code>org.hibernate.engine.jdbc.spi.StatementInspector</code> を割り当てることができます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PersistenceUnitExtension <i class="conum" data-value="1"></i><b>(1)</b>
public class MyStatementInspector implements StatementInspector { <i class="conum" data-value="2"></i><b>(2)</b>
    @Override
    public String inspect(String sql) {
        // ...
        return sql;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ステートメントインスペクターの実装に <code>@PersistenceUnitExtension</code> という修飾子を付けて、Quarkus にデフォルトの永続化ユニットで使用するように指示します。
<div class="paragraph">
<p><a href="#multiple-persistence-units">名前付きの永続化ユニット</a> には <code>@PersistenceUnitExtension("nameOfYourPU")</code> を使用する</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>org.hibernate.engine.jdbc.spi.StatementInspector</code> を実装してください。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json_xml_serialization_deserialization"><a class="anchor" href="#json_xml_serialization_deserialization"></a>JSON/XML シリアル化/デシリアル化のカスタマイズ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>デフォルトでは、Quarkus は利用可能なエクステンションに応じてフォーマットマッパーを自動的に設定しようとします。
Jackson (または JSON-B) が利用可能な場合、グローバルに設定された <code>ObjectMapper</code> (または <code>Jsonb</code>) がシリアル化/デシリアル化操作に使用されます。
Jackson と JSON-B の両方が同時に使用可能な場合は、Jackson が優先されます。</p>
</div>
<div class="paragraph">
<p>Hibernate ORM における JSON および XML のシリアル化/デシリアル化は、 <code>org.hibernate.type.format.FormatMapper</code> を実装し
適切な修飾子を使用して実装にアノテーションを付けることでカスタマイズできます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.hibernate.orm.JsonFormat;
import org.hibernate.type.format.FormatMapper;

@JsonFormat <i class="conum" data-value="1"></i><b>(1)</b>
@PersistenceUnitExtension <i class="conum" data-value="2"></i><b>(2)</b>
public class MyJsonFormatMapper implements FormatMapper { <i class="conum" data-value="3"></i><b>(3)</b>
    @Override
    public &lt;T&gt; T fromString(CharSequence charSequence, JavaType&lt;T&gt; javaType, WrapperOptions wrapperOptions) {
        // ...
    }

    @Override
    public &lt;T&gt; String toString(T value, JavaType&lt;T&gt; javaType, WrapperOptions wrapperOptions) {
       // ...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>フォーマットマッパーの実装に <code>@JsonFormat</code> 修飾子のアノテーションを付与し、
このマッパーが JSON のシリアル化/デシリアル化固有であることを Quarkus に知らせます。
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Jackson のアノテーシではなく、
Quarkus 固有の <code>@io.quarkus.hibernate.orm.JsonFormat</code> アノテーションが使用されていることを確認します。
</td>
</tr>
</table>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>フォーマットマッパーの実装に <code>@PersistenceUnitExtension</code> 修飾子のアノテーションを付与し、
これがデフォルトの永続化ユニットで使用されるべきものであることを Quarkus に知らせます。
<div class="paragraph">
<p><a href="#multiple-persistence-units">名前付きの永続化ユニット</a> には <code>@PersistenceUnitExtension("nameOfYourPU")</code> を使用する</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>org.hibernate.type.format.FormatMapper</code> を実装します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>カスタム XML 形式マッパーの場合は、別の CDI 修飾子を適用する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.hibernate.orm.XmlFormat;
import org.hibernate.type.format.FormatMapper;

@XmlFormat <i class="conum" data-value="1"></i><b>(1)</b>
@PersistenceUnitExtension <i class="conum" data-value="2"></i><b>(2)</b>
public class MyJsonFormatMapper implements FormatMapper { <i class="conum" data-value="3"></i><b>(3)</b>
    @Override
    public &lt;T&gt; T fromString(CharSequence charSequence, JavaType&lt;T&gt; javaType, WrapperOptions wrapperOptions) {
        // ...
    }

    @Override
    public &lt;T&gt; String toString(T value, JavaType&lt;T&gt; javaType, WrapperOptions wrapperOptions) {
       // ...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>このマッパーが XML のシリアライズ/デシリアライズ専用であることを Quarkus に知らせるために、フォーマットマッパーの実装に <code>@XmlFormat</code> 修飾子のアノテーションを付与します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>フォーマットマッパーの実装に <code>@PersistenceUnitExtension</code> 修飾子のアノテーションを付与し、
これがデフォルトの永続化ユニットで使用されるべきものであることを Quarkus に知らせます。
<div class="paragraph">
<p><a href="#multiple-persistence-units">名前付きの永続化ユニット</a> には <code>@PersistenceUnitExtension("nameOfYourPU")</code> を使用する</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>org.hibernate.type.format.FormatMapper</code> を実装します。</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>フォーマットマッパーには、 <code>@PersistenceUnitExtension</code> と、 <code>@JsonFormat</code> または <code>@XmlFormat</code> CDI 修飾子のいずれかが適用されている <strong>必要</strong> があります。</p>
</div>
<div class="paragraph">
<p>同じ永続化ユニットに複数の JSON (または XML) 形式マッパーを登録すると、あいまいさのために例外が発生します。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#solution">ソリューション</a></li>
<li><a href="#setting-up-and-configuring-hibernate-orm">Hibernate ORMのセットアップと設定</a>
<ul class="sectlevel2">
<li><a href="#hibernate-dialect">Dialect</a></li>
<li><a href="#hibernate-configuration-properties">Hibernate ORMの設定プロパティ</a></li>
<li><a href="#multiple-persistence-units">複数の永続性ユニット</a></li>
<li><a href="#persistence-unit-active">永続化ユニットのアクティブ化/非アクティブ化</a></li>
</ul>
</li>
<li><a href="#persistence-xml"><code>persistence.xml</code> を使用した場合のHibernate ORMのセットアップと設定</a></li>
<li><a href="#xml-mapping">XMLマッピング</a></li>
<li><a href="#defining-entities-in-external-projects-or-jars">外部プロジェクトや jar でエンティティーを定義する</a></li>
<li><a href="#dev-mode">開発モードでのHibernate ORM</a></li>
<li><a href="#hibernate-orm-in-production-mode">本番モードでのHibernate ORM</a></li>
<li><a href="#flyway">スキーマを管理するためのFlywayへの自動移行</a></li>
<li><a href="#caching">キャッシング</a>
<ul class="sectlevel2">
<li><a href="#caching-of-entities">エンティティーのキャッシュ</a></li>
<li><a href="#caching-of-collections-and-relations">コレクションとリレーションのキャッシング</a></li>
<li><a href="#caching-of-queries">クエリのキャッシュ</a></li>
<li><a href="#tuning-of-cache-regions">キャッシュ領域の調整</a></li>
<li><a href="#limitations-of-caching">キャッシングの制限</a></li>
</ul>
</li>
<li><a href="#envers">Hibernate Envers</a></li>
<li><a href="#metrics">メトリクス</a></li>
<li><a href="#limitations-and-other-things-you-should-know">制限事項など知っておくべきこと</a>
<ul class="sectlevel2">
<li><a href="#automatic-build-time-enhancement">自動ビルド時間の強化</a></li>
<li><a href="#automatic-integration">自動統合</a></li>
<li><a href="#limitations">制約事項</a></li>
<li><a href="#other-notable-differences">その他の特記すべき相違点</a></li>
</ul>
</li>
<li><a href="#simplifying-hibernate-orm-with-panache">Simplified Hibernate ORM with Panache</a></li>
<li><a href="#configure-your-datasource">データソースの設定</a></li>
<li><a href="#multitenancy">マルチテナンシー</a>
<ul class="sectlevel2">
<li><a href="#writing-the-application">アプリケーションの記述</a></li>
<li><a href="#configuring-the-application">アプリケーションの設定</a></li>
<li><a href="#programmatically-resolving-tenants-connections">テナント接続をプログラムで解決</a></li>
</ul>
</li>
<li><a href="#interceptors">インターセプター</a></li>
<li><a href="#statement_inspectors">ステートメントインスペクター</a></li>
<li><a href="#json_xml_serialization_deserialization">JSON/XML シリアル化/デシリアル化のカスタマイズ</a></li>
</ul></div>
    </div>
  </div>
  <h2>関連コンテンツ</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じエクステンションについて</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-orm-panache">Simplified Hibernate ORM with Panache</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-orm-panache-kotlin">Simplified Hibernate ORM with PanacheとKotlin</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>同じトピックについて</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-orm-panache">Simplified Hibernate ORM with Panache</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-orm-panache-kotlin">Simplified Hibernate ORM with PanacheとKotlin</a></li>
      
        
        <li class="reference"><a href="/version/3.15/guides/datasource">Quarkusでデータソースを設定</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/rest-data-panache">PanacheでJakarta RESTリソースを生成する</a></li>
      
        
        <li class="howto"><a href="/version/3.15/guides/security-jpa">Quarkus SecurityとJakarta Persistence</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/reactive-sql-clients">リアクティブ SQL クライアント</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-reactive-panache">シンプルなHibernate Reactive with Panache</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-search-orm-elasticsearch">Hibernate ORMとElasticsearch/OpenSearchでHibernate Searchを使用</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/hibernate-reactive">Hibernate Reactiveの使用</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/security-jdbc">JDBCと共にSecurityを使用</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/cache">アプリケーションデータのキャッシング</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/elasticsearch">Elasticsearchクラスターの実行</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/databases-dev-services">Dev Services for Databases</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/elasticsearch-dev-services">Dev Services for Elasticsearch</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/infinispan-dev-services">Dev Services for Infinispan</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/redis-dev-services">Dev Services for Redis</a></li>
      
        
        <li class="reference"><a href="/version/3.15/guides/cache-infinispan-reference">Infinispan キャッシュ</a></li>
      
        
        <li class="reference"><a href="/version/3.15/guides/infinispan-client-reference">Infinispanクライアントエクステンションリファレンスガイド</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/lra">Narayana LRA 参加者サポート</a></li>
      
        
        <li class="reference"><a href="/version/3.15/guides/cache-redis-reference">Redisキャッシュ</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">ホーム</a></li>
          
          
          
            <li><a href="/about" target="_blank">Quarkusについて</a></li>
          
          
          
            <li><a href="/blog" target="_blank">ブログ</a></li>
          
          
          
            <li><a href="/insights" target="_blank">ポッドキャスト</a></li>
          
          
          
            <li><a href="/events" target="_blank">イベント</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">ニュースレター</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">ユーザーストーリー</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">ロードマップ</a></li>
          
          
          
            <li><a href="/security" target="_blank">セキュリティ&nbsp;ポリシー</a></li>
          
          
          
            <li><a href="/usage" target="_blank">使用方法</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォローする</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">サポート</a></li>
          
          
          
            <li><a href="/guides" target="_blank">ガイド</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">入門</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">ディスカッション</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">開発メーリングリスト</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>言語</span>
        <ul class="footer-links">
          
          
            <li><a href=" https://quarkus.io/ " target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href=" https://es.quarkus.io/ " target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href=" https://ja.quarkus.io/ " target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate ORM</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">その他多数...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
