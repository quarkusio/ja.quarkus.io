<!DOCTYPE html>
<html lang="ja">







<head>
  <title>Hibernate Validatorによるバリデーション - 3.15 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.15/guides/validation" />
  <meta property="og:title" content="Hibernate Validatorによるバリデーション - 3.15" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/validation">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  


<div class="grid-wrapper communitysite">
  <div class="grid__item width-12-12">The <a href="https://quarkus.io/version/3.15/guides/validation">English version of quarkus.io</a> is the official project site. Translated sites are community supported on a best-effort basis.</div>
</div>


  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox"> <i class="fa fa-bars"></i>
</label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">QUARKUSとは何か?</a></li>
          <li><a href="/developer-joy" class="">開発者満足</a></li>
          <li><a href="/performance" class="">パフォーマンス</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">標準</a></li>
          <li><a href="/versatility" class="">多用途性</a></li>
          <li><a href="/container-first" class="">コンテナ・ファースト</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">入門</a></li>
          <li><a href="/guides" class="active">ドキュメント</a></li>
          <li><a href="/userstories/" class="">ユーザーストーリー</a></li>  
          <li><a href="/qtips" class="">"Q" Tipsビデオ</a></li>          
          <li><a href="/books" class="">書籍</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
<li><a href="https://quarkus.io/extensions/" class="">エクステンションを探す</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">エクステンションの使用</a></li>
          <li><a href="/guides/writing-extensions" class="">エクステンションの作成</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">エクステンションの共有</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">サポート</a></li>
          <li><a href="/blog" class="">ブログ</a></li>
          <li><a href="/discussion" class="">ディスカッション</a></li>
          <li><a href="/working-groups" class="">ワーキンググループ</a></li>
          <li><a href="/insights" class="">ポッドキャスト</a></li>
          <li><a href="/events" class="">イベント</a></li>
          <li><a href="/newsletter" class="">ニュースレター</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ロードマップ</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary
white">コーディングを開始</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.15/guides/validation" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.15/guides/validation">ポルトガル（BR）</a></li>
          <li><a href="https://es.quarkus.io/version/3.15/guides/validation">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.15/guides/validation">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.15/guides/validation">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas
fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.15/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>バージョン:</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.28.4 - Latest</option>
        
        
        
        <option value="3.27" >3.27</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" selected>3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Hibernate Validatorによるバリデーション </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>このガイドでは、以下の場合のHibernate Validator/Bean Validation の使用方法について説明します:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>REST サービスの入出力の検証</p>
</li>
<li>
<p>ビジネスサービスのメソッドのパラメーターと戻り値の検証</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>前提条件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このガイドを完成させるには、以下が必要です:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>約15分</p>
</li>
<li>
<p>IDE</p>
</li>
<li>
<p>JDK 17+がインストールされ、 <code>JAVA_HOME</code> が適切に設定されていること</p>
</li>
<li>
<p>Apache Maven 3.9.8</p>
</li>
<li>
<p>使用したい場合は、 <a href="cli-tooling.html">Quarkus CLI</a></p>
</li>
<li>
<p>ネイティブ実行可能ファイルをビルドしたい場合、MandrelまたはGraalVM（あるいはネイティブなコンテナビルドを使用する場合はDocker）をインストールし、 <a href="building-native-image.html#configuring-graalvm">適切に設定</a>していること</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>アーキテクチャ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このガイドで構築されたアプリケーションは非常にシンプルです。ユーザーはウェブページ上でフォームを入力します。Web ページはフォームの内容を JSON として <code>BookResource</code> に送信します (Ajax を使用)。 <code>BookResource</code> はユーザーの入力を検証し、 <em>結果</em> をJSON として返します。</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/validation-guide-architecture.png" alt="Architecture"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>ソリューション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>次の章で紹介する手順に沿って、ステップを踏んでアプリを作成することをお勧めします。ただし、完成した例にそのまま進んでも構いません。</p>
</div>
<div class="paragraph">
<p>Gitレポジトリをクローンするか <code>git clone -b 3.15 <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code> 、 <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/3.15.zip">アーカイブ</a> をダウンロードします。</p>
</div>
<div class="paragraph">
<p>ソリューションは <code>validation-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/3.15/validation-quickstart">ディレクトリ</a> にあります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>Mavenプロジェクトの作成</h2>
<div class="sectionbody">
<div class="paragraph">
<p>まず、新しいプロジェクトが必要です。以下のコマンドで新規プロジェクトを作成します。</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-sync-cli">
<div class="content">
<div class="title">コマンドラインインタフェース</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus create app org.acme:validation-quickstart \
    --extension='rest-jackson,hibernate-validator' \
    --no-code
cd validation-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gradleプロジェクトを作成するには、 <code>--gradle</code> または <code>--gradle-kotlin-dsl</code> オプションを追加します。</p>
</div>
<div class="paragraph">
<p>Quarkus CLIのインストールと使用方法の詳細については、 <a href="cli-tooling">Quarkus CLI</a> ガイドを参照してください。</p>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-sync-maven">
<div class="content">
<div class="title">Maven</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn io.quarkus.platform:quarkus-maven-plugin:3.15.7:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=validation-quickstart \
    -Dextensions='rest-jackson,hibernate-validator' \
    -DnoCode
cd validation-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gradleプロジェクトを作成するには、 <code>-DbuildTool=gradle</code> または <code>-DbuildTool=gradle-kotlin-dsl</code> オプションを追加します。</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Windowsユーザーの場合:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cmdを使用する場合、（バックスラッシュ <code>\</code> を使用せず、すべてを同じ行に書かないでください）。</p>
</li>
<li>
<p>Powershellを使用する場合は、 <code>-D</code> パラメータを二重引用符で囲んでください。例: <code>"-DprojectArtifactId=validation-quickstart"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>このコマンドは、Quarkus REST (旧RESTEasy Reactive)/Jakarta REST、Jackson、およびHibernate Validator/Bean ValidationエクステンションをインポートするMaven構造を生成します。</p>
</div>
<div class="paragraph">
<p>すでにQuarkusプロジェクトが設定されている場合は、プロジェクトのベースディレクトリーで以下のコマンドを実行することで、プロジェクトに <code>hibernate-validator</code> エクステンションを追加することができます。</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">コマンドラインインタフェース</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus extension add hibernate-validator</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:add-extension -Dextensions='hibernate-validator'</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew addExtension --extensions='hibernate-validator'</code></pre>
</div>
</div>
<div class="paragraph">
<p>これにより、 <code>pom.xml</code> に以下が追加されます:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-hibernate-validator&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-hibernate-validator")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="constraints"><a class="anchor" href="#constraints"></a>制約</h2>
<div class="sectionbody">
<div class="paragraph">
<p>今回のアプリケーションでは、基本のオブジェクトをテストすることになりますが、複雑な制約にも対応しており、オブジェクトのグラフを検証することができます。以下の内容で <code>org.acme.validation.Book</code> クラスを作成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.validation;

import jakarta.validation.constraints.NotBlank;
import jakarta.validation.constraints.Min;

public class Book {

    @NotBlank(message="Title may not be blank")
    public String title;

    @NotBlank(message="Author may not be blank")
    public String author;

    @Min(message="Author has been very lazy", value=1)
    public double pages;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>フィールドに制約を加え、オブジェクトが検証されると値がチェックされます。ゲッターメソッドとセッターメソッドはJSONマッピングにも使われています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json-mapping-and-validation"><a class="anchor" href="#json-mapping-and-validation"></a>JSONのマッピングとバリデーション</h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下のRESTリソースを <code>org.acme.validation.BookResource</code> として作成します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.validation;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/books")
public class BookResource {

    @Inject
    Validator validator; <i class="conum" data-value="1"></i><b>(1)</b>

    @Path("/manual-validation")
    @POST
    public Result tryMeManualValidation(Book book) {
        Set&lt;ConstraintViolation&lt;Book&gt;&gt; violations = validator.validate(book);
        if (violations.isEmpty()) {
            return new Result("Book is valid! It was validated by manual validation.");
        } else {
            return new Result(violations);
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Validator</code> インスタンスはCDIで注入されます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>はい、これはコンパイル出来ません。 <code>Result</code> がありませんが、私たちはすぐに追加します。</p>
</div>
<div class="paragraph">
<p>メソッドパラメーター( <code>book</code> )は、JSONペイロードから自動的に作成されます。</p>
</div>
<div class="paragraph">
<p>このメソッドは、 <code>Validator</code> インスタンスを使用してペイロードをチェックします。このメソッドは、違反のセットを返却します。このセットが空であれば、オブジェクトが有効であることを意味します。失敗した場合は、メッセージが連結され、ブラウザに送り返されます。</p>
</div>
<div class="paragraph">
<p>それでは、 <code>Result</code> クラスをインナークラスとして作成してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static class Result {

    Result(String message) {
        this.success = true;
        this.message = message;
    }

    Result(Set&lt;? extends ConstraintViolation&lt;?&gt;&gt; violations) {
        this.success = false;
        this.message = violations.stream()
             .map(cv -&gt; cv.getMessage())
             .collect(Collectors.joining(", "));
    }

    private String message;
    private boolean success;

    public String getMessage() {
        return message;
    }

    public boolean isSuccess() {
        return success;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このクラスは非常にシンプルで、2つのフィールドとそれに関連するゲッターとセッターだけが含まれています。JSONを生成することを示しているので、JSONへのマッピングは自動的に行われます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest-end-point-validation"><a class="anchor" href="#rest-end-point-validation"></a>RESTエンドポイントバリデーション</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Validator</code> を手動で使用することは、高度な使用法には便利かもしれませんが、単にパラメーターや戻り値、RESTのエンドポイントを検証したい場合は、制約( <code>@NotNull</code>, <code>@Digits</code>&#8230;&#8203;)や <code>@Valid</code> (Beanに検証をカスケードします)を使用して直接アノテーションすることができます。</p>
</div>
<div class="paragraph">
<p>リクエストで提供された <code>Book</code> を検証するエンドポイントを作成してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/end-point-method-validation")
@POST
@Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Result tryMeEndPointMethodValidation(@Valid Book book) {
    return new Result("Book is valid! It was validated by end point method validation.");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>ご覧のように、提供された <code>Book</code> は自動的に検証されるので、もう手動で検証する必要はありません。</p>
</div>
<div class="paragraph">
<p>検証エラーが発生した場合、違反レポートが生成され、そしてエンドポイントがJSON出力を生成することによってJSONとしてシリアライズされます。これを抽出して操作することで、適切なエラーメッセージを表示することができます。</p>
</div>
<div class="paragraph">
<p>そのようなレポートの例としては次のようになります:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "title": "Constraint Violation",
    "status": 400,
    "violations": [
        {
            "field": "tryMeEndPointMethodValidation.book.title",
            "message": "Title cannot be blank"
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>このレスポンスはQuarkusによって、 <code>jakarta.ws.rs.ext.ExceptionMapper</code> の組み込み実装によって生成されます。アプリケーションコードが何らかのカスタム方法で <code>ValidationException</code> を処理する必要がある場合、 <code>jakarta.ws.rs.ext.ExceptionMapper</code> の実装を提供することができます：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.validation.ValidationException;
import jakarta.ws.rs.core.Response;
import jakarta.ws.rs.ext.ExceptionMapper;
import jakarta.ws.rs.ext.Provider;

@Provider
public class ResteasyReactiveViolationExceptionMapper implements ExceptionMapper&lt;ValidationException&gt; {

    @Override
    public Response toResponse(ValidationException exception) {
        // TODO: implement
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-method-validation"><a class="anchor" href="#service-method-validation"></a>サービスメソッドの検証</h2>
<div class="sectionbody">
<div class="paragraph">
<p>バリデーションルールをエンドポイントレベルで宣言するのは、必ずしも便利とは限りません。ビジネスバリデーションと重複する可能性があるためです。</p>
</div>
<div class="paragraph">
<p>最良の選択肢は、ビジネスサービスのメソッドに制約をアノテーションすることです(私たちの場合は <code>@Valid</code> ):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.validation;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.validation.Valid;

@ApplicationScoped
public class BookService {

    public void validateBook(@Valid Book book) {
        // your business logic here
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>RESTエンドポイントでサービスを呼び出すと、自動的に <code>Book</code> の検証が行われます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject BookService bookService;

@Path("/service-method-validation")
@POST
public Result tryMeServiceMethodValidation(Book book) {
    try {
        bookService.validateBook(book);
        return new Result("Book is valid! It was validated by service method validation.");
    } catch (ConstraintViolationException e) {
        return new Result(e.getConstraintViolations());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>検証エラーをフロントエンドにプッシュしたい場合は、例外をキャッチして自分で情報をプッシュしなければなりません。</p>
</div>
<div class="paragraph">
<p>通常、サービスの内部、特に違反オブジェクトに含まれる検証された値を公開したくないことに留意してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a-frontend"><a class="anchor" href="#a-frontend"></a>フロントエンド</h2>
<div class="sectionbody">
<div class="paragraph">
<p>それでは、 <code>BookResource</code> と対話するための簡単なWebページを追加してみましょう。
Quarkusは、 <code>META-INF/resources</code> ディレクトリに含まれる静的リソースを自動的に提供します。 
<code>src/main/resources/META-INF/resources</code> ディレクトリで、 <code>index.html</code> ファイルをこの <a href="https://github.com/quarkusio/quarkus-quickstarts/blob/3.15/validation-quickstart/src/main/resources/META-INF/resources/index.html">index.html</a> ファイルの内容で置き換えます。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-the-application"><a class="anchor" href="#run-the-application"></a>アプリケーションの実行</h2>
<div class="sectionbody">
<div class="paragraph">
<p>では、実際にアプリケーションを見てみましょう。以下のように実行してみてください:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">コマンドラインインタフェース</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew --console=plain quarkusDev</code></pre>
</div>
</div>
<div class="paragraph">
<p>そして、ブラウザで <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a> を開いてください:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>書籍の詳細を入力してください(有効または無効)</p>
</li>
<li>
<p><em>Try me&#8230;&#8203;</em> ボタンをクリックして、上記で紹介した方法のいずれかを使用してデータが有効かどうかを確認してください。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/validation-guide-screenshot.png" alt="Application"></span></p>
</div>
<div class="paragraph">
<p>アプリケーションは以下でパッケージ化することができます:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">コマンドラインインタフェース</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus build</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw install</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew build</code></pre>
</div>
</div>
<div class="paragraph">
<p>そして次のコマンドで実行できます。 <code>java -jar target/quarkus-app/quarkus-run.jar</code>.</p>
</div>
<div class="paragraph">
<p>ネイティブ実行可能ファイルを次のようにビルドすることもできます。</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">コマンドラインインタフェース</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus build --native</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./mvnw install -Dnative</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./gradlew build -Dquarkus.native.enabled=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="going-further"><a class="anchor" href="#going-further"></a>さらに詳しく</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="hibernate-validator-extension-and-cdi"><a class="anchor" href="#hibernate-validator-extension-and-cdi"></a>Hibernate Validator エクステンションと CDI</h3>
<div class="paragraph">
<p>Hibernate ValidatorエクステンションはCDIと緊密に統合されています。</p>
</div>
<div class="sect3">
<h4 id="configuring-the-validatorfactory"><a class="anchor" href="#configuring-the-validatorfactory"></a>ValidatorFactoryの設定</h4>
<div class="paragraph">
<p>時には、 <code>ValidatorFactory</code> の動作を設定する必要があるかもしれません。例えば、特定の <code>ParameterNameProvider</code> を使用するためなどです。</p>
</div>
<div class="paragraph">
<p><code>ValidatorFactory</code> は、Quarkus 自体によってインスタンス化されていますが、設定に注入される代わりのBeanを宣言することで、非常に簡単に微調整することができます。</p>
</div>
<div class="paragraph">
<p>アプリケーションで以下のタイプのBeanを作成すると、自動的に <code>ValidatorFactory</code> の設定に注入されます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jakarta.validation.ClockProvider</code></p>
</li>
<li>
<p><code>jakarta.validation.ConstraintValidator</code></p>
</li>
<li>
<p><code>jakarta.validation.ConstraintValidatorFactory</code></p>
</li>
<li>
<p><code>jakarta.validation.MessageInterpolator</code></p>
</li>
<li>
<p><code>jakarta.validation.ParameterNameProvider</code></p>
</li>
<li>
<p><code>jakarta.validation.TraversableResolver</code></p>
</li>
<li>
<p><code>org.hibernate.validator.spi.properties.GetterPropertySelectionStrategy</code></p>
</li>
<li>
<p><code>org.hibernate.validator.spi.nodenameprovider.PropertyNodeNameProvider</code></p>
</li>
<li>
<p><code>org.hibernate.validator.spi.scripting.ScriptEvaluatorFactory</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>何も設定しなくても大丈夫です。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>勿論、リストされた各型に対して、宣言することができるのは1つのBeanだけです。</p>
</div>
<div class="paragraph">
<p>ほとんどの場合、これらのBeanは <code>@ApplicationScoped</code> として宣言されるべきです。</p>
</div>
<div class="paragraph">
<p>ただし、制約アノテーションの属性に依存する <code>ConstraintValidator</code> の場合（通常、 <code>initialize(constraintAnnotation)</code> メソッドを実装する場合）、 <code>@Dependent</code> スコープを使用して、各アノテーションコンテキストが <code>ConstraintValidator</code> Beanの個別のインスタンスを持つようにします。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>利用可能な設定プロパティと上記の CDI Bean を介して <code>ValidatorFactory</code> をカスタマイズしても要件が満たされない場合は、 <code>ValidatorFactoryCustomizer</code> Bean を登録することでさらにカスタマイズできます。</p>
</div>
<div class="paragraph">
<p>たとえば、 <code>@Email</code> 制約を強制する組み込みバリデーターをオーバーライドし、代わりに次のクラスで <code>MyEmailValidator</code> を使用できます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyEmailValidatorFactoryCustomizer implements ValidatorFactoryCustomizer {

    @Override
    public void customize(BaseHibernateValidatorConfiguration&lt;?&gt; configuration) {
        ConstraintMapping constraintMapping = configuration.createConstraintMapping();

        constraintMapping
                .constraintDefinition(Email.class)
                .includeExistingValidators(false)
                .validatedBy(MyEmailValidator.class);

        configuration.addMapping(constraintMapping);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ValidatorFactoryCustomizer</code> を実装するすべての Bean が適用されます。つまり、複数の Bean を持つことができます。もし、何らかの順序付けが必要な場合は、通常の <code>@jakarta.annotation.Priority</code> アノテーションを使用することができます - より高い優先順位の Bean が最初に適用されます。</p>
</div>
</div>
<div class="sect3">
<h4 id="constraint-validators-as-beans"><a class="anchor" href="#constraint-validators-as-beans"></a>Beanとしての制約バリデーター</h4>
<div class="paragraph">
<p>制約バリデータをCDI Beanとして宣言することができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyConstraintValidator implements ConstraintValidator&lt;MyConstraint, String&gt; {

    @Inject
    MyService service;

    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        if (value == null) {
            return true;
        }

        return service.validate(value);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>指定された型の制約バリデーターを初期化する際、Quarkusはこの型のBeanが利用可能かどうかをチェックし、利用可能な場合は <code>ConstraintValidator</code> のインスタンスを作成する代わりにそれを使用します。</p>
</div>
<div class="paragraph">
<p>このように、例で示したように、制約バリデータBeanでインジェクションを完全に使用することができます。</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>ConstraintValidator</code> Bean に選択するスコープは重要です:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>アプリケーション全体で <code>ConstraintValidator</code> Bean の同じインスタンスを使用できる場合は、 <code>@ApplicationScoped</code> スコープを使用します。</p>
</li>
<li>
<p><code>ConstraintValidator</code> Bean が <code>initialize(constraintAnnotation)</code> メソッドを実装し、制約アノテーションの状態に依存する場合は、 <code>@Dependent</code> スコープを使用して、各アノテーション コンテキストに `ConstraintValidator  Beanの個別の適切に構成されたインスタンスがあることを確認します。</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validation-and-localization"><a class="anchor" href="#validation-and-localization"></a>バリデーションとローカリゼーション</h3>
<div class="paragraph">
<p>デフォルトでは、制約違反のメッセージはビルドシステムのロケールで返されます。</p>
</div>
<div class="paragraph">
<p>この動作は、以下の設定を <code>application.properties</code> に追加することで変更することが出来ます:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># The default locale to use
quarkus.default-locale=fr-FR</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jakarta REST エンドポイントのコンテキストでQuarkus REST または RESTEasy Classic を使用している場合、
サポートされているロケールが <code>application.properties</code> で適切に指定されていれば、Hibernate Validator は <code>Accept-Language</code> HTTP ヘッダーから使用する最適なロケールを自動的に解決します：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># The list of all the supported locales
quarkus.locales=en-US,es-ES,fr-FR</code></pre>
</div>
</div>
<div class="paragraph">
<p>あるいは、 <code>all</code> を使って、利用可能なすべてのロケールを含むネイティブイメージの実行可能ファイルを作成することもできます。ただし、実行可能ファイルのサイズが大幅に膨れ上がります。
2つか3つのロケールを含めるのと、すべてのロケールを含めるのとでは、少なくとも23MBの差があります。</p>
</div>
<div class="paragraph">
<p>同様の仕組みは、 <code>quarkus-smallrye-graphql</code> エクステンションに基づく GraphQL サービスにも存在します。</p>
</div>
<div class="paragraph">
<p>このデフォルトのメカニズムでは不十分で、カスタムのロケール解決が必要な場合は、 <code>org.hibernate.validator.spi.messageinterpolation.LocaleResolver</code> を追加することができます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.hibernate.validator.spi.messageinterpolation.LocaleResolver</code> を実装しているCDIビーンはすべて考慮されます。</p>
</li>
<li>
<p><code>LocaleResolver</code> は、 <code>@Priority</code> （優先順位の高いものから）順に参照されます。</p>
</li>
<li>
<p><code>LocaleResolver</code> は、ロケールを解決できない場合は null を返すかもしれない。その場合は無視される。</p>
</li>
<li>
<p><code>LocaleResolver</code> が最初に返した非 NULL ロケールに解決されます。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="validation-groups-for-rest-endpoint-or-service-method-validation"><a class="anchor" href="#validation-groups-for-rest-endpoint-or-service-method-validation"></a>RESTエンドポイントまたはサービスメソッドのバリデーショングループ</h3>
<div class="paragraph">
<p>同じクラスが異なるメソッドに渡されたときに、異なる検証制約を有効にする必要があることがあります。</p>
</div>
<div class="paragraph">
<p>例えば、 <code>Book</code> は、 <code>post</code> メソッドに渡されるときには <code>null</code> 識別子が必要ですが（識別子が生成されるため）、 <code>put</code> メソッドに渡されるときには <code>null</code> 以外の識別子が必要になる場合があります（メソッドが更新内容を知るために識別子を必要とするため）。</p>
</div>
<div class="paragraph">
<p>これに対処するために、バリデーション・グループを利用することができます。バリデーション・グループは、制約を有効または無効にするために制約に付けるマーカーです。</p>
</div>
<div class="paragraph">
<p>まず、 <code>Post</code> と <code>Put</code> グループを定義します。これらは単なるJavaインターフェースです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ValidationGroups {
    interface Post extends Default { <i class="conum" data-value="1"></i><b>(1)</b>
    }
    interface Put extends Default { <i class="conum" data-value="1"></i><b>(1)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>カスタムグループが <code>Default</code> グループを拡張するようにします。これは、これらのグループが有効なときはいつでも、 <code>Default</code> グループも有効であることを意味します。これは、 <code>Post</code> と <code>Put</code> の両方のメソッドで検証したい制約がある場合に便利です。以下の <code>title</code> プロパティのように、これらの制約に単純にデフォルトグループを使用することができます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>次に、関連する制約を <code>Book</code> に追加し、各制約に適切なグループを割り当てます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Book {

    @Null(groups = ValidationGroups.Post.class)
    @NotNull(groups = ValidationGroups.Put.class)
    public Long id;

    @NotBlank
    public String title;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>最後に、検証済みメソッドの <code>@Valid</code> アノテーションの横に <code>@ConvertGroup</code> アノテーションを追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/")
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void post(@Valid @ConvertGroup(to = ValidationGroups.Post.class) Book book) { <i class="conum" data-value="1"></i><b>(1)</b>
    // ...
}

@Path("/")
@PUT
@Consumes(MediaType.APPLICATION_JSON)
public void put(@Valid @ConvertGroup(to = ValidationGroups.Put.class) Book book) { <i class="conum" data-value="2"></i><b>(2)</b>
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Post</code> グループを有効にすると、 <code>Post</code> (および <code>Default</code>) グループに割り当てられた制約のみが <code>post</code> メソッドの <code>book</code> パラメータに対して検証されることを意味します。この場合、 <code>Book.id</code> は <code>null</code> でなければならず、 <code>Book.title</code> は空白であってはならないことを意味します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Put</code> グループを有効にすると、 <code>Put</code> (および <code>Default</code>) グループに割り当てられた制約のみが <code>put</code> メソッドの <code>book</code> パラメータに対して検証されることを意味します。この場合、 <code>Book.id</code> は <code>null</code> であってはならず、 <code>Book.title</code> は空白であってはならないことを意味します。</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="limitations"><a class="anchor" href="#limitations"></a>制約事項</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="meta-infvalidation-xml"><a class="anchor" href="#meta-infvalidation-xml"></a>META-INF/validation.xml</h3>
<div class="paragraph">
<p>Quarkusでは、 <code>META-INF/validation.xml</code> ファイルを使用した <code>ValidatorFactory</code> の設定はサポートされて <strong>いません</strong> 。</p>
</div>
<div class="paragraph">
<p>現時点では、Hibernate Validatorはリフレクションのために適切なクラスを登録する為にこのファイルから情報を抽出するAPIを公開していません。</p>
</div>
<div class="paragraph">
<p><code>ValidatorFactory</code> を設定するには、公開された設定プロパティとCDI統合を使用します。</p>
</div>
<div class="paragraph">
<p>したがって、Quarkusで制約を定義する唯一の方法は、クラスにアノテーションを付けることです。</p>
</div>
</div>
<div class="sect2">
<h3 id="validatorfactory-and-native-executables"><a class="anchor" href="#validatorfactory-and-native-executables"></a>ValidatorFactoryとネイティブ実行可能ファイル</h3>
<div class="paragraph">
<p>Quarkusは、設定プロパティを使用してカスタマイズ可能なデフォルトの <code>ValidatorFactory</code> を提供します。この <code>ValidatorFactory</code> は、Quarkus 固有のブートストラップを使用してネイティブ実行可能ファイルをサポートするように慎重に初期化されています。</p>
</div>
<div class="paragraph">
<p><code>ValidatorFactory</code> を自分で作成することは、ネイティブ実行可能ファイルではサポートされていません。作成しようとすると、ネイティブ実行可能ファイルを実行する際に <code>jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.</code> のようなエラーが発生します。</p>
</div>
<div class="paragraph">
<p>これが、 <code>ValidatorFactory</code> のインスタンスを注入するか、CDIインジェクションを使用して <code>Validator</code> のインスタンスを直接注入することで、Quarkusが管理する <code>ValidatorFactory</code> を常に使用しなければならない理由です。</p>
</div>
<div class="paragraph">
<p>デフォルトのブートストラップを使用して <code>ValidatorFactory</code> を作成している一部の外部ライブラリをサポートするために、Quarkus は <code>Validation.buildDefaultValidatorFactory()</code> が呼び出されたときに Quarkus によって管理されている <code>ValidatorFactory</code> を返却します。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>Hibernate Validator設定リファレンス</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="ビルド時に固定"></i></span>ビルド時に固定される設定プロパティ - 他のすべての設定プロパティは実行時にオーバーライド可能 <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-validator_quarkus-hibernate-validator-fail-fast"></a> <span class="property-path"><a href="#quarkus-hibernate-validator_quarkus-hibernate-validator-fail-fast"><code>quarkus.hibernate-validator.fail-fast</code></a></span></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Enable the fail fast mode. When fail fast is enabled the validation will stop on the first constraint violation detected.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-31536">QUARKUS_HIBERNATE_VALIDATOR_FAIL_FAST</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-31536" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-validator_section_quarkus-hibernate-validator-method-validation"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-validator_section_quarkus-hibernate-validator-method-validation">Method validation</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-validator_quarkus-hibernate-validator-method-validation-allow-overriding-parameter-constraints"></a> <span class="property-path"><a href="#quarkus-hibernate-validator_quarkus-hibernate-validator-method-validation-allow-overriding-parameter-constraints"><code>quarkus.hibernate-validator.method-validation.allow-overriding-parameter-constraints</code></a></span></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Define whether overriding methods that override constraints should throw a <code>ConstraintDefinitionException</code>. The default value is <code>false</code>, i.e. do not allow.</p>
</div>
<div class="paragraph">
<p>See Section 4.5.5 of the JSR 380 specification, specifically</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In sub types (be it sub classes/interfaces or interface implementations), no parameter constraints may be declared on overridden or implemented methods, nor may parameters be marked for cascaded validation. This would pose a strengthening of preconditions to be fulfilled by the caller.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-31537">QUARKUS_HIBERNATE_VALIDATOR_METHOD_VALIDATION_ALLOW_OVERRIDING_PARAMETER_CONSTRAINTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-31537" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-validator_quarkus-hibernate-validator-method-validation-allow-parameter-constraints-on-parallel-methods"></a> <span class="property-path"><a href="#quarkus-hibernate-validator_quarkus-hibernate-validator-method-validation-allow-parameter-constraints-on-parallel-methods"><code>quarkus.hibernate-validator.method-validation.allow-parameter-constraints-on-parallel-methods</code></a></span></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Define whether parallel methods that define constraints should throw a <code>ConstraintDefinitionException</code>. The default value is <code>false</code>, i.e. do not allow.</p>
</div>
<div class="paragraph">
<p>See Section 4.5.5 of the JSR 380 specification, specifically</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If a sub type overrides/implements a method originally defined in several parallel types of the hierarchy (e.g. two interfaces not extending each other, or a class and an interface not implemented by said class), no parameter constraints may be declared for that method at all nor parameters be marked for cascaded validation. This again is to avoid an unexpected strengthening of preconditions to be fulfilled by the caller.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-31538">QUARKUS_HIBERNATE_VALIDATOR_METHOD_VALIDATION_ALLOW_PARAMETER_CONSTRAINTS_ON_PARALLEL_METHODS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-31538" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-validator_quarkus-hibernate-validator-method-validation-allow-multiple-cascaded-validation-on-return-values"></a> <span class="property-path"><a href="#quarkus-hibernate-validator_quarkus-hibernate-validator-method-validation-allow-multiple-cascaded-validation-on-return-values"><code>quarkus.hibernate-validator.method-validation.allow-multiple-cascaded-validation-on-return-values</code></a></span></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Define whether more than one constraint on a return value may be marked for cascading validation are allowed. The default value is <code>false</code>, i.e. do not allow.</p>
</div>
<div class="paragraph">
<p>See Section 4.5.5 of the JSR 380 specification, specifically</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>One must not mark a method return value for cascaded validation more than once in a line of a class hierarchy. In other words, overriding methods on sub types (be it sub classes/interfaces or interface implementations) cannot mark the return value for cascaded validation if the return value has already been marked on the overridden method of the super type or interface.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-31539">QUARKUS_HIBERNATE_VALIDATOR_METHOD_VALIDATION_ALLOW_MULTIPLE_CASCADED_VALIDATION_ON_RETURN_VALUES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-31539" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-hibernate-validator_section_quarkus-hibernate-validator-expression-language"></a> <span class="section-name section-level0"><a href="#quarkus-hibernate-validator_section_quarkus-hibernate-validator-expression-language">Expression Language</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">タイプ</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">デフォルト</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-hibernate-validator_quarkus-hibernate-validator-expression-language-constraint-expression-feature-level"></a> <span class="property-path"><a href="#quarkus-hibernate-validator_quarkus-hibernate-validator-expression-language-constraint-expression-feature-level"><code>quarkus.hibernate-validator.expression-language.constraint-expression-feature-level</code></a></span></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Configure the Expression Language feature level for constraints, allowing the selection of Expression Language features available for message interpolation.</p>
</div>
<div class="paragraph">
<p>This property only affects the EL feature level of "static" constraint violation messages set through the <code>message</code> attribute of constraint annotations.</p>
</div>
<div class="paragraph">
<p>In particular, it doesn&#8217;t affect the default EL feature level for custom violations created programmatically in validator implementations. The feature level for those can only be configured directly in the validator implementation.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-31540">QUARKUS_HIBERNATE_VALIDATOR_EXPRESSION_LANGUAGE_CONSTRAINT_EXPRESSION_FEATURE_LEVEL</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-31540" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>default</code>, <code>none</code>, <code>variables</code>, <code>bean-properties</code>, <code>bean-methods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>bean-properties</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">前提条件</a></li>
<li><a href="#architecture">アーキテクチャ</a></li>
<li><a href="#solution">ソリューション</a></li>
<li><a href="#creating-the-maven-project">Mavenプロジェクトの作成</a></li>
<li><a href="#constraints">制約</a></li>
<li><a href="#json-mapping-and-validation">JSONのマッピングとバリデーション</a></li>
<li><a href="#rest-end-point-validation">RESTエンドポイントバリデーション</a></li>
<li><a href="#service-method-validation">サービスメソッドの検証</a></li>
<li><a href="#a-frontend">フロントエンド</a></li>
<li><a href="#run-the-application">アプリケーションの実行</a></li>
<li><a href="#going-further">さらに詳しく</a>
<ul class="sectlevel2">
<li><a href="#hibernate-validator-extension-and-cdi">Hibernate Validator エクステンションと CDI</a></li>
<li><a href="#validation-and-localization">バリデーションとローカリゼーション</a></li>
<li><a href="#validation-groups-for-rest-endpoint-or-service-method-validation">RESTエンドポイントまたはサービスメソッドのバリデーショングループ</a></li>
</ul>
</li>
<li><a href="#limitations">制約事項</a>
<ul class="sectlevel2">
<li><a href="#meta-infvalidation-xml">META-INF/validation.xml</a></li>
<li><a href="#validatorfactory-and-native-executables">ValidatorFactoryとネイティブ実行可能ファイル</a></li>
</ul>
</li>
<li><a href="#configuration-reference">Hibernate Validator設定リファレンス</a></li>
</ul></div>
    </div>
  </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>ナビゲーション</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">ホーム</a></li>
          
          
          
            <li><a href="/about" target="_blank">Quarkusについて</a></li>
          
          
          
            <li><a href="/blog" target="_blank">ブログ</a></li>
          
          
          
            <li><a href="/insights" target="_blank">ポッドキャスト</a></li>
          
          
          
            <li><a href="/events" target="_blank">イベント</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">ニュースレター</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">ユーザーストーリー</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">ロードマップ</a></li>
          
          
          
            <li><a href="/security" target="_blank">セキュリティ&nbsp;ポリシー</a></li>
          
          
          
            <li><a href="/usage" target="_blank">使用方法</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>フォローする</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>ヘルプ</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">サポート</a></li>
          
          
          
            <li><a href="/guides" target="_blank">ガイド</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">入門</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">ディスカッション</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">開発メーリングリスト</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>言語</span>
        <ul class="footer-links">
          
          
            <li><a href=" https://quarkus.io/ " target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href=" https://es.quarkus.io/ " target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href=" https://ja.quarkus.io/ " target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkusはコミュニティプロジェクトで構成されています</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate ORM</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">その他多数...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>
