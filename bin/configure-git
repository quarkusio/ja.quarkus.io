#!/usr/bin/env bash
set -eu

#
# This script setups git configuration.
# This is designed to be used in CI workflow only. DO NOT call manually (it pollutes your environment).
#

SCRIPT_DIR=$(cd $(dirname $0); pwd)
L10N_HOME=$(cd $(dirname $SCRIPT_DIR); pwd)
cd $L10N_HOME

export GIT_USER_NAME=`jq ".git.user.name" config/l10n-kit.json -r`
export GIT_USER_EMAIL=`jq ".git.user.email" config/l10n-kit.json -r`

git submodule init
git submodule update
git config --local user.name "$GIT_USER_NAME"
git config --local user.email "$GIT_USER_EMAIL"


